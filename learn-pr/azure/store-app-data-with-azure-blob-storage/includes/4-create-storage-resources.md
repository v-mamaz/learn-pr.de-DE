<span data-ttu-id="39429-101">Sobald wir wissen, wie wir die Daten in Speicherkonten, Containern und Blobs speichern möchten, können wir uns überlegen, welche Azure-Ressourcen wir zur Unterstützung der App erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="39429-101">Once we have an idea of how we're going to store data across storage accounts, containers and blobs, we can think about the Azure resources we need to create to support the app.</span></span>

### <a name="storage-accounts"></a><span data-ttu-id="39429-102">Speicherkonten</span><span class="sxs-lookup"><span data-stu-id="39429-102">Storage accounts</span></span>

<span data-ttu-id="39429-103">Die Erstellung eines Speicherkontos ist eine Verwaltungsaktivität, die vor der Bereitstellung und Ausführung Ihrer App stattfindet.</span><span class="sxs-lookup"><span data-stu-id="39429-103">Storage account creation is an administrative/management activity that takes place prior to deploying and running your app.</span></span> <span data-ttu-id="39429-104">Konten werden in der Regel durch ein Skript für die Einrichtung einer Bereitstellung oder Umgebung, eine Azure Resource Manager-Vorlage oder manuell durch einen Administrator erstellt.</span><span class="sxs-lookup"><span data-stu-id="39429-104">Accounts are usually created by a deployment or environment setup script, an Azure Resource Manager template, or manually by an administrator.</span></span> <span data-ttu-id="39429-105">Anwendungen, bei denen es sich nicht um Verwaltungstools handelt, sollten grundsätzlich nicht über die Berechtigungen zum Erstellen von Speicherkonten verfügen.</span><span class="sxs-lookup"><span data-stu-id="39429-105">Applications other than administrative tools generally should not have permissions to create storage accounts.</span></span>

### <a name="containers"></a><span data-ttu-id="39429-106">Container</span><span class="sxs-lookup"><span data-stu-id="39429-106">Containers</span></span>

<span data-ttu-id="39429-107">Im Gegensatz zum Erstellen eines Speicherkontos ist das Erstellen eines Containers eine relativ einfache Aktivität, die problemlos in einer App ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="39429-107">Unlike storage account creation, container creation is a lightweight activity that makes sense to perform from within an app.</span></span> <span data-ttu-id="39429-108">Es ist nicht ungewöhnlich, dass Apps im Rahmen ihrer Funktionalität Container erstellen und löschen.</span><span class="sxs-lookup"><span data-stu-id="39429-108">It's not uncommon for apps to create and delete containers as part of their work.</span></span>

<span data-ttu-id="39429-109">Bei Apps, die einen bekannten Satz an Containern mit hartcodierten oder vorkonfigurierten Namen benötigen, ist es gang und gäbe, dass diese Apps die benötigten Container beim Starten oder bei der ersten Verwendung erstellen, falls diese noch nicht vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="39429-109">For apps that rely on a known set of containers with hard-coded or preconfigured names, typical practice is to let the app create the containers it needs on startup or first usage if they don't already exist.</span></span> <span data-ttu-id="39429-110">Wenn Sie die Containererstellung nicht im Rahmen der App-Bereitstellung durchführen, sondern Ihrer App überlassen, entfällt sowohl für Ihre Anwendung als auch für Ihren Bereitstellungsprozess die Notwendigkeit, die Namen der Container kennen zu müssen, die von der App verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="39429-110">Letting your app create containers instead of doing it as part of your app's deployment eliminates the need for both your application and your deployment process to know the names of the containers the app uses.</span></span>

## <a name="exercise"></a><span data-ttu-id="39429-111">Übung</span><span class="sxs-lookup"><span data-stu-id="39429-111">Exercise</span></span>

<span data-ttu-id="39429-112">Wir schließen die Bereitstellung einer ASP.NET Core-App ab, indem wir Code zum Verwenden von Azure Blob Storage hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="39429-112">We're going to complete an unfinished ASP.NET Core app by adding code to use Azure Blob storage.</span></span> <span data-ttu-id="39429-113">Bei dieser Übung geht es nicht um das Entwerfen einer Organisation und eines Benennungsschemas, sondern um die Erkundung der Blob Storage-API, dennoch finden Sie hier einen kurzen Überblick über die App und die Art der Datenspeicherung:</span><span class="sxs-lookup"><span data-stu-id="39429-113">This exercise is more about exploring the Blob storage API than it is about designing an organization and naming scheme, but here's a quick overview of the app and how it stores data:</span></span>

<span data-ttu-id="39429-114">**TODO: Screenshot der App, da diese nicht bis zum Ende ausgeführt wird**</span><span class="sxs-lookup"><span data-stu-id="39429-114">**TODO screenshot of app, since they're not going to see it run until the end**</span></span>

<span data-ttu-id="39429-115">Unsere App funktioniert wie ein freigegebener Ordner, der Dateiuploads akzeptiert und diese zum Download zur Verfügung stellt.</span><span class="sxs-lookup"><span data-stu-id="39429-115">Our app works like a shared folder that accepts file uploads and makes them available for download.</span></span> <span data-ttu-id="39429-116">Sie verwendet keine Datenbank zum Organisieren von Blobs, sondern bereinigt die Namen von hochgeladenen Dateien und verwendet diese direkt als Blobnamen.</span><span class="sxs-lookup"><span data-stu-id="39429-116">It doesn't use a database for organizing blobs &mdash; instead, it sanitizes the names of uploaded files and uses them as blob names directly.</span></span> <span data-ttu-id="39429-117">Alle hochgeladenen Dateien werden in einem einzigen Container gespeichert.</span><span class="sxs-lookup"><span data-stu-id="39429-117">All uploaded files are stored in a single container.</span></span>

<span data-ttu-id="39429-118">Der Code, mit dem wir beginnen, lässt sich kompilieren und ausführen, aber die für das Speichern und Laden von Daten zuständigen Teile sind leer.</span><span class="sxs-lookup"><span data-stu-id="39429-118">The code we'll start with compiles and runs, but the parts responsible for storing and loading data are empty.</span></span> <span data-ttu-id="39429-119">Nachdem wir den Code fertig gestellt haben, stellen wir die App in Azure App Service bereit und testen sie.</span><span class="sxs-lookup"><span data-stu-id="39429-119">After we complete the code, we'll deploy the app to Azure App Service and test it.</span></span>

<span data-ttu-id="39429-120">Nun richten wir die Speicherinfrastruktur für unsere App ein.</span><span class="sxs-lookup"><span data-stu-id="39429-120">Let's set up the storage infrastructure for our app.</span></span>

### <a name="resource-group-and-storage-account"></a><span data-ttu-id="39429-121">Ressourcengruppe und Speicherkonto</span><span class="sxs-lookup"><span data-stu-id="39429-121">Resource group and storage account</span></span>
<span data-ttu-id="39429-122">Zuerst erstellen wir eine Ressourcengruppe, die alle Ressourcen in dieser Übung enthalten soll.</span><span class="sxs-lookup"><span data-stu-id="39429-122">First, we'll create a resource group to contain all of the resources in this exercise.</span></span> <span data-ttu-id="39429-123">Diese Gruppe werden wir am Ende löschen, um alle erstellten Elemente zu bereinigen.</span><span class="sxs-lookup"><span data-stu-id="39429-123">We'll delete it at the end to clean up everything we create.</span></span> <span data-ttu-id="39429-124">Wir erstellen auch das Speicherkonto, in dem unsere App Blobs speichern soll.</span><span class="sxs-lookup"><span data-stu-id="39429-124">We'll also create the storage account our app will use to store blobs.</span></span>

<span data-ttu-id="39429-125">Verwenden Sie das Azure Cloud Shell-Terminal, um die Ressourcengruppe und das Speicherkonto zu erstellen, indem Sie die folgenden Azure CLI-Befehle ausführen.</span><span class="sxs-lookup"><span data-stu-id="39429-125">Use the Azure Cloud Shell terminal to create the resource group and storage account by running the following Azure CLI commands.</span></span> <span data-ttu-id="39429-126">Sie müssen einen eindeutigen Namen für das Speicherkonto angeben. Notieren Sie sich diesen Namen, da Sie in später benötigen.</span><span class="sxs-lookup"><span data-stu-id="39429-126">You'll need to provide a unique name for the storage account &mdash; make a note of it for later.</span></span> <span data-ttu-id="39429-127">Die Auswahl von „`eastus`“ für den Standort ist beliebig.</span><span class="sxs-lookup"><span data-stu-id="39429-127">The choice of `eastus` for the location is arbitrary.</span></span>

```console
az group create --name blob-exercise-group --location eastus
az storage account create --name <your-unique-storage-account-name> --resource-group blob-exercise-group --location eastus --kind StorageV2
```

<span data-ttu-id="39429-128">**TODO: Folgendes sollte im Azure Storage-Modul erläutert werden**</span><span class="sxs-lookup"><span data-stu-id="39429-128">**TODO below should go in Azure Storage module**</span></span>

> [!NOTE]
> <span data-ttu-id="39429-129">Warum „`--kind StorageV2`“?</span><span class="sxs-lookup"><span data-stu-id="39429-129">Why `--kind StorageV2`?</span></span> <span data-ttu-id="39429-130">Es gibt verschiedene Arten von Speicherkonten.</span><span class="sxs-lookup"><span data-stu-id="39429-130">There are a few different kinds of storage accounts.</span></span> <span data-ttu-id="39429-131">Für die meisten Szenarien sollten Sie Speicherkonten vom Typ „Allgemein v2“ verwenden (gekennzeichnet durch „`StorageV2`“).</span><span class="sxs-lookup"><span data-stu-id="39429-131">For most scenarios, you should use general-purpose v2 storage accounts (signified with `StorageV2`).</span></span> <span data-ttu-id="39429-132">Der einzige Grund, aus dem hier v2-Speicherkonten angegeben werden sollten, ist, dass diese noch recht neu sind und im Azure-Portal oder in der Azure CLI noch nicht als Standardkonten festgelegt wurden.</span><span class="sxs-lookup"><span data-stu-id="39429-132">The only reason v2 storage accounts need to be specified here is that they are still fairly new and have not yet been made the default in the Azure Portal or the Azure CLI.</span></span>

### <a name="container"></a><span data-ttu-id="39429-133">Container</span><span class="sxs-lookup"><span data-stu-id="39429-133">Container</span></span>
<span data-ttu-id="39429-134">Die App, mit der wir in diesem Modul arbeiten, verwendet einen einzelnen Container.</span><span class="sxs-lookup"><span data-stu-id="39429-134">The app we'll be working with in this module uses a single container.</span></span> <span data-ttu-id="39429-135">Wir wenden eine bewährte Methode an und überlassen der App die Erstellung des Containers beim Start.</span><span class="sxs-lookup"><span data-stu-id="39429-135">We're going to follow the best practice of letting the app create the container at startup.</span></span> <span data-ttu-id="39429-136">Die Containererstellung kann aber auch über die Azure CLI erfolgen: Führen Sie „`az storage container create -h`“ im Cloud Shell-Terminal aus, wenn Sie sich die Dokumentation ansehen möchten.</span><span class="sxs-lookup"><span data-stu-id="39429-136">However, container creation can be done from the Azure CLI: run `az storage container create -h` in the Cloud Shell terminal if you'd like to see the documentation.</span></span>