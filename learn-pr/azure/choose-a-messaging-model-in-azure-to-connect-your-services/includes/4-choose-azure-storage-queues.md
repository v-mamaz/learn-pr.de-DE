<span data-ttu-id="a3328-101">Angenommen, Sie planen die Architektur einer Anwendung für den Austausch von Musik.</span><span class="sxs-lookup"><span data-stu-id="a3328-101">Suppose you are planning the architecture for your music-sharing application.</span></span> <span data-ttu-id="a3328-102">Dabei möchten Sie sicherstellen, dass Musikdateien zuverlässig in die Web-API der mobilen App hochgeladen werden.</span><span class="sxs-lookup"><span data-stu-id="a3328-102">You want to ensure that music files are uploaded to the web API reliably from the mobile app.</span></span>

<span data-ttu-id="a3328-103">Da diese Übertragung eine Nachricht sein sollte, müssen Sie sich entscheiden, ob Sie Azure Storage-Warteschlangen oder Azure Service Bus verwenden. Mit beidem können Sie Warteschlangen mit zu verarbeitenden Nachrichten speichern.</span><span class="sxs-lookup"><span data-stu-id="a3328-103">Having understood that this communication should be a message, you must choose whether to use Azure Storage queues or Azure Service Bus, both of which can be used to store queues of messages as they await processing.</span></span>

## <a name="delivery-guarantees"></a><span data-ttu-id="a3328-104">Übermittlungsgarantie</span><span class="sxs-lookup"><span data-stu-id="a3328-104">Delivery Guarantees</span></span>

<span data-ttu-id="a3328-105">Warteschlangensysteme garantieren in der Regel die Übermittlung jeder Nachricht in der Warteschlange an eine Zielkomponente.</span><span class="sxs-lookup"><span data-stu-id="a3328-105">Queuing systems usually guarantee delivery of each message in the queue to a destination component.</span></span> <span data-ttu-id="a3328-106">Allerdings können dabei unterschiedliche Ansätze verfolgt werden:</span><span class="sxs-lookup"><span data-stu-id="a3328-106">However, these guarantees can take different approaches:</span></span>

- <span data-ttu-id="a3328-107">**At-Least-Once-Übermittlung**</span><span class="sxs-lookup"><span data-stu-id="a3328-107">**At-Least-Once Delivery.**</span></span> <span data-ttu-id="a3328-108">Bei diesem Ansatz wird jede Nachricht an mindestens eine der Komponenten übermittelt, die Nachrichten aus der Warteschlange abrufen.</span><span class="sxs-lookup"><span data-stu-id="a3328-108">In this approach, each message is guaranteed to be delivered to at least one of the components that retrieve messages from the queue.</span></span> <span data-ttu-id="a3328-109">Unter Umständen ist es jedoch möglich, dass dieselbe Nachricht mehrfach übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="a3328-109">Note, however, that in certain circumstances, it is possible that the same message may be delivered more than once.</span></span> <span data-ttu-id="a3328-110">Wenn beispielsweise zwei Instanzen einer Webanwendung Nachrichten aus einer Warteschlange abrufen, geht jede Nachricht in der Regel nur an eine dieser Instanzen.</span><span class="sxs-lookup"><span data-stu-id="a3328-110">For example, if there are two instances of a web app retrieving messages from a queue, ordinarily each message goes to only one of those instances.</span></span> <span data-ttu-id="a3328-111">Wenn eine Instanz jedoch lange zum Verarbeiten der Nachrichten braucht, und ein Timeout abläuft, wird die Nachricht ggf. an die andere Instanz gesendet.</span><span class="sxs-lookup"><span data-stu-id="a3328-111">However, if one instance takes a long time to process the message, and a time-out expires, the message may be sent to the other instance as well.</span></span> <span data-ttu-id="a3328-112">Behalten Sie diese Möglichkeit im Hinterkopf, wenn Sie Ihren Web-App-Code entwickeln.</span><span class="sxs-lookup"><span data-stu-id="a3328-112">Your web app code should be designed with this possibility in mind.</span></span>
- <span data-ttu-id="a3328-113">**At-Most-Once-Übermittlung**</span><span class="sxs-lookup"><span data-stu-id="a3328-113">**At-Most-Once Delivery.**</span></span> <span data-ttu-id="a3328-114">Bei diesem Ansatz wird nicht garantiert, dass jede Nachricht übermittelt wird. Es besteht daher die sehr geringe Wahrscheinlichkeit, dass eine Nachricht nicht ankommt.</span><span class="sxs-lookup"><span data-stu-id="a3328-114">In this approach, each message is not guaranteed to be delivered, and there is a very small chance that it may not arrive.</span></span> <span data-ttu-id="a3328-115">Allerdings kann es anders als bei der „At-Least-Once-Übermittlung“ nicht vorkommen, dass Nachrichten mehrmals übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="a3328-115">However, unlike At-Least-Once delivery, there is no chance that the message will be delivered twice.</span></span>
- <span data-ttu-id="a3328-116">**First In, First Out (FIFO)**</span><span class="sxs-lookup"><span data-stu-id="a3328-116">**First-In-First-Out (FIFO).**</span></span> <span data-ttu-id="a3328-117">In den meisten Messagingsystemen verlassen Nachrichten die Warteschlange in der Reihenfolge, in der sie hinzugefügt wurden. Allerdings sollten Sie überprüfen, ob diese Reihenfolge garantiert wird.</span><span class="sxs-lookup"><span data-stu-id="a3328-117">In most messaging systems, messages usually leave the queue in the same order in which they were added, but you should consider whether this order is guaranteed.</span></span> <span data-ttu-id="a3328-118">Wenn Ihre verteilte Anwendung voraussetzt, dass die Nachrichten in der richtigen Reihenfolge verarbeitet werden, müssen Sie ein Warteschlangensystem mit FIFO-Garantie auswählen.</span><span class="sxs-lookup"><span data-stu-id="a3328-118">If your distributed application requires that messages are processed in precisely the correct order, you must choose a queue system that includes a FIFO guarantee.</span></span>

## <a name="transactions"></a><span data-ttu-id="a3328-119">Transaktionen</span><span class="sxs-lookup"><span data-stu-id="a3328-119">Transactions</span></span>

<span data-ttu-id="a3328-120">Einige eng verwandte Nachrichtengruppen können Probleme verursachen, wenn die Übermittlung einer Nachricht in der Gruppe fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="a3328-120">Some closely related groups of messages may cause problems when delivery fails for one message in the group.</span></span>

<span data-ttu-id="a3328-121">Nehmen Sie als Beispiel eine E-Commerce-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="a3328-121">For example, consider an e-commerce application.</span></span> <span data-ttu-id="a3328-122">Wenn der Benutzer auf die Schaltfläche „Kaufen“ klickt, wird eine Nachricht mit den Bestelldaten zusammen mit einer Nachricht mit den Kreditkartendaten gesendet.</span><span class="sxs-lookup"><span data-stu-id="a3328-122">When the user clicks the "Buy" button, a message with the order details is sent along with a message with the credit card details.</span></span> <span data-ttu-id="a3328-123">Wenn die Nachricht mit den Kreditkartendaten nicht zugestellt wird, wird die Bestellung ggf. ohne Bezahlung versendet.</span><span class="sxs-lookup"><span data-stu-id="a3328-123">If the credit card message is not delivered, the order may be dispatched without payment.</span></span>

<span data-ttu-id="a3328-124">Solche Probleme können Sie vermeiden, indem Sie die beiden Nachrichten in einer Transaktion zusammenfassen.</span><span class="sxs-lookup"><span data-stu-id="a3328-124">You can avoid these kinds of problems by grouping the two messages into a transaction.</span></span> <span data-ttu-id="a3328-125">Wenn Transaktionen erfolgreich sind oder fehlschlagen, dann als ganze Einheit.</span><span class="sxs-lookup"><span data-stu-id="a3328-125">Transactions succeed or fail as a single unit.</span></span> <span data-ttu-id="a3328-126">Wenn die Übermittlung der Kreditkartendaten fehlschlägt, gilt dasselbe für die Nachricht mit den Details zur Bestellung.</span><span class="sxs-lookup"><span data-stu-id="a3328-126">If the credit card details message delivery fails, then so will the order details message.</span></span>

## <a name="when-to-use-storage-queues"></a><span data-ttu-id="a3328-127">Verwenden von Storage-Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="a3328-127">When to use Storage queues</span></span>

<span data-ttu-id="a3328-128">Warteschlangen werden nicht für Ereignisse, sondern für Nachrichten verwendet.</span><span class="sxs-lookup"><span data-stu-id="a3328-128">Queues are used for messages, but not events.</span></span>

<span data-ttu-id="a3328-129">Azure-Speicherkonten enthalten Warteschlangen, die verteilte Anwendungen als einfache temporäre Speicherorte für Nachrichten verwenden können.</span><span class="sxs-lookup"><span data-stu-id="a3328-129">Azure storage accounts include queues, which can be used by distributed applications as simple, temporary storage locations for messages.</span></span> <span data-ttu-id="a3328-130">Eine Quellkomponente kann der Warteschlange eine Nachricht hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a3328-130">A source component can add a message to the queue.</span></span> <span data-ttu-id="a3328-131">Zielkomponenten rufen die Nachricht am Anfang der Warteschlange zur Verarbeitung ab.</span><span class="sxs-lookup"><span data-stu-id="a3328-131">Destination components retrieve the message at the front of the queue for processing.</span></span> <span data-ttu-id="a3328-132">Solche Warteschlangen erhöhen die Zuverlässigkeit des Nachrichtenaustauschs, da im Fall einer hohen Auslastung Nachrichten erst dann verarbeitet werden, wenn die Zielkomponente dazu bereit ist.</span><span class="sxs-lookup"><span data-stu-id="a3328-132">Such queues increase the reliability of the message exchange because, at times of high demand, messages can simply wait until a destination component is ready to process them.</span></span>

<span data-ttu-id="a3328-133">Warteschlangen werden auch im Rahmen von Service Bus-Messaging bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a3328-133">Queues are also provided as part of Service Bus messaging.</span></span> <span data-ttu-id="a3328-134">Wenn Sie eine Warteschlange in Azure für eine bestimmte Übertragung verwenden möchten, haben Sie die Wahl zwischen einer Storage- und einer Service Bus-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="a3328-134">If you have decided to use a queue in Azure for a specific communication, you must decide whether to use a Storage queue or a Service Bus queue.</span></span>

<span data-ttu-id="a3328-135">Berücksichtigen Sie bei der Entscheidungsfindung die folgenden Fragen:</span><span class="sxs-lookup"><span data-stu-id="a3328-135">To make this choice, consider the following questions:</span></span>

- <span data-ttu-id="a3328-136">Benötigen Sie eine At-Most-Once-Übermittlungsgarantie?</span><span class="sxs-lookup"><span data-stu-id="a3328-136">Do you need an At-Most-Once delivery guarantee?</span></span>
- <span data-ttu-id="a3328-137">Benötigen Sie eine FIFO-Garantie?</span><span class="sxs-lookup"><span data-stu-id="a3328-137">Do you need a FIFO guarantee?</span></span>
- <span data-ttu-id="a3328-138">Müssen Sie Nachrichten zu Transaktionen gruppieren?</span><span class="sxs-lookup"><span data-stu-id="a3328-138">Do you need to group messages into transactions?</span></span>
- <span data-ttu-id="a3328-139">Müssen Sie Nachrichten speichern, die größer als 64 KB sind?</span><span class="sxs-lookup"><span data-stu-id="a3328-139">Do you need to store messages larger than 64 KB?</span></span>

<span data-ttu-id="a3328-140">Wenn Sie mindestens eine Frage mit „Ja“ beantwortet haben, entscheiden Sie sich für eine Service Bus-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="a3328-140">If the answer to any of these questions is yes, you must choose to use a Service Bus queue.</span></span>

<span data-ttu-id="a3328-141">Beachten Sie auch die folgenden Fragen:</span><span class="sxs-lookup"><span data-stu-id="a3328-141">In addition, consider the following questions:</span></span>

- <span data-ttu-id="a3328-142">Benötigen Sie serverseitige Protokolle aller Nachrichten, die der Warteschlange hinzugefügt bzw. aus dieser entfernt werden?</span><span class="sxs-lookup"><span data-stu-id="a3328-142">Do you need server-side logs of all messages that pass through the queue?</span></span>
- <span data-ttu-id="a3328-143">Gehen Sie davon aus, dass die Größe der Warteschlange 80 GB überschreitet?</span><span class="sxs-lookup"><span data-stu-id="a3328-143">Do you expect the queue to exceed 80 GB in size?</span></span>

<span data-ttu-id="a3328-144">Wenn Sie mindestens eine Frage mit „Ja“ beantwortet haben, entscheiden Sie sich für eine Storage-Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="a3328-144">If the answer to any of these questions is yes, you must choose to use a Storage queue.</span></span>

## <a name="summary"></a><span data-ttu-id="a3328-145">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="a3328-145">Summary</span></span>

<span data-ttu-id="a3328-146">Eine Warteschlange ist ein einfacher temporärer Speicherort für Nachrichten, die zwischen Komponenten einer verteilten Anwendung gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="a3328-146">A queue is a simple, temporary storage location for messages sent between the components of a distributed application.</span></span> <span data-ttu-id="a3328-147">Mit Warteschlangen können Sie Nachrichten organisieren und unvorhersehbare Nachfragespitzen bewältigen.</span><span class="sxs-lookup"><span data-stu-id="a3328-147">Use a queue to organize messages and gracefully handle unpredictable surges in demand.</span></span>

<span data-ttu-id="a3328-148">Verwenden Sie Storage-Warteschlangen, wenn Sie ein einfaches und leicht zu programmierendes Warteschlangensystem wünschen.</span><span class="sxs-lookup"><span data-stu-id="a3328-148">Use Storage queues when you want a simple and easy-to-code queue system.</span></span> <span data-ttu-id="a3328-149">Nutzen Sie für anspruchsvollere Anforderungen Service Bus-Warteschlangen.</span><span class="sxs-lookup"><span data-stu-id="a3328-149">For more advanced needs, use Service Bus queues.</span></span>