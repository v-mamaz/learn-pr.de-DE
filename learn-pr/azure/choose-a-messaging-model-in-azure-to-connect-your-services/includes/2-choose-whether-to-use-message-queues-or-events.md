<span data-ttu-id="fcc9d-101">Angenommen, Sie planen die Architektur einer verteilten Anwendung zum Austauschen von Musik.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-101">Suppose you are planning the architecture of a distributed music-sharing application.</span></span> <span data-ttu-id="fcc9d-102">Sie möchten sicherstellen, dass die Anwendung möglichst zuverlässig und skalierbar ist, und Sie beabsichtigen die Verwendung von Azure-Technologien, um eine stabile Kommunikationsinfrastruktur zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-102">You want to ensure that the application is as reliable and scalable as possible, and you intend to use Azure technologies to build a robust communication infrastructure.</span></span>

<span data-ttu-id="fcc9d-103">Bevor Sie die richtige Azure-Technologie auswählen können, müssen Sie die gesamte Kommunikation verstehen, die die Komponenten der Anwendung austauschen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-103">Before you can choose the right Azure technology, you must understand each individual communication that the components of the application exchange.</span></span> <span data-ttu-id="fcc9d-104">Für jeden Kommunikationsschritt können Sie eine andere Azure-Technologie auswählen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-104">For each communication you can choose a different Azure technology.</span></span>

<span data-ttu-id="fcc9d-105">Zunächst müssen Sie wissen, ob für die Kommunikation **Nachrichten** oder **Ereignisse** gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-105">The first thing to understand about a communication is whether it sends **messages** or **events**.</span></span> <span data-ttu-id="fcc9d-106">Das ist eine wichtige Entscheidung, die Ihnen dabei hilft, einen entsprechenden Azure-Dienst zu finden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-106">This is a fundamental choice that will help you choose the appropriate Azure service to use.</span></span>

#### <a name="communication-strategies-in-azure-apis"></a><span data-ttu-id="fcc9d-107">Kommunikationsstrategien in Azure (APIs)</span><span class="sxs-lookup"><span data-stu-id="fcc9d-107">Communication strategies in Azure (APIs)</span></span>

> [!VIDEO https://www.microsoft.com/videoplayer/embed/RE2yuaw]

## <a name="what-is-a-message"></a><span data-ttu-id="fcc9d-108">Was ist eine Nachricht?</span><span class="sxs-lookup"><span data-stu-id="fcc9d-108">What is a message?</span></span>
<span data-ttu-id="fcc9d-109">In der Terminologie von verteilten Anwendungen weisen **Nachrichten** folgende Merkmale auf:</span><span class="sxs-lookup"><span data-stu-id="fcc9d-109">In the terminology of distributed applications, **messages** have the following characteristics:</span></span>

- <span data-ttu-id="fcc9d-110">Eine Nachricht enthält Rohdaten, die von einer Komponente erzeugt wurden und von einer anderen Komponente verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-110">A message contains raw data, produced by one component, that will be consumed by another component.</span></span>
- <span data-ttu-id="fcc9d-111">Eine Nachricht enthält die Daten selbst, nicht nur einen Verweis auf diese Daten.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-111">A message contains the data itself, not just a reference to that data.</span></span>
- <span data-ttu-id="fcc9d-112">Die sendende Komponente erwartet, dass der Inhalt der Nachricht auf eine bestimmte Weise von der Zielkomponente verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-112">The sending component expects the message content to be processed in a certain way by the destination component.</span></span> <span data-ttu-id="fcc9d-113">Die Integrität des gesamten Systems kann davon abhängen, dass Absender und Empfänger einen bestimmten Auftrag ausführen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-113">The integrity of the overall system may depend on both sender and receiver doing a specific job.</span></span>

<span data-ttu-id="fcc9d-114">Stellen Sie sich beispielsweise vor, dass ein Benutzer einen neuen Song mit der mobilen App zum Austauschen von Musik hochlädt.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-114">For example, suppose a user uploads a new song by using the mobile music-sharing app.</span></span> <span data-ttu-id="fcc9d-115">Die mobile App muss diesen Song an die Web-API senden, die in Azure ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-115">The mobile app must send that song to the web API that runs in Azure.</span></span> <span data-ttu-id="fcc9d-116">Die Mediendatei des Songs selbst muss gesendet werden, nicht nur eine Benachrichtigung, die angibt, dass ein neuer Song hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-116">The song media file itself must be sent, not just an alert that indicates that a new song has been added.</span></span> <span data-ttu-id="fcc9d-117">Die mobile App erwartet, dass die Web-API den neuen Song in der Datenbank speichert und für andere Benutzer verfügbar macht.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-117">The mobile app expects that the web API will store the new song in the database and make it available to other users.</span></span> <span data-ttu-id="fcc9d-118">Dies ist ein Beispiel für eine Nachricht.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-118">This is an example of a message.</span></span>

## <a name="what-is-an-event"></a><span data-ttu-id="fcc9d-119">Was ist ein Ereignis?</span><span class="sxs-lookup"><span data-stu-id="fcc9d-119">What is an event?</span></span>

<span data-ttu-id="fcc9d-120">**Ereignisse** sind einfacher als Nachrichten und werden am häufigsten für die Broadcastkommunikation verwendet.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-120">**Events** are lighter weight than messages, and are most often used for broadcast communications.</span></span> <span data-ttu-id="fcc9d-121">Die Komponenten, die das Ereignis senden, werden als **Herausgeber** bezeichnet, und die Empfänger werden als **Abonnenten** bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-121">The components sending the event are known as **publishers**, and receivers are known as **subscribers**.</span></span>

<span data-ttu-id="fcc9d-122">Bei Ereignissen entscheiden die empfangenden Komponenten im Allgemeinen, an welcher Kommunikation sie interessiert sind, und „abonnieren“ sie.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-122">With events, receiving components will generally decide in which communications they are interested, and will "subscribe" to those.</span></span> <span data-ttu-id="fcc9d-123">Das Abonnement wird in der Regel von einem Vermittler wie Azure Event Grid oder Azure Event Hubs verwaltet.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-123">The subscription is usually managed by an intermediary, like Azure Event Grid or Azure Event Hubs.</span></span> <span data-ttu-id="fcc9d-124">Wenn Herausgeber ein Ereignis senden, leitet der Vermittler dieses Ereignis an interessierte Abonnenten weiter.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-124">When publishers send an event, the intermediary will route that event to interested subscribers.</span></span> <span data-ttu-id="fcc9d-125">Das wird auch als „Veröffentlichen-Abonnieren-Architektur“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-125">This is known as a "publish-subscribe architecture."</span></span> <span data-ttu-id="fcc9d-126">Dies ist nicht die einzige Möglichkeit zum Behandeln von Ereignissen, aber die am häufigsten genutzte.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-126">It's not the only way to deal with events, but it is the most common.</span></span>

<span data-ttu-id="fcc9d-127">Ereignisse weisen folgende Merkmale auf:</span><span class="sxs-lookup"><span data-stu-id="fcc9d-127">Events have the following characteristics:</span></span>

- <span data-ttu-id="fcc9d-128">Ein Ereignis ist eine einfache Benachrichtigung, die angibt, dass etwas passiert ist.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-128">An event is a lightweight notification that indicates that something happened.</span></span>
- <span data-ttu-id="fcc9d-129">Das Ereignis kann an mehrere Empfänger oder an gar keine Empfänger gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-129">The event may be sent to multiple receivers, or to none at all.</span></span>
- <span data-ttu-id="fcc9d-130">Ereignisse sollen sich meist „weit verbreiten“ oder haben eine große Anzahl von Abonnenten für jeden Herausgeber.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-130">Events are often intended to "fan out," or have a large number of subscribers for each publisher.</span></span>
- <span data-ttu-id="fcc9d-131">Der Herausgeber des Ereignisses hat keine Erwartungen hinsichtlich der Aktion, die eine empfangende Komponente ausführt.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-131">The publisher of the event has no expectation about the action a receiving component takes.</span></span>
- <span data-ttu-id="fcc9d-132">Einige Ereignisse sind diskrete Einheiten und stehen nicht mit anderen Ereignissen im Zusammenhang.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-132">Some events are discrete units and unrelated to other events.</span></span> 
- <span data-ttu-id="fcc9d-133">Einige Ereignisse sind Teil einer verknüpften und geordneten Reihe.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-133">Some events are part of a related and ordered series.</span></span>  

<span data-ttu-id="fcc9d-134">Stellen Sie sich beispielsweise vor, der Upload der Musikdatei wurde abgeschlossen und der neue Song der Datenbank hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-134">For example, suppose the music file upload has been completed, and the new song has been added to the database.</span></span> <span data-ttu-id="fcc9d-135">Um Benutzer über die neue Datei zu informieren, muss die Web-API die Benutzer des Web-Front-Ends und der mobilen App über die neue Datei informieren.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-135">In order to inform users of the new file, the web API must inform the web front end and mobile app users of the new file.</span></span> <span data-ttu-id="fcc9d-136">Die Benutzer können entscheiden, ob sie sich den neuen Song anhören möchten. Die erste Benachrichtigung enthält also nicht die Musikdatei, sondern benachrichtigt die Benutzer nur darüber, dass der Song vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-136">The users can choose whether to listen to the new song, so the initial notification does not include the music file but only notifies users that the song exists.</span></span> <span data-ttu-id="fcc9d-137">Der Absender hat keine bestimmte Erwartung, dass der Ereignisempfänger als Reaktion auf den Empfang dieses Ereignisses etwas Bestimmtes tut.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-137">The sender does not have a specific expectation that the event receivers will do anything particular in responsiveness of receiving this event.</span></span>

<span data-ttu-id="fcc9d-138">Dies ist ein Beispiel für ein diskretes Ereignis.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-138">This is an example of a discrete event.</span></span>

## <a name="how-to-choose-messages-or-events"></a><span data-ttu-id="fcc9d-139">Auswählen von Nachrichten oder Ereignissen</span><span class="sxs-lookup"><span data-stu-id="fcc9d-139">How to choose messages or events</span></span>

<span data-ttu-id="fcc9d-140">Eine einzelne Anwendung wird wahrscheinlich Ereignisse für einige Funktionen und Nachrichten für andere verwenden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-140">A single application is likely to use events for some purposes and messages for others.</span></span> <span data-ttu-id="fcc9d-141">Vor der Entscheidung müssen Sie die Anwendungsarchitektur und alle Anwendungsfälle analysieren, um alle unterschiedlichen Funktionen zu identifizieren, für die ihre Komponenten miteinander kommunizieren müssen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-141">Before you choose, you must analyze your application's architecture and all its use cases, to identify all the different purposes where its components have to communicate with each other.</span></span>

<span data-ttu-id="fcc9d-142">Ereignisse werden eher für Broadcasts verwendet und sind oft kurzlebig. Dies bedeutet, dass die Kommunikation möglicherweise von keinem Empfänger verarbeitet wird, wenn keiner sie gerade abonniert hat.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-142">Events are more likely to be used for broadcasts and are often ephemeral, meaning a communication might not be handled by any receiver if none are currently subscribing.</span></span> <span data-ttu-id="fcc9d-143">Nachrichten werden eher verwendet, wenn die verteilte Anwendung eine Garantie benötigt, dass die Kommunikation verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-143">Messages are more likely to be used where the distributed application requires a guarantee that the communication will be processed.</span></span>

<span data-ttu-id="fcc9d-144">Stellen Sie sich für jede Kommunikation folgende Frage: **Erwartet die sendende Komponente, dass die Kommunikation von der Zielkomponente auf eine bestimmte Weise verarbeitet wird?**</span><span class="sxs-lookup"><span data-stu-id="fcc9d-144">For each communication, consider the following question: **Does the sending component expect the communication to be processed in a particular way by the destination component?**</span></span>

<span data-ttu-id="fcc9d-145">Wenn die Antwort _Ja_ lautet, verwenden Sie eine Nachricht.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-145">If the answer is _yes_, choose to use a message.</span></span> <span data-ttu-id="fcc9d-146">Wenn die Antwort _Nein_ lautet, können Sie möglicherweise Ereignisse verwenden.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-146">If the answer is _no_, you may be able to use events.</span></span>

<span data-ttu-id="fcc9d-147">Wenn Sie verstehen, wie Ihre Komponenten miteinander kommunizieren, können Sie besser entscheiden, wie sie miteinander kommunizieren sollen.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-147">Understanding how your components need to communicate will help you to choose how your components will communicate.</span></span> <span data-ttu-id="fcc9d-148">Beginnen wir mit Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="fcc9d-148">Let's start with messages.</span></span>