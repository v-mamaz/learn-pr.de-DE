Many applications use a publish-subscribe model to notify distributed components that something happened, or that some object changed. Suppose you have a music-sharing application with a Web API that runs in Azure. When a new song is uploaded by a user, you need to notify all the mobile apps installed on user devices around the world who are interested in the genre that was just uploaded.

In this architecture, the publisher of the sound file doesn't need to know about any of the subscribers interested in the music being shared. In addition, we want to have a one-to-many relationship where we can have multiple subscribers who can optionally decide whether they are interested in this new song. Azure Event Grid is a perfect solution for this sort of architecture.

## What is Event Grid?
Event Grid is a service that distributes _events_ from different sources, such as Azure Blob storage accounts or Azure Media Services, to different subscribers, such as Azure Functions or Webhooks.

### What is an event source?
An event source is any component that can generate an event (sometimes referred to as a "publisher"). For example, a user might add a new song to a Blob storage account through our Web API. This generates an event that Event Grid can distribute to interested event subscribers. Publishers send events, but have no expectation of what will receive or process them.

### What is an event subscriber?
An event subscriber is any component that can receive events from Event Grid. For example, Azure Functions can execute code in response to the new song being added to the Blob storage account. Subscribers can decide which events they want to handle and Event Grid will efficiently notify each interested subscriber when a new event is available - no polling required.

Event Grid supports most Azure services as a publisher or subscriber and can also be used with third-party services. It provides a dynamically scalable, low-cost, messaging system that allows publishers to notify subscribers about a status change. The following illustration shows Azure Event Grid receiving messages from multiple sources and distributing them to event handlers based on subscription.

![An illustration showing an Azure Event Grid positioned between multiple event sources and multiple event handlers. The event sources send events to the Event Grid and the Event Grid forwards relevant events to the subscribers. Event Grid use topics to decide which events to send to which handlers. Events sources tag each event with one or more topics and event handlers subscribe to the topics they are interested in.](../media-draft/5-event-grid.png)

> [!NOTE]
> Event Grid sends an event to notify subscribers about something changing - however the _actual object_ that was changed is not part of the event delivery.

## Types of event sources
Events can be generated by the following Azure resource types:

- **Azure subscriptions and resource groups.** Subscriptions and resource groups generate events related to management operations in Azure. For example, when a user creates a virtual machine, this source generates an event.
- **Storage accounts.** Storage accounts can generate events when users add blobs, files, table entries, or queue messages. You can use both blob accounts and general-purpose accounts as event sources.
- **Media Services.** Media Services hosts video and audio media, and provides advanced management features for media files. Media Services can generate events when an encoding job is started or completed on a video file.
- **Azure IoT Hub.** IoT Hub communicates with and gathers telemetry from IoT devices. It can generate events whenever such communications arrive.
- **Custom events.** Custom events can be generated using the REST API, or with the Azure SDK on Java, GO, .NET, Node, Python, and Ruby. For example, you could create a custom event in the Web Apps feature of Azure App Service. This can happen in the worker role, when it picks up a message from a storage queue.

This broad integration with diverse event sources within Azure ensures that Event Grid can distribute events that relate to almost any Azure resource.

## Topics
In Event Grid, a topic is a collection of related events. When you publish events from a source, you decide whether those events need only a single topic or to be divided into multiple topics. Components that receive and handle events subscribe to topics to determine the events they will receive.

## Subscriptions
Event handlers use subscriptions to tell Event Grid which events in a topic they want to receive. The subscription also fixes the endpoint - this is the location that Event Grid sends event notifications. A subscription can also filter events by their type or by their subject, so you can ensure an event handler only receives relevant events.

## Event handlers
The following object types in Azure can receive and handle events from Event Grid:

- **Azure Functions.** An Azure function consists of custom code that runs in Azure, with no host virtual server or container. Use an Azure function as an event handler when you want to code a custom response to the event.
- **Webhooks.** A webhook is web API that implements a push architecture.
- **Azure Logic Apps.** An Azure logic app hosts a business process as a workflow.
- **Microsoft Flow.** Flow also hosts workflows, but it is easier for non-technical staff to use.

## Should you use Event Grid?
Use Event Grid when you need these features:

- **Simplicity.** It is very easy to connect sources to subscribers in Event Grid.
- **Advanced filtering.** Subscriptions have close control over the events they receive from a topic.
- **Fan-out.** You can subscribe an unlimited number of endpoints to the same events and topics.
- **Reliability.** Event Grid retries event delivery for up to 24 hours for each subscription.
- **Pay-per-event.** Pay only for the number of events that you transmit.

## Summary
Event Grid is a simple but versatile event distribution system. Use it to deliver discrete events to subscribers, which will receive those events reliably and quickly. We have one more messaging model to examine - what if we want to deliver a large _stream_ of events? In this scenario, Event Grid isn't a great solution because it's designed for one-event-at-a-time delivery. Instead, we need to turn to another Azure service: Event Hubs.