[!INCLUDE [0-vm-note](0-vm-note.md)]

<span data-ttu-id="33a31-101">Wie bei jedem von Ihnen geschriebenen Anwendungscode müssen an Botcodes vorgenommene Änderungen lokal getestet und gedebuggt werden, bevor der Anwendungscode in der Produktionsumgebung bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="33a31-101">As with any application code that you write, changes to bot code need to be tested and debugged locally before being deployed to production.</span></span> <span data-ttu-id="33a31-102">Zur Vereinfachung des Debuggens von Bots bietet Microsoft den Bot Framework Emulator.</span><span class="sxs-lookup"><span data-stu-id="33a31-102">To help debug bots, Microsoft offers the Bot Framework Emulator.</span></span> <span data-ttu-id="33a31-103">In dieser Einheit lernen Sie, wie Sie Ihre Bots mit Visual Studio Code und dem Emulator debuggen.</span><span class="sxs-lookup"><span data-stu-id="33a31-103">In this unit, you will learn how to use Visual Studio Code and the emulator to debug your bots.</span></span>

1. <span data-ttu-id="33a31-104">Führen Sie im integrierten Terminal von Visual Studio Code den folgenden Befehl aus, um [Restify](http://restify.com/) zu installieren. Dies ist ein beliebtes Node.js-Paket zum Erstellen und Nutzen von RESTful-Webdiensten:</span><span class="sxs-lookup"><span data-stu-id="33a31-104">Execute the following command in Visual Studio Code's integrated terminal to install [Restify](http://restify.com/), a popular Node.js package for building and consuming RESTful web services:</span></span>

    ```bash
    npm install restify
    ```

1. <span data-ttu-id="33a31-105">Wiederholen Sie diesen Schritt für die folgenden Befehle, um das [Microsoft Bot Framework Bot Builder SDK für Node.js](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart) zu installieren:</span><span class="sxs-lookup"><span data-stu-id="33a31-105">Repeat this step for the following commands to install the [Microsoft Bot Framework Bot Builder SDK for Node.js](https://docs.microsoft.com/bot-framework/nodejs/bot-builder-nodejs-quickstart):</span></span>

    ```bash
    npm install botbuilder
    npm install botbuilder-azure
    npm install botbuilder-cognitiveservices
    ```

1. <span data-ttu-id="33a31-106">Wählen Sie in der Aktivitätsleiste von Visual Studio Code die Schaltfläche **Explorer** aus.</span><span class="sxs-lookup"><span data-stu-id="33a31-106">Select the **Explorer** button in Visual Studio Code's activity bar.</span></span> 
1. <span data-ttu-id="33a31-107">Wählen Sie anschließend **app.js** aus, um die Datei im Code-Editor zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="33a31-107">Select **app.js** to open it in the code editor.</span></span> <span data-ttu-id="33a31-108">Diese Datei enthält den Code, der den Bot steuert – Code, der vom Azure Bot Service generiert und aus dem Azure-Portal heruntergeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="33a31-108">This file contains the code that drives the bot — code that was generated by the Azure Bot Service and downloaded from the Azure portal.</span></span>

1. <span data-ttu-id="33a31-109">Ersetzen Sie die Inhalte der Datei **app.js** durch den folgenden Code. Speichern Sie anschließend die Datei.</span><span class="sxs-lookup"><span data-stu-id="33a31-109">Replace the contents of **app.js** with the following code, then save the file.</span></span>

    ```JavaScript
    "use strict";
    var builder = require("botbuilder");
    var botbuilder_azure = require("botbuilder-azure");

    var useEmulator = true;
    var userName = "";
    var yearsCoding = "";
    var selectedLanguage = "";

    var connector = useEmulator ? new builder.ChatConnector() : new botbuilder_azure.BotServiceConnector({
        appId: process.env.MicrosoftAppId,
        appPassword: process.env.MicrosoftAppPassword
    });

    var bot = new builder.UniversalBot(connector);

    bot.dialog('/', [

    function (session) {
        builder.Prompts.text(session, "Hello, and welcome to QnA Factbot! What's your name?");
    },

    function (session, results) {
        userName = results.response;
        builder.Prompts.number(session, "Hi " + userName + ", how many years have you been writing code?");
    },

    function (session, results) {
        yearsCoding = results.response;
        builder.Prompts.choice(session, "What language do you love the most?", ["C#", "Python", "Node.js", "Visual FoxPro"]);
    },

    function (session, results) {
        selectedLanguage = results.response.entity;

        session.send("Okay, " + userName + ", I think I've got it:" +
            " You've been writing code for " + yearsCoding + " years," +
            " and prefer to use " + selectedLanguage + ".");
    }]);

    var restify = require('restify');
    var server = restify.createServer();

    server.listen(3978, function() {
        console.log('test bot endpoint at http://localhost:3978/api/messages');
    });

    server.post('/api/messages', connector.listen());
    ```

1. <span data-ttu-id="33a31-110">Legen Sie für die Zeilen 20, 25 und 30 (`builder.Prompts...`-Aufrufe) Haltepunkte fest, indem Sie diese am Rand auf der linken Seite auswählen.</span><span class="sxs-lookup"><span data-stu-id="33a31-110">Set breakpoints on lines 20, 25, and 30 (`builder.Prompts...` calls) by selecting in the margin on the left.</span></span>

1. <span data-ttu-id="33a31-111">Wählen Sie in der Aktivitätsleiste die Schaltfläche **Debuggen** und anschließend die Schaltfläche mit dem grünen Pfeil (**Debuggen starten**) aus, um eine Debugsitzung zu starten.</span><span class="sxs-lookup"><span data-stu-id="33a31-111">Select the **Debug** button in the activity bar, then select the green arrow **Start Debugging** button to start a debugging session.</span></span> <span data-ttu-id="33a31-112">Überprüfen Sie, ob „Bot-Endpunkt bei http://localhost:3978/api/messages testen“ in der Debugkonsole angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="33a31-112">Confirm that "test bot endpoint at http://localhost:3978/api/messages" appears in the debug console.</span></span>

    ![Screenshot von Visual Studio Code mit dem Debugsystem mit hervorgehobenem Navigationselement „Debuggen“ und der Debug-Wiedergabeschaltfläche, die zum Starten einer Debugsitzung verwendet wird.](../media/5-vs-launch-debugger.png)

    <span data-ttu-id="33a31-114">Ihr Botcode wird jetzt lokal ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="33a31-114">Your bot code is now running locally.</span></span>

1. <span data-ttu-id="33a31-115">Starten Sie über das Startmenü den **Bot Framework Emulator**.</span><span class="sxs-lookup"><span data-stu-id="33a31-115">Launch the **Bot Framework Emulator** from the Start Menu.</span></span>

1. <span data-ttu-id="33a31-116">Wählen Sie das Feld **Enter your endpoint URL** (Geben Sie Ihre Endpunkt-URL ein) aus.</span><span class="sxs-lookup"><span data-stu-id="33a31-116">Select the **Enter your endpoint URL** field.</span></span> <span data-ttu-id="33a31-117">Geben Sie den Botnamen und die Bot-URL ein, die im vorherigen Schritt in der Debugkonsole angezeigt wurden.</span><span class="sxs-lookup"><span data-stu-id="33a31-117">Enter the bot name and the bot URL displayed in the debug console in the previous step.</span></span>

1. <span data-ttu-id="33a31-118">Lassen Sie die Felder „Microsoft App ID“ (Microsoft App-ID), „Microsoft App Password“ (Microsoft App-Kennwort) und „Gebietsschema“ leer, und wählen Sie **CONNECT** (Verbinden) aus.</span><span class="sxs-lookup"><span data-stu-id="33a31-118">Leave the Microsoft App ID, Microsoft App Password, and Locale fields empty and select **CONNECT**.</span></span>

1. <span data-ttu-id="33a31-119">Wählen Sie anschließend **Speichern und verbinden** aus, und speichern Sie die Konfigurationsdatei am Speicherort Ihrer Wahl.</span><span class="sxs-lookup"><span data-stu-id="33a31-119">Then, select **Save and connect** and save the configuration file in the location of your choice.</span></span>

    >[!NOTE]
    > <span data-ttu-id="33a31-120">In Zukunft können Sie die Verbindung mit dem Bot wiederherstellen, indem Sie einfach unter „Meine Bots“ den Namen des Bots auswählen.</span><span class="sxs-lookup"><span data-stu-id="33a31-120">In the future, you can reconnect to the bot simply by selecting the bot name under "My Bots".</span></span>

    ![Screenshot: Bot Framework Emulator mit der Konfigurationsanzeige „Neuer Bot“ mit hervorgehobener Schaltfläche „Speichern und verbinden“.](../media/5-new-bot-configuration.png)

1. <span data-ttu-id="33a31-122">Geben Sie „hi“ in das Feld am unteren Rand des Emulators ein, und drücken Sie die **EINGABETASTE**.</span><span class="sxs-lookup"><span data-stu-id="33a31-122">Type "hi" into the box at the bottom of the emulator and press **Enter**.</span></span> <span data-ttu-id="33a31-123">Vergewissern Sie sich, dass Visual Studio Code in Zeile 20 der Datei **app.js** anhält.</span><span class="sxs-lookup"><span data-stu-id="33a31-123">Confirm that Visual Studio Code breaks on line 20 of **app.js**.</span></span> <span data-ttu-id="33a31-124">Klicken Sie anschließend in der Debugsymbolleiste von Visual Studio Code auf **Weiter**, und kehren Sie zum Emulator zurück, um die Antwort des Bots anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="33a31-124">Then, select the **Continue** button in Visual Studio Code's debugging toolbar, and return to the emulator to see the bot's response.</span></span>

1. <span data-ttu-id="33a31-125">Der Bot wird Ihnen eine Reihe von Fragen stellen.</span><span class="sxs-lookup"><span data-stu-id="33a31-125">The bot will ask you a series of questions.</span></span> <span data-ttu-id="33a31-126">Beantworten Sie diese, und klicken Sie in Visual Studio Code jedes Mal, wenn ein Haltepunkt erreicht wird, auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="33a31-126">Answer them and select **Continue** in Visual Studio Code each time a breakpoint is hit.</span></span> <span data-ttu-id="33a31-127">Wenn Sie fertig sind, klicken Sie zum Beenden der Debugsitzung in der Debugsymbolleiste auf **Beenden**.</span><span class="sxs-lookup"><span data-stu-id="33a31-127">When you're done, select the **Stop** button in the debugging toolbar to end the debugging session.</span></span>

<span data-ttu-id="33a31-128">An diesem Punkt verfügen Sie über einen voll funktionsfähigen Bot und wissen, wie Sie diesen durch lokale Ausführung im Microsoft Bot Framework Emulator debuggen können.</span><span class="sxs-lookup"><span data-stu-id="33a31-128">At this point, you have a fully functioning bot and know how to debug it by running it locally in the Microsoft Bot Framework Emulator.</span></span> <span data-ttu-id="33a31-129">Der nächste Schritt besteht darin, den Bot durch Herstellen einer Verbindung mit der Wissensdatenbank, die Sie veröffentlicht haben, intelligenter zu machen.</span><span class="sxs-lookup"><span data-stu-id="33a31-129">The next step is to make the bot more intelligent by connecting it to the knowledge base you published.</span></span>