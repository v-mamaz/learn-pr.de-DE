<span data-ttu-id="6bbed-101">Damit der Lastenausgleich korrekt funktioniert, müssen Sie vorab Einstellungen konfigurieren, die das Verhalten des Lastenausgleichs steuern.</span><span class="sxs-lookup"><span data-stu-id="6bbed-101">Before the load balancer will function correctly, you must configure settings that control the load balancer's behavior.</span></span> <span data-ttu-id="6bbed-102">Im Folgenden befassen Sie sich mit der Konfiguration des Netzwerks, des Integritätstests, der Sicherheits- und Lastenausgleichsregeln sowie des Serverpools.</span><span class="sxs-lookup"><span data-stu-id="6bbed-102">Here, you will look at configuring the network, health probe, security rules, load-balancing rules, and server pool.</span></span>

## <a name="steps-for-configuring-a-basic-public-load-balancer"></a><span data-ttu-id="6bbed-103">Schritte zum Konfigurieren eines öffentlichen Lastenausgleichs im Tarif „Basic“</span><span class="sxs-lookup"><span data-stu-id="6bbed-103">Steps for configuring a basic public load balancer</span></span>

<span data-ttu-id="6bbed-104">In der folgenden Übersicht sind die wichtigsten Schritte zur Konfiguration eines öffentlichen Lastenausgleichs im Tarif „Basic“ aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6bbed-104">The following is an overview of the main configuration steps for a basic public load balancer.</span></span> <span data-ttu-id="6bbed-105">Die Schritte für einen Lastenausgleich im Tarif „Standard“ und für einen internen Lastenausgleich sehen ähnlich aus.</span><span class="sxs-lookup"><span data-stu-id="6bbed-105">The steps for a standard load balancer and for an internal load balancer will be similar.</span></span> <span data-ttu-id="6bbed-106">Die folgenden vier Punkte müssen bei der Einrichtung berücksichtigt werden:</span><span class="sxs-lookup"><span data-stu-id="6bbed-106">There are essentially four things we need to setup:</span></span>

- <span data-ttu-id="6bbed-107">Back-End-Server zum Verarbeiten von Anforderungen</span><span class="sxs-lookup"><span data-stu-id="6bbed-107">Backend servers to process requests</span></span>
- <span data-ttu-id="6bbed-108">Öffentliche IP-Adresse</span><span class="sxs-lookup"><span data-stu-id="6bbed-108">Public IP address</span></span>
- <span data-ttu-id="6bbed-109">Integritätstest</span><span class="sxs-lookup"><span data-stu-id="6bbed-109">Health probe</span></span>
- <span data-ttu-id="6bbed-110">Lastenausgleichsregeln</span><span class="sxs-lookup"><span data-stu-id="6bbed-110">Load balancer rules</span></span>

### <a name="backend-servers"></a><span data-ttu-id="6bbed-111">Back-End-Server</span><span class="sxs-lookup"><span data-stu-id="6bbed-111">Backend servers</span></span>

<span data-ttu-id="6bbed-112">Zunächst müssen Sie Ihren Back-End-VM-Pool konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="6bbed-112">First, you need to configure your backend VM pool.</span></span> <span data-ttu-id="6bbed-113">Die VMs sollten in derselben Verfügbarkeitsgruppe enthalten sein und über eine eigene öffentliche IP-Adresse verfügen (obwohl diese nicht von Ihren öffentlichen Endpunkten verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="6bbed-113">The VMs should be in the same availability set and have their own public IP address (although this will not actually be used by your public endpoints).</span></span>

<span data-ttu-id="6bbed-114">Sie müssen ein neues virtuelles Netzwerk erstellen und ein Subnetz für den zu verwendenden VM-Pool definieren.</span><span class="sxs-lookup"><span data-stu-id="6bbed-114">You must create a new virtual network and define a subnet for the VM pool to use.</span></span>

 <span data-ttu-id="6bbed-115">Falls mehrere VMs die gleichen Dienste bereitstellen, sollten Sie – obwohl dies nicht direkt zum Lastenausgleichsvorgang gehört – eine **Netzwerksicherheitsgruppe (NSG)** verwenden, um sicherzustellen, dass im gesamten VM-Pool die gleichen Firewallregeln angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="6bbed-115">When you have multiple VMs providing the same services, you should use a **network security group (NSG)** to ensure that the same firewall rules are in place across the VM pool (although this is not part of the actual load-balancing process).</span></span> <span data-ttu-id="6bbed-116">Für VMs, die Webanwendungen hosten, müssen Sie beispielsweise Eingangssicherheitsregeln am Port 80 für HTTP bzw. Port 8080 für HTTPS erstellen.</span><span class="sxs-lookup"><span data-stu-id="6bbed-116">For example, for VMs hosting web applications, you will need to create inbound security rules on port 80 for HTTP or port 8080 for HTTPS.</span></span>

### <a name="public-ip-address"></a><span data-ttu-id="6bbed-117">Öffentliche IP-Adresse</span><span class="sxs-lookup"><span data-stu-id="6bbed-117">Public IP address</span></span>

<span data-ttu-id="6bbed-118">Wenn Sie einen öffentlichen Lastenausgleich im Tarif „Basic“ über das Portal erstellen, wird die **öffentliche IP-Adresse** automatisch als Front-End des Lastenausgleichs konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="6bbed-118">When you create a public basic load balancer using the portal, the **public IP address** is automatically configured as the load balancer front end.</span></span>

<span data-ttu-id="6bbed-119">Teil der Konfiguration des Lastenausgleichs ist der **Back-End-Adresspool**. Dieser enthält die IP-Adressen der virtuellen Netzwerkadapter aller VMs, die mit dem Lastenausgleich verbunden sind und zum Verteilen des Datenverkehrs auf die VMs verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6bbed-119">Part of the configuration of the load balancer is the **backend address pool**, containing the IP addresses of each VM's virtual NICs that are connected to the load balancer and used to distribute traffic to the VMs.</span></span>

### <a name="health-probe"></a><span data-ttu-id="6bbed-120">Integritätstest</span><span class="sxs-lookup"><span data-stu-id="6bbed-120">Health probe</span></span>

<span data-ttu-id="6bbed-121">Basierend auf der Antwort der VMs auf Integritätsüberprüfungen werden die VMs beim Integritätstest dynamisch zur Lastenausgleichsrotation hinzugefügt oder aus ihr entfernt.</span><span class="sxs-lookup"><span data-stu-id="6bbed-121">The health probe dynamically adds or removes VMs from the load balancer rotation based on their response to health checks.</span></span> <span data-ttu-id="6bbed-122">Zwischen den Testversuchen liegen standardmäßig 15 Sekunden.</span><span class="sxs-lookup"><span data-stu-id="6bbed-122">By default, there are 15 seconds between probe attempts.</span></span> <span data-ttu-id="6bbed-123">Nach zwei aufeinanderfolgenden Testfehlern wird ein virtueller Computer als fehlerhaft eingestuft, und der Datenverkehr wird nicht weitergeleitet, bis der Server wieder online ist.</span><span class="sxs-lookup"><span data-stu-id="6bbed-123">After two consecutive probe failures, a VM is considered unhealthy and traffic won't be routed there until the server comes back online.</span></span>

### <a name="rules"></a><span data-ttu-id="6bbed-124">Regeln</span><span class="sxs-lookup"><span data-stu-id="6bbed-124">Rules</span></span>

<span data-ttu-id="6bbed-125">Mit den Lastenausgleichsregeln werden die Ports festgelegt, auf denen der Lastenausgleich lauscht und über die der Datenverkehr an die Back-End-VMs weitergeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="6bbed-125">The load balancer rules identify the port(s) that the load balancer is listening on, and the port(s) used to send traffic to the back end set of VMs.</span></span> <span data-ttu-id="6bbed-126">Sie benötigen mindestens eine Regel zum Weiterleiten von Datenverkehr.</span><span class="sxs-lookup"><span data-stu-id="6bbed-126">You need at least one rule to route traffic.</span></span>
