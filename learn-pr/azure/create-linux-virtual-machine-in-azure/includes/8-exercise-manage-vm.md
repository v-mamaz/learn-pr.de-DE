<span data-ttu-id="3f1ab-101">Wenden wir nun eine Netzwerksicherheitsgruppe auf unser Netzwerk an, um ausschließlich HTTP-Datenverkehr über unseren Server zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-101">Let's apply a network security group to our network, so that we only allow HTTP traffic through our server.</span></span>

## <a name="create-a-network-security-group"></a><span data-ttu-id="3f1ab-102">Erstellen einer Netzwerksicherheitsgruppe</span><span class="sxs-lookup"><span data-stu-id="3f1ab-102">Create a network security group</span></span>

<span data-ttu-id="3f1ab-103">Aufgrund der Angabe, dass wir SSH-Zugriff benötigen, sollte Azure eine Sicherheitsgruppe für uns erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-103">Azure should have created a security group for us because we indicated we wanted SSH access.</span></span> <span data-ttu-id="3f1ab-104">Wir erstellen hier jedoch eine neue Sicherheitsgruppe, damit Sie sich mit dem gesamten Prozess vertraut machen können.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-104">But let's create a new security group, so you can walk through the entire process.</span></span> <span data-ttu-id="3f1ab-105">Das ist besonders wichtig, wenn Sie Ihr virtuelles Netzwerk _vor_ Ihren virtuellen Computern erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-105">This is particularly important if you decide to create your virtual network _before_ your VMs.</span></span> <span data-ttu-id="3f1ab-106">Zur Erinnerung: Sicherheitsgruppen sind _optional_ und werden nicht notwendigerweise zusammen mit dem Netzwerk erstellt.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-106">As mentioned earlier, security groups are _optional_ and not necessarily created with the network.</span></span>

1. <span data-ttu-id="3f1ab-107">Klicken Sie im [Azure-Portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true) auf der linken Randleiste auf die Schaltfläche **Ressource erstellen**, um die Ressourcenerstellung zu starten.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-107">In the [Azure portal](https://portal.azure.com/learn.docs.microsoft.com?azure-portal=true), click the **Create a resource** button in the left-corner sidebar to start a new resource creation.</span></span>

1. <span data-ttu-id="3f1ab-108">Geben Sie **Netzwerksicherheitsgruppe** in das Filterfeld ein, und wählen Sie das entsprechende Element in der Liste aus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-108">Type **Network security group** into the filter box and select the matching item in the list.</span></span>

1. <span data-ttu-id="3f1ab-109">Vergewissern Sie sich, dass das Bereitstellungsmodell **Resource Manager** ausgewählt ist, und klicken Sie auf **Erstellen**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-109">Make sure the **Resource Manager** deployment model is selected and click **Create**.</span></span>

1. <span data-ttu-id="3f1ab-110">Geben Sie einen **Namen** für Ihre Sicherheitsgruppe an.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-110">Provide a **Name** for your security group.</span></span> <span data-ttu-id="3f1ab-111">Auch hier ist eine Namenskonvention sinnvoll.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-111">Again, naming conventions are a good idea here.</span></span> <span data-ttu-id="3f1ab-112">Wir verwenden **test-web-eus-nsg1** für die **erste Web-Netzwerksicherheitsgruppe zu Testzwecken in der Region „USA, Osten“**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-112">Let's use **test-web-eus-nsg1** for **Test Web Network Security Group #1 in East US**.</span></span> <span data-ttu-id="3f1ab-113">Ändern Sie bei Bedarf den Standortteil des Namens, um den Standort Ihrer Sicherheitsgruppe anzugeben.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-113">You'll likely want to change the location portion of the name to reflect where you put the security group.</span></span>

1. <span data-ttu-id="3f1ab-114">Wählen Sie das richtige **Abonnement** aus, und verwenden Sie Ihre bereits vorhandene **Ressourcengruppe**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-114">Select the proper **Subscription** and use your existing **Resource group**.</span></span>

1. <span data-ttu-id="3f1ab-115">Platzieren Sie sie abschließend am gleichen **Standort** wie den virtuellen Computer bzw. das virtuelle Netzwerk.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-115">Finally, put it into the same **Location** as the VM / virtual network.</span></span> <span data-ttu-id="3f1ab-116">Andernfalls können Sie diese Ressource nicht anwenden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-116">This is important; you won't be able to apply this resource if it's in a different location.</span></span>

1. <span data-ttu-id="3f1ab-117">Klicken Sie auf **Erstellen**, um die Gruppe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-117">Click **Create** to create the group.</span></span>

## <a name="add-a-new-inbound-rule-to-our-network-security-group"></a><span data-ttu-id="3f1ab-118">Hinzufügen einer neuen Regel für eingehenden Datenverkehr zur Netzwerksicherheitsgruppe</span><span class="sxs-lookup"><span data-stu-id="3f1ab-118">Add a new inbound rule to our network security group</span></span>

<span data-ttu-id="3f1ab-119">Die Bereitstellung sollte schnell abgeschlossen sein.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-119">Deployment should complete quickly.</span></span> <span data-ttu-id="3f1ab-120">Danach können wir unserer Sicherheitsgruppe neue Regeln hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-120">When it's finished, we can add new rules to our security group:</span></span>

1. <span data-ttu-id="3f1ab-121">Suchen Sie im Azure-Portal nach der neuen Sicherheitsgruppenressource, und wählen Sie sie aus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-121">Find the new security group resource and select it in the Azure portal.</span></span>

1. <span data-ttu-id="3f1ab-122">Auf der Übersichtsseite sehen Sie, dass einige Standardregeln zum Sperren des Netzwerks erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-122">On the overview page, you'll find that it has some default rules created to lock down the network.</span></span>

    <span data-ttu-id="3f1ab-123">Eingangsseite:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-123">On the inbound side:</span></span>

    - <span data-ttu-id="3f1ab-124">Sämtlicher eingehender Datenverkehr zwischen zwei VNets wird zugelassen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-124">All incoming traffic from one VNet to another is allowed.</span></span> <span data-ttu-id="3f1ab-125">Auf diese Weise können Ressourcen im VNet miteinander kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-125">This lets resources on the VNet talk to each other.</span></span>
    - <span data-ttu-id="3f1ab-126">**Testanforderungen** des Azure Load Balancer, um zu überprüfen, ob der virtuelle Computer aktiv ist</span><span class="sxs-lookup"><span data-stu-id="3f1ab-126">Azure Load Balancer **probe** requests to ensure the VM is alive.</span></span>
    - <span data-ttu-id="3f1ab-127">Anderer eingehender Datenverkehr wird vollständig unterbunden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-127">All other inbound traffic is denied.</span></span>

    <span data-ttu-id="3f1ab-128">Ausgangsseite:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-128">On the outbound side:</span></span>
    - <span data-ttu-id="3f1ab-129">Sämtlicher interner Netzwerkdatenverkehr im VNet wird zugelassen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-129">All in-network traffic on the VNet is allowed.</span></span>
    - <span data-ttu-id="3f1ab-130">Sämtlicher ausgehender Datenverkehr an das Internet wird zugelassen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-130">All outbound traffic to the internet is permitted.</span></span>
    - <span data-ttu-id="3f1ab-131">Anderer ausgehender Datenverkehr wird vollständig unterbunden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-131">All other outbound traffic is denied.</span></span>

    > [!NOTE]
    > <span data-ttu-id="3f1ab-132">Da diese Standardregeln mit hohen Prioritätswerten festgelegt sind, werden sie _zuletzt_ ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-132">These default rules are set with high-priority values, which means that they get evaluated _last_.</span></span> <span data-ttu-id="3f1ab-133">Diese Regeln können weder geändert noch gelöscht werden. Sie können die Regeln aber _überschreiben_, indem Sie spezifischere Regeln für Ihren Datenverkehr mit einem niedrigeren Prioritätswert erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-133">They cannot be changed or deleted, but you can _override_ them by creating more specific rules to match your traffic with a lower priority value.</span></span>

1. <span data-ttu-id="3f1ab-134">Klicken Sie im Bereich **Einstellungen** für die Sicherheitsgruppe auf den Abschnitt **Eingangssicherheitsregeln**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-134">Click the **Inbound security rules** section in the **Settings** panel for the security group.</span></span>

1. <span data-ttu-id="3f1ab-135">Klicken Sie auf **+ Hinzufügen**, um eine neue Sicherheitsregel hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-135">Click **+ Add** to add a new security rule.</span></span>

    ![Screenshot des Azure-Portals mit Sicherheitsregeleinstellungen für eingehenden Datenverkehr mit hervorgehobener Schaltfläche „+ Hinzufügen“](../media/8-add-rule.png)

    <span data-ttu-id="3f1ab-137">Die Eingabe der Informationen für eine Sicherheitsregel kann auf zwei Arten erfolgen: im einfachen oder im erweiterten Modus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-137">There are two ways to enter the information necessary for a security rule: basic and advanced.</span></span> <span data-ttu-id="3f1ab-138">Zwischen diesen beiden Modi kann mithilfe der Schaltfläche oben im Bereich **Hinzufügen** gewechselt werden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-138">You can switch between them by clicking the button at the top of the **add** panel.</span></span>

    ![Zwei Screenshots des Azure-Portals, auf denen das Umschalten zwischen der einfachen und der erweiterten Regeleingabe gezeigt wird; ein Pfeil zeigt auf die beiden Zustände der hervorgehobenen Umschaltfläche](../media/8-advanced-create-rule.png)

    <span data-ttu-id="3f1ab-140">Im erweiterten Modus können die Regeln beliebig angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-140">The advanced mode provides the ability to customize the rule completely.</span></span> <span data-ttu-id="3f1ab-141">Wenn Sie allerdings ein bekanntes Protokoll konfigurieren müssen, ist dies im einfachen Modus etwas leichter.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-141">However, if you need to configure a known protocol, the basic mode is a bit easier to work with.</span></span>

1. <span data-ttu-id="3f1ab-142">Wechseln Sie in den einfachen Modus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-142">Switch to the basic mode.</span></span>

1. <span data-ttu-id="3f1ab-143">Fügen Sie die Informationen für die HTTP-Regel hinzu:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-143">Add the information for our HTTP rule:</span></span>

    - <span data-ttu-id="3f1ab-144">Legen Sie den **Dienst** auf „HTTP“ fest.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-144">Set the **Service** to be HTTP.</span></span> <span data-ttu-id="3f1ab-145">Dadurch wird automatisch der Portbereich eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-145">This will set your port range up for you.</span></span>
    - <span data-ttu-id="3f1ab-146">Legen Sie die **Priorität** auf **1000** fest.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-146">Set the **Priority** to **1000**.</span></span> <span data-ttu-id="3f1ab-147">Der Wert muss niedriger sein als der Wert der Standardregel **Verweigern**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-147">It has to be a lower number than the default **Deny** rule.</span></span> <span data-ttu-id="3f1ab-148">Der Bereich kann bei einem beliebigen Wert beginnen. Allerdings wird empfohlen, einen gewissen Puffer zu integrieren, falls später eine Ausnahme erstellt werden muss.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-148">You can start the range at any value, but it's recommended that you give yourself some space in case an exception needs to be created later.</span></span>
    - <span data-ttu-id="3f1ab-149">Benennen Sie die Regel. Wir verwenden hier den Namen **allow-http-traffic**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-149">Give the rule a name; we'll use **allow-http-traffic**.</span></span>
    - <span data-ttu-id="3f1ab-150">Geben Sie eine Beschreibung für die Regel ein.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-150">Give the rule a description.</span></span>

1. <span data-ttu-id="3f1ab-151">Kehren Sie zum Modus **Erweitert** zurück.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-151">Switch back to the **Advanced** mode.</span></span> <span data-ttu-id="3f1ab-152">Wie Sie sehen, sind unsere Einstellungen immer noch vorhanden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-152">Notice that our settings are still present.</span></span> <span data-ttu-id="3f1ab-153">In diesem Bereich können wir differenziertere Einstellungen erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-153">We can use this panel to create more fine-grained settings.</span></span> <span data-ttu-id="3f1ab-154">Wir können beispielsweise die **Quelle** auf eine bestimmte IP-Adresse oder auf einen bestimmten IP-Adressbereich für die Kameras beschränken.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-154">In particular, we would likely restrict the **Source** to be a specific IP address or range of IP addresses specific to the cameras.</span></span> <span data-ttu-id="3f1ab-155">Wenn Sie die aktuelle IP-Adresse Ihres lokalen Computers kennen, können Sie das ausprobieren.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-155">If you know the current IP address of your local computer, you can try that.</span></span> <span data-ttu-id="3f1ab-156">Behalten Sie andernfalls die Einstellung **Beliebig** bei, um die Regel zu testen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-156">Otherwise, leave the setting as **Any**, so you can test the rule.</span></span>

1. <span data-ttu-id="3f1ab-157">Klicken Sie auf **Hinzufügen**, um die Regel zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-157">Click **Add** to create the rule.</span></span> <span data-ttu-id="3f1ab-158">Dadurch wird die Eingangsregelliste aktualisiert. Die Regeln werden nach Priorität sortiert und in der angezeigten Reihenfolge ausgewertet.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-158">This will update the list of inbound rules - notice they are in priority order, which is how they will be examined.</span></span>

## <a name="apply-the-security-group"></a><span data-ttu-id="3f1ab-159">Anwenden der Sicherheitsgruppe</span><span class="sxs-lookup"><span data-stu-id="3f1ab-159">Apply the security group</span></span>

<span data-ttu-id="3f1ab-160">Zur Erinnerung: Eine Sicherheitsgruppe lässt sich auf eine Netzwerkschnittstelle anwenden, um einen einzelnen virtuellen Computer zu schützen, oder auf ein Subnetz, um alle Ressourcen dieses Subnetzes zu schützen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-160">Recall that we can apply the security group to a network interface to guard a single VM or to a subnet where it would apply to any resources on that subnet.</span></span> <span data-ttu-id="3f1ab-161">Da der zweite Ansatz häufiger verwendet wird, greifen wir hier auf diesen zurück.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-161">The latter approach tends to be the most common, so let's do that.</span></span> <span data-ttu-id="3f1ab-162">Zu der Ressource in Azure gelangen wir entweder über die Ressource des virtuellen Netzwerks oder indirekt über den virtuellen Computer, der das virtuelle Netzwerk verwendet.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-162">We could get to this resource in Azure through either the virtual network resource or indirectly through the VM that is using the virtual network.</span></span>

1. <span data-ttu-id="3f1ab-163">Wechseln Sie zum Bereich **Übersicht** für den virtuellen Computer.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-163">Switch to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="3f1ab-164">Den virtuellen Computer finden Sie unter **Alle Ressourcen**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-164">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="3f1ab-165">Klicken Sie im Abschnitt **Einstellungen** auf **Netzwerk**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-165">Select the **Networking** item in the **Settings** section.</span></span>

1. <span data-ttu-id="3f1ab-166">In den Netzwerkeigenschaften finden Sie Informationen zum Netzwerk des virtuellen Computers – einschließlich **Virtuelles Netzwerk/Subnetz**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-166">In the networking properties, you will find information about the networking applied to the VM, including the **Virtual network/subnet**.</span></span> <span data-ttu-id="3f1ab-167">Hierbei handelt es sich um einen Link, den Sie anklicken können, um zur Ressource zu gelangen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-167">This is a clickable link to get to the resource.</span></span> <span data-ttu-id="3f1ab-168">Klicken Sie auf den Link, um das virtuelle Netzwerk zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-168">Click it to open the virtual network.</span></span> <span data-ttu-id="3f1ab-169">Dieser Link steht _auch_ im Bereich **Übersicht** des virtuellen Computers zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-169">This link is _also_ available on the **Overview** panel of the VM.</span></span> <span data-ttu-id="3f1ab-170">Beide Links öffnen die **Übersicht** des virtuellen Netzwerks.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-170">Either of these will open the **Overview** of the virtual network.</span></span>

1. <span data-ttu-id="3f1ab-171">Klicken Sie im Abschnitt **Einstellungen** auf **Subnetze**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-171">In the **Settings** section, select the **Subnets** item.</span></span>

1. <span data-ttu-id="3f1ab-172">Hier sollte ein einzelnes Subnetz (Standard) definiert sein, das zuvor zusammen mit dem virtuellen Computer und dem virtuellen Netzwerk erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-172">We should have a single subnet defined (default) from when we created the VM + network earlier.</span></span> <span data-ttu-id="3f1ab-173">Klicken Sie auf das Listenelement, um die Details zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-173">Click the item in the list to open the details.</span></span>

1. <span data-ttu-id="3f1ab-174">Klicken Sie auf den Eintrag **Netzwerksicherheitsgruppe**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-174">Click the **Network security group** entry.</span></span>

1. <span data-ttu-id="3f1ab-175">Wählen Sie Ihre neue Sicherheitsgruppe (**test-web-eus-nsg1**) aus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-175">Select your new security group: **test-web-eus-nsg1**.</span></span> <span data-ttu-id="3f1ab-176">Hier sollte sich noch eine weitere Gruppe befinden, die zusammen mit dem virtuellen Computer erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-176">There should be another group here as well that was created with the VM.</span></span>

1. <span data-ttu-id="3f1ab-177">Klicken Sie auf **Speichern**, um die Änderung zu speichern.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-177">Click **Save** to save the change.</span></span> <span data-ttu-id="3f1ab-178">Die Anwendung auf das Netzwerk nimmt etwas Zeit in Anspruch.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-178">It will take a minute to apply to the network.</span></span>

## <a name="update-the-nsg-on-the-network-interface"></a><span data-ttu-id="3f1ab-179">Aktualisieren der NSG für die Netzwerkschnittstelle</span><span class="sxs-lookup"><span data-stu-id="3f1ab-179">Update the NSG on the network interface</span></span>

<span data-ttu-id="3f1ab-180">In der auf das Subnetz angewendeten NSG ist zwar der Port 80 geöffnet, er wird jedoch weiterhin blockiert, da er in der auf die Netzwerkschnittstelle angewendeten NSG nicht zugelassen wurde.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-180">Port 80 is open on the NSG applied to the subnet, but it's still going to be blocked because it's not currently allowed on the NSG applied to the network interface.</span></span> <span data-ttu-id="3f1ab-181">Nachdem wir das behoben haben, sollten wir eine Verbindung herstellen können.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-181">Let's fix that and then we should be able to connect.</span></span>

1. <span data-ttu-id="3f1ab-182">Kehren Sie zum Bereich **Übersicht** für den virtuellen Computer zurück.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-182">Switch back to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="3f1ab-183">Den virtuellen Computer finden Sie unter **Alle Ressourcen**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-183">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="3f1ab-184">Klicken Sie im Abschnitt **Einstellungen** auf **Netzwerk**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-184">In the **Settings** section, select the **Networking** item.</span></span>

1. <span data-ttu-id="3f1ab-185">Im Abschnitt **Regeln für eingehende Ports** werden die NSG-Regeln für das Subnetz und direkt darunter die NSG-Regeln für die Netzwerkschnittstelle angezeigt.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-185">In the **Inbound port rules** section you should see the NSG rules for the subnet, then the NSG rules for the network interface just below it.</span></span> <span data-ttu-id="3f1ab-186">Klicken Sie in den NSG-Regeln für die Netzwerkschnittstelle auf **Regel für eingehenden Port hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-186">In the NSG rules for the network interface, select **Add inbound port rule**.</span></span>

1. <span data-ttu-id="3f1ab-187">Wechseln Sie in den einfachen Modus.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-187">Switch to the basic mode.</span></span>

1. <span data-ttu-id="3f1ab-188">Fügen Sie die Informationen für die HTTP-Regel hinzu:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-188">Add the information for our HTTP rule:</span></span>

    - <span data-ttu-id="3f1ab-189">Legen Sie den **Dienst** auf „HTTP“ fest.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-189">Set the **Service** to be HTTP.</span></span> <span data-ttu-id="3f1ab-190">Dadurch wird der Portbereich automatisch eingerichtet.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-190">This will set your port range up for you.</span></span>
    - <span data-ttu-id="3f1ab-191">Legen Sie die **Priorität** auf **310** fest.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-191">Set the **Priority** to **310**.</span></span>
    - <span data-ttu-id="3f1ab-192">Benennen Sie die Regel. Wir verwenden hier den Namen **allow-http-traffic**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-192">Give the rule a name; we'll use **allow-http-traffic**.</span></span>
    - <span data-ttu-id="3f1ab-193">Geben Sie eine Beschreibung für die Regel ein.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-193">Give the rule a description.</span></span>

1. <span data-ttu-id="3f1ab-194">Klicken Sie auf **Hinzufügen**, um die Regel zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-194">Click **Add** to create the rule.</span></span>

## <a name="verify-the-rules"></a><span data-ttu-id="3f1ab-195">Überprüfen der Regeln</span><span class="sxs-lookup"><span data-stu-id="3f1ab-195">Verify the rules</span></span>

<span data-ttu-id="3f1ab-196">Im nächsten Schritt überprüfen wir die Änderung:</span><span class="sxs-lookup"><span data-stu-id="3f1ab-196">Let's validate the change:</span></span>

1. <span data-ttu-id="3f1ab-197">Kehren Sie zum Bereich **Übersicht** für den virtuellen Computer zurück.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-197">Switch back to the **Overview** panel for the virtual machine.</span></span> <span data-ttu-id="3f1ab-198">Den virtuellen Computer finden Sie unter **Alle Ressourcen**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-198">You can find the VM under **All Resources**.</span></span>

1. <span data-ttu-id="3f1ab-199">Klicken Sie im Abschnitt **Einstellungen** auf **Netzwerk**.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-199">Select the **Networking** item in the **Settings** section.</span></span>

1. <span data-ttu-id="3f1ab-200">In den Details der Netzwerkschnittstelle finden Sie den Link **Effektive Sicherheitsregeln**, über den Sie schnell überprüfen können, wie Regeln ausgewertet werden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-200">In the network interface details, there is a link for **Effective security rules** that will quickly show you how rules are going to be evaluated.</span></span> <span data-ttu-id="3f1ab-201">Klicken Sie auf den Link, um die Analyse zu öffnen, und vergewissern Sie sich, dass Ihre neuen Regeln vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-201">Click the link to open the analysis and make sure you see your new rules.</span></span>

    ![Screenshot des Azure-Portals mit dem Blatt „Effektive Sicherheitsregeln“ für unser Netzwerk](../media/8-effective-rules.png)

1. <span data-ttu-id="3f1ab-203">Ob alles funktioniert, können wir natürlich am besten überprüfen, indem wir eine HTTP-Anforderung an unseren Server senden.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-203">Of course, the best way to validate it's all working is to hit our server with an HTTP request.</span></span> <span data-ttu-id="3f1ab-204">Dies sollte nun funktionieren.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-204">It should now work.</span></span>

    ![Screenshot eines Webbrowsers mit der Apache-Standardwebseite, die an der IP-Adresse der neuen Linux-VM gehostet wird.](../media/6-apache-works.png)

## <a name="one-more-thing"></a><span data-ttu-id="3f1ab-206">Noch etwas...</span><span class="sxs-lookup"><span data-stu-id="3f1ab-206">One more thing</span></span>

<span data-ttu-id="3f1ab-207">Die korrekte Implementierung von Sicherheitsregeln ist nicht immer ganz einfach.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-207">Security rules are tricky to get right.</span></span> <span data-ttu-id="3f1ab-208">Bei der Anwendung dieser neuen Sicherheitsgruppe ist uns ein Fehler unterlaufen: Wir haben unseren SSH-Zugriff verloren.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-208">We made a mistake when we applied this new security group - we lost our SSH access!</span></span> <span data-ttu-id="3f1ab-209">Zur Behebung dieses Problems können Sie der auf das Subnetz angewendeten Sicherheitsgruppe eine weitere Regel hinzufügen, um SSH-Zugriff zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-209">To fix this, you can add another rule to the security group applied to the subnet to allow SSH access.</span></span> <span data-ttu-id="3f1ab-210">Achten Sie darauf, die eingehenden TCP/IP-Adressen für die Regel auf Ihre eigenen Adressen zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-210">Make sure to restrict the inbound TCP/IP addresses for the rule to be the ones you own.</span></span>

> [!WARNING]
> <span data-ttu-id="3f1ab-211">Denken Sie immer daran, für den Administratorzugriff verwendete Ports zu sperren.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-211">Always make sure to lock down ports used for administrative access.</span></span> <span data-ttu-id="3f1ab-212">Noch besser: Erstellen Sie ein VPN, um das virtuelle Netzwerk mit Ihrem privaten Netzwerk zu verbinden, und lassen Sie nur RDP- oder SSH-Anforderungen aus diesem Adressbereich zu.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-212">An even better approach is to create a VPN to link the virtual network to your private network and only allow RDP or SSH requests from that address range.</span></span> <span data-ttu-id="3f1ab-213">Sie können auch die Standardeinstellung für den von SSH verwendeten Port ändern.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-213">You can also change the port used by SSH to be something other than the default.</span></span> <span data-ttu-id="3f1ab-214">Denken Sie aber daran, dass eine Portänderung noch keine ausreichende Angriffsabwehr darstellt.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-214">Keep in mind that changing ports is not sufficient to stop attacks.</span></span> <span data-ttu-id="3f1ab-215">Sie erschwert lediglich die Portermittlung.</span><span class="sxs-lookup"><span data-stu-id="3f1ab-215">It simply makes it a little harder to discover.</span></span>