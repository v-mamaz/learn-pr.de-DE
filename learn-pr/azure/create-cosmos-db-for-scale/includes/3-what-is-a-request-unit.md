<span data-ttu-id="4decb-101">Als Nächstes betrachten wir den Datendurchsatz in unserer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="4decb-101">Next we'll consider the data throughout for our database.</span></span> <span data-ttu-id="4decb-102">Dies ist wichtig, um sicherzustellen, dass wir die Anzahl von Transaktionen für unsere Geschäftsanforderungen verarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="4decb-102">This is important to ensure we can handle the volume of transactions for our business needs.</span></span> <span data-ttu-id="4decb-103">Anforderungen an den Durchsatz sind nicht immer konsistent.</span><span class="sxs-lookup"><span data-stu-id="4decb-103">Throughput requirements aren't always consistent.</span></span> <span data-ttu-id="4decb-104">Beispielsweise können Sie eine Einkaufswebsite erstellen, die während der Verkäufe oder Ferien skaliert werden muss.</span><span class="sxs-lookup"><span data-stu-id="4decb-104">For example, you may be building a shopping website that needs to scale during sales or holidays.</span></span> <span data-ttu-id="4decb-105">Zu Beginn schätzen wir die Anforderungen an den Datenbankdurchsatz.</span><span class="sxs-lookup"><span data-stu-id="4decb-105">We'll start estimating your database throughput requirements.</span></span>

## <a name="what-is-database-throughput"></a><span data-ttu-id="4decb-106">Was ist der Datenbankdurchsatz?</span><span class="sxs-lookup"><span data-stu-id="4decb-106">What is database throughput?</span></span> 

<span data-ttu-id="4decb-107">Der Datenbankdurchsatz ist die Anzahl der Lese- und Schreibvorgänge, die Ihre Datenbank in einer einzigen Sekunde durchführen kann.</span><span class="sxs-lookup"><span data-stu-id="4decb-107">Database throughput is the number of reads and writes that your database can perform in a single second.</span></span> 

<span data-ttu-id="4decb-108">Um den Durchsatz strategisch zu skalieren, müssen Sie die Durchsatzanforderungen in Form der Lese- und Schreibvorgänge schätzen, die Sie zu unterschiedlichen Zeiten und für unterschiedliche Dokumentgrößen unterstützen müssen.</span><span class="sxs-lookup"><span data-stu-id="4decb-108">To scale throughput strategically, you need to estimate your throughput needs by estimating the number of reads and writes you'll have to support at different times and for different document sizes.</span></span> <span data-ttu-id="4decb-109">Wenn Sie richtig schätzen, halten Sie Ihre Benutzer bei Bedarfsspitzen bei Laune.</span><span class="sxs-lookup"><span data-stu-id="4decb-109">If you estimate correctly, you'll keep your users happy when demand spikes.</span></span> <span data-ttu-id="4decb-110">Wenn Sie falsch schätzen, können Ratenbegrenzungen auf Ihre Anforderungen angewandt werden, sodass Vorgänge von Wartezeiten und Wiederholungsversuchen betroffen sind, was zu hoher Latenz führt und zu Lasten der Kundenzufriedenheit geht.</span><span class="sxs-lookup"><span data-stu-id="4decb-110">If you estimate incorrectly, your requests can get rate-limited and operations will have to wait and retry, likely causing high latency and unhappy customers.</span></span>

## <a name="what-is-a-request-unit"></a><span data-ttu-id="4decb-111">Was ist eine Anforderungseinheit?</span><span class="sxs-lookup"><span data-stu-id="4decb-111">What is a request unit?</span></span>

<span data-ttu-id="4decb-112">Azure Cosmos DB misst den Durchsatz in **Anforderungseinheiten (Request Unit, RU)**.</span><span class="sxs-lookup"><span data-stu-id="4decb-112">Azure Cosmos DB measures throughput using something called a **request unit (RU)**.</span></span> <span data-ttu-id="4decb-113">Die Nutzung von Anforderungseinheiten pro Sekunde wird gemessen, also ist die Maßeinheit **Anforderungseinheiten pro Sekunde (RU/s)**.</span><span class="sxs-lookup"><span data-stu-id="4decb-113">Request unit usage is measured per second, so the unit of measure is **request units per second (RU/s)**.</span></span> <span data-ttu-id="4decb-114">Sie müssen die RU/s reservieren, die Azure Cosmos DB im Voraus für Sie bereitstellen soll, damit die von Ihnen geschätzte Last verarbeitet werden kann, und Sie können Ihre RU/s jederzeit nach oben oder unten skalieren, um die aktuellen Anforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="4decb-114">You must reserve the number of RU/s you want Azure Cosmos DB to provision in advance, so it can handle the load you've estimated, and you can scale your RU/s up or down at any time to meet current demand.</span></span>

## <a name="request-unit-basics"></a><span data-ttu-id="4decb-115">Grundlegendes zu Anforderungseinheiten</span><span class="sxs-lookup"><span data-stu-id="4decb-115">Request unit basics</span></span>

<span data-ttu-id="4decb-116">Eine einzelne Anforderungseinheit, 1 RU, entspricht den ungefähren Kosten der Ausführung einer einzelnen GET-Anforderung in einem 1-KB-Dokument mithilfe einer Dokument-ID.</span><span class="sxs-lookup"><span data-stu-id="4decb-116">A single request unit, 1 RU, is equal to the approximate cost of performing a single GET request on a 1-KB document using a document's ID.</span></span> <span data-ttu-id="4decb-117">Das Ausführen einer GET mithilfe einer Dokument-ID ist eine effiziente Möglichkeit zum Abrufen eines Dokuments, und somit sind die Kosten niedrig.</span><span class="sxs-lookup"><span data-stu-id="4decb-117">Performing a GET by using a document's ID is an efficient means for retrieving a document, and thus the cost is small.</span></span> <span data-ttu-id="4decb-118">Erstellen, Ersetzen oder Löschen des gleichen Elements erfordern eine zusätzliche Verarbeitung durch den Dienst und daher mehr Anforderungseinheiten.</span><span class="sxs-lookup"><span data-stu-id="4decb-118">Creating, replacing, or deleting the same item requires additional processing by the service, and therefore requires more request units.</span></span>

<span data-ttu-id="4decb-119">Die Anzahl der für einen Vorgang verwendeten Anforderungseinheiten ist abhängig von der Dokumentgröße, der Anzahl der Eigenschaften im Dokument, dem ausgeführten Vorgang und einiger zusätzlicher komplexer Konzepte wie Konsistenz und Indizierungsrichtlinie.</span><span class="sxs-lookup"><span data-stu-id="4decb-119">The number of request units used for an operation changes depending on the document size, the number of properties in the document, the operation being performed, and some additional complex concepts such as consistency and indexing policy.</span></span>

<span data-ttu-id="4decb-120">In der Tabelle unten ist die Anzahl der Anforderungseinheiten für Elemente drei unterschiedlicher Größen (1 KB, 4 KB und 64 KB) und bei zwei unterschiedlichen Leistungsebenen (500 Lesevorgänge/Sekunde + 100 Schreibvorgänge/Sekunde und 500 Lesevorgänge/Sekunde + 500 Schreibvorgänge/Sekunde) angegeben.</span><span class="sxs-lookup"><span data-stu-id="4decb-120">The following table shows the number of request units required for items of three different sizes (1 KB, 4 KB, and 64 KB) and at two different performance levels (500 reads/second + 100 writes/second and 500 reads/second + 500 writes/second).</span></span> <span data-ttu-id="4decb-121">In diesem Beispiel wurde die Datenkonsistenz auf **Sitzung** und die Indizierungsrichtlinie auf **Keine** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="4decb-121">In this example, the data consistency is set to **Session**, and the indexing policy is set to **None**.</span></span>

| <span data-ttu-id="4decb-122">Elementgröße</span><span class="sxs-lookup"><span data-stu-id="4decb-122">Item size</span></span> | <span data-ttu-id="4decb-123">Lesevorgänge/Sekunde</span><span class="sxs-lookup"><span data-stu-id="4decb-123">Reads/second</span></span> | <span data-ttu-id="4decb-124">Schreibvorgänge/Sekunde</span><span class="sxs-lookup"><span data-stu-id="4decb-124">Writes/second</span></span> | <span data-ttu-id="4decb-125">Anforderungseinheiten</span><span class="sxs-lookup"><span data-stu-id="4decb-125">Request units</span></span>
| --- | --- | --- | --- |
| <span data-ttu-id="4decb-126">1 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-126">1 KB</span></span> | <span data-ttu-id="4decb-127">500</span><span class="sxs-lookup"><span data-stu-id="4decb-127">500</span></span> | <span data-ttu-id="4decb-128">100</span><span class="sxs-lookup"><span data-stu-id="4decb-128">100</span></span> | <span data-ttu-id="4decb-129">(500 * 1) + (100 * 5) = 1.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-129">(500 * 1) + (100 * 5) = 1,000 RU/s</span></span>
| <span data-ttu-id="4decb-130">1 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-130">1 KB</span></span> | <span data-ttu-id="4decb-131">500</span><span class="sxs-lookup"><span data-stu-id="4decb-131">500</span></span> | <span data-ttu-id="4decb-132">500</span><span class="sxs-lookup"><span data-stu-id="4decb-132">500</span></span> | <span data-ttu-id="4decb-133">(500 * 1) + (500 * 5) = 3.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-133">(500 * 1) + (500 * 5) = 3,000 RU/s</span></span>
| <span data-ttu-id="4decb-134">4 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-134">4 KB</span></span> | <span data-ttu-id="4decb-135">500</span><span class="sxs-lookup"><span data-stu-id="4decb-135">500</span></span> | <span data-ttu-id="4decb-136">100</span><span class="sxs-lookup"><span data-stu-id="4decb-136">100</span></span> | <span data-ttu-id="4decb-137">(500 * 1,3) + (100 * 7) = 1.350 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-137">(500 * 1.3) + (100 * 7) = 1,350 RU/s</span></span>
| <span data-ttu-id="4decb-138">4 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-138">4 KB</span></span> | <span data-ttu-id="4decb-139">500</span><span class="sxs-lookup"><span data-stu-id="4decb-139">500</span></span> | <span data-ttu-id="4decb-140">500</span><span class="sxs-lookup"><span data-stu-id="4decb-140">500</span></span> | <span data-ttu-id="4decb-141">(500 * 1,3) + (500 * 7) = 4.150 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-141">(500 * 1.3) + (500 * 7) = 4,150 RU/s</span></span>
| <span data-ttu-id="4decb-142">64 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-142">64 KB</span></span> | <span data-ttu-id="4decb-143">500</span><span class="sxs-lookup"><span data-stu-id="4decb-143">500</span></span> | <span data-ttu-id="4decb-144">100</span><span class="sxs-lookup"><span data-stu-id="4decb-144">100</span></span> | <span data-ttu-id="4decb-145">(500 * 10) + (100 * 48) = 9.800 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-145">(500 * 10) + (100 * 48) = 9,800 RU/s</span></span>
| <span data-ttu-id="4decb-146">64 KB</span><span class="sxs-lookup"><span data-stu-id="4decb-146">64 KB</span></span> | <span data-ttu-id="4decb-147">500</span><span class="sxs-lookup"><span data-stu-id="4decb-147">500</span></span> | <span data-ttu-id="4decb-148">500</span><span class="sxs-lookup"><span data-stu-id="4decb-148">500</span></span> | <span data-ttu-id="4decb-149">(500 * 10) + (500 * 48) = 29.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="4decb-149">(500 * 10) + (500 * 48) = 29,000 RU/s</span></span>
 
<span data-ttu-id="4decb-150">Wie Sie sehen: Je größer das Element ist, und je mehr Lese- und Schreibvorgänge erforderlich sind, desto mehr Anforderungseinheiten müssen Sie reservieren.</span><span class="sxs-lookup"><span data-stu-id="4decb-150">As you can see, the larger the item is, and the more reads and writes are required, the more request units you need to reserve.</span></span> <span data-ttu-id="4decb-151">Wenn Sie die Durchsatzanforderungen einer Anwendung schätzen müssen, nutzen Sie den [Capacity Planner](https://www.documentdb.com/capacityplanner) von Azure Cosmos DB, ein Onlinetool, das Ihnen ermöglicht, ein JSON-Beispieldokument hochzuladen und die Anzahl der Vorgänge festzulegen, die Sie pro Sekunde ausführen müssen.</span><span class="sxs-lookup"><span data-stu-id="4decb-151">If you need to estimate the throughput needs of an application, the Azure Cosmos DB [Capacity Planner](https://www.documentdb.com/capacityplanner) is an online tool that enables you to upload a sample JSON document and set the number of operations you need to complete per second.</span></span> <span data-ttu-id="4decb-152">Dann wird Ihnen eine geschätzte zu reservierende Gesamtsumme mitgeteilt.</span><span class="sxs-lookup"><span data-stu-id="4decb-152">It then provides an estimated total to reserve.</span></span>

## <a name="exceeding-throughput-limits"></a><span data-ttu-id="4decb-153">Überschreiten von Durchsatzlimits</span><span class="sxs-lookup"><span data-stu-id="4decb-153">Exceeding throughput limits</span></span>

<span data-ttu-id="4decb-154">Wenn Sie nicht genügend Anforderungseinheiten reservieren und versuchen, mehr Daten zu lesen oder zu schreiben, als der bereitgestellte Durchsatz ermöglicht, wird eine Ratenbegrenzung auf Ihre Anforderung angewandt.</span><span class="sxs-lookup"><span data-stu-id="4decb-154">If you don’t reserve enough request units, and you attempt to read or write more data than your provisioned throughput allows, your request will be rate-limited.</span></span> <span data-ttu-id="4decb-155">Wenn eine Ratenbegrenzung auf eine Anforderung angewandt wird, muss die Anforderung nach einem angegebenen Intervall wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="4decb-155">When a request is rate-limited, the request has to be retried again after a specified interval.</span></span> <span data-ttu-id="4decb-156">Wenn Sie das .NET SDK verwenden, wird die Anforderung automatisch nach Verstreichen der im Retry-After-Header angegebenen Zeitspanne wiederholt.</span><span class="sxs-lookup"><span data-stu-id="4decb-156">If you use the .NET SDK, the request will be retried automatically after waiting the amount of time specified in the retry-after header.</span></span>

## <a name="creating-an-account-built-to-scale"></a><span data-ttu-id="4decb-157">Erstellen eines skalierbaren Kontos</span><span class="sxs-lookup"><span data-stu-id="4decb-157">Creating an account built to scale</span></span>

<span data-ttu-id="4decb-158">Sie können die Anzahl der für eine Datenbank bereitgestellten Anforderungseinheiten jederzeit ändern.</span><span class="sxs-lookup"><span data-stu-id="4decb-158">You can change the number of request units provisioned to a database at any time.</span></span> <span data-ttu-id="4decb-159">In Zeiten mit hohem Volumen können Sie also zentral hochskalieren, um diese hohen Anforderungen zu berücksichtigen, und außerhalb der Spitzenzeiten den bereitgestellten Durchsatz verringern, um Kosten zu senken.</span><span class="sxs-lookup"><span data-stu-id="4decb-159">So, during heavy volume periods, you can scale up to accommodate those high demands, and then reduce provisioned throughput during off peak times to reduce costs.</span></span>

<span data-ttu-id="4decb-160">Wenn Sie ein Konto erstellen, können Sie ein Minimum von 400 RU/s oder ein Maximum von 250.000 400 RU/s im Portal bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="4decb-160">When you create an account, you can provision a minimum of 400 RU/s, or a maximum of 250,000 RU/s in the portal.</span></span> <span data-ttu-id="4decb-161">Wenn Sie noch mehr Durchsatz benötigen, füllen Sie ein Ticket im Azure-Portal aus.</span><span class="sxs-lookup"><span data-stu-id="4decb-161">If you need even more throughput, fill out a ticket in the Azure portal.</span></span> <span data-ttu-id="4decb-162">Für fast alle Konten sollte ein anfänglicher Durchsatz von 1.000 RU/s festgelegt werden, da dies der kleinste Wert ist, bei dem Ihre Datenbank automatisch skaliert, wenn Sie mehr als 10 GB Speicher benötigen sollten.</span><span class="sxs-lookup"><span data-stu-id="4decb-162">Setting the initial throughput to 1000 RU/s is recommended for almost all accounts, as it is the minimum value in which your database will autoscale should you need more than 10 GB of storage.</span></span> <span data-ttu-id="4decb-163">Wenn Sie den anfänglichen Durchsatz auf einen beliebigen Wert unter 1.000 RU/s festlegen, kann Ihre Datenbank nicht auf mehr als 10 GB skalieren, es sei denn, Sie stellen die Datenbank erneut bereit und geben einen Partitionsschlüssel aus.</span><span class="sxs-lookup"><span data-stu-id="4decb-163">If you set the initial throughput to any value less than 1000 RU/s, your database will not be able to scale to larger than 10 GB unless you reprovision the database and provide a partition key.</span></span> <span data-ttu-id="4decb-164">Partitionsschlüssel ermöglichen die schnelle Suche nach Daten in Azure Cosmos DB und ermöglichen Azure Cosmos DB, Ihre Datenbank bei Bedarf automatisch zu skalieren.</span><span class="sxs-lookup"><span data-stu-id="4decb-164">Partition keys enable quick lookup of data in Azure Cosmos DB and enable it to autoscale your database when needed.</span></span> <span data-ttu-id="4decb-165">Partitionsschlüssel werden in der nächsten Einheit behandelt.</span><span class="sxs-lookup"><span data-stu-id="4decb-165">Partition keys are discussed in the next unit.</span></span>

## <a name="summary"></a><span data-ttu-id="4decb-166">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="4decb-166">Summary</span></span>

<span data-ttu-id="4decb-167">Sie wissen nun, wie Sie den Durchsatz für Azure Cosmos DB mithilfe von Anforderungseinheiten einschätzen und festlegen.</span><span class="sxs-lookup"><span data-stu-id="4decb-167">You now understand how to estimate and scope throughput for an Azure Cosmos DB using request units.</span></span> <span data-ttu-id="4decb-168">Anforderungseinheiten können jederzeit geändert werden, und die Einstellung auf 1.000 RU/s bei der Erstellung eines Kontos stellt sicher, dass Ihre Datenbank später skaliert werden kann.</span><span class="sxs-lookup"><span data-stu-id="4decb-168">Request units can be modified at any time, and setting them to 1000 RU/s when you create an account helps ensure your database is ready to scale later.</span></span>