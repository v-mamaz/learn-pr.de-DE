## <a name="motivation"></a><span data-ttu-id="5b2d1-101">Motivation</span><span class="sxs-lookup"><span data-stu-id="5b2d1-101">Motivation</span></span>

<span data-ttu-id="5b2d1-102">Als Nächstes betrachten wir die Daten in der gesamten für unsere Datenbank.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-102">Next we'll consider the data throughout for our data base.</span></span> <span data-ttu-id="5b2d1-103">Dies ist wichtig, um sicherzustellen, dass wir die Anzahl von Transaktionen für unsere Anforderungen verarbeiten kann.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-103">This is important to ensure we can handle the volume of transactions for our business needs.</span></span> <span data-ttu-id="5b2d1-104">Durchsatzanforderungen sind nicht immer konsistenten, z. B. möglicherweise werden Erstellung einer Shoppping-Website, die während der Umsätze oder Feiertage skaliert.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-104">Throughput requirements aren't always consistant, for example, you may be building a shoppping website that needs to scale during sales or holidays.</span></span> <span data-ttu-id="5b2d1-105">Beginnen wir schätzen der durchsatzanforderungen Ihrer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-105">We'll start estimating your database throughput requirements.</span></span>

## <a name="what-is-database-throughput"></a><span data-ttu-id="5b2d1-106">Was ist datenbankdurchsatzes?</span><span class="sxs-lookup"><span data-stu-id="5b2d1-106">What is database throughput?</span></span> 

<span data-ttu-id="5b2d1-107">Datenbankdurchsatz ist die Anzahl der Lesevorgänge, und schreibt, dass Ihre Datenbank in einer einzigen Sekunde ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-107">Database throughput is the number of reads and writes your database can perform in a single second.</span></span> 

<span data-ttu-id="5b2d1-108">Um die Skalierung des Durchsatzes strategisch, müssen Sie schätzen Sie der Durchsatz benötigt, indem die Schätzung der Anzahl der Lesevorgänge, und schreibt, müssen Sie die zu unterschiedlichen Zeiten und für die unterschiedlichen Dokumentgrößen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-108">In order to scale throughput strategically, you need to estimate your throughput needs by estimating the number of reads and writes you'll have to support at different times and for different document sizes.</span></span> <span data-ttu-id="5b2d1-109">Wenn Sie richtig zu schätzen, halten Sie Ihre Benutzer viel Spaß beim bei Bedarf Spitzen.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-109">If you estimate correctly, you'll keep your users happy when demand spikes.</span></span> <span data-ttu-id="5b2d1-110">Wenn Sie nicht ordnungsgemäß zu schätzen, können Ihre Anforderungen Rate begrenzt, und Vorgänge müssen Sie warten, und wiederholen, wahrscheinlich verursachen hohe Latenz und nicht zufrieden Kunden.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-110">If you estimate incorrectly, your requests can get rate limited and operations will have to wait and retry, likely causing high latency and unhappy customers.</span></span>

## <a name="what-is-a-request-unit"></a><span data-ttu-id="5b2d1-111">Was ist eine Anforderungseinheit?</span><span class="sxs-lookup"><span data-stu-id="5b2d1-111">What is a request unit?</span></span>

<span data-ttu-id="5b2d1-112">Azure Cosmos DB misst den Durchsatz, die mit dem Namen einer **Anforderungseinheiten**.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-112">Azure Cosmos DB measures throughput using something called a **Request Unit**.</span></span> <span data-ttu-id="5b2d1-113">Fordern Sie die Auslastung wird pro Sekunde gemessen, also die Maßeinheit **Anforderungseinheiten pro Sekunde (RU/s)**.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-113">Request unit usage is measured per second, so the unit of measure is **Request Units per second (RU/s)**.</span></span> <span data-ttu-id="5b2d1-114">Reservieren Sie die Anzahl von Anforderungseinheiten pro Sekunde, die Sie Azure Cosmos DB im Voraus bereitstellen möchten, daher wird die Last zu verarbeiten, die Sie geschätzte haben, und Sie können Ihre RU/Sek. zentral, hoch- oder Herunterskalieren jederzeit an aktuelle Anforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-114">You must reserve the number of RU/s you want Azure Cosmos DB to provision in advance, so it's able to handle the load you've estimated, and you can scale your RU/s up or down any time to meet current demand.</span></span>

## <a name="request-unit-basics"></a><span data-ttu-id="5b2d1-115">Grundlagen der Einheit anfordern</span><span class="sxs-lookup"><span data-stu-id="5b2d1-115">Request unit basics</span></span>

<span data-ttu-id="5b2d1-116">Eine einzelne Anforderungseinheit 1 RU, entspricht der ungefähren Kosten der Ausführung einer einzelnen GET-Anforderung in einem 1-KB-Dokument mithilfe eines Dokuments-ID.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-116">A single request unit, 1 RU, is equal to the approximate cost of performing a single GET request on a 1-KB document, using a document's ID.</span></span> <span data-ttu-id="5b2d1-117">Durch das Ausführen eines GET mithilfe eines Dokument ID ist eine effiziente Möglichkeit zum Abrufen eines Dokuments, und somit die Kosten ist klein.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-117">Performing a GET by using a document's ID is an efficient means for retrieving a document, and thus the cost is small.</span></span> <span data-ttu-id="5b2d1-118">Erstellen, ersetzen oder löschen das gleiche Element erfordert eine zusätzliche Verarbeitung durch den Dienst, und benötigt daher mehr anforderungseinheiten.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-118">Creating, replacing, or deleting the same item requires additional processing by the service, and therefore requires more request units.</span></span>

<span data-ttu-id="5b2d1-119">Die Anzahl der anforderungseinheiten für einen Vorgang ändert sich je nach die Dokumentgröße, die Anzahl der Eigenschaften in das Dokument, der Vorgang ausgeführt wird und einige zusätzliche komplexe Konzepte wie Konsistenz und die indizierungsrichtlinie verwendet.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-119">The number of request units used for an operation changes depending on the document size, the number of properties in the document, the operation being performed, and some additional complex concepts such as consistency and indexing policy.</span></span>

<span data-ttu-id="5b2d1-120">Die folgende Tabelle zeigt die Anzahl von anforderungseinheiten, die erforderlich sind, für die Elemente der drei unterschiedlichen Größen (1 KB, 4 KB und 64 KB) und bei zwei unterschiedlichen Leistungsebenen (500 Lesevorgänge/Sekunde + 100 Schreibvorgänge/Sekunde und 500 Lesevorgänge/Sekunde + 500 Schreibvorgänge/Sekunde).</span><span class="sxs-lookup"><span data-stu-id="5b2d1-120">The following table shows the number of request units required for items of three different sizes (1 KB, 4 KB, and 64 KB) and at two different performance levels (500 reads/second + 100 writes/second and 500 reads/second + 500 writes/second).</span></span> <span data-ttu-id="5b2d1-121">In diesem Beispiel wurde die Datenkonsistenz auf **Sitzung** und die Indizierungsrichtlinie auf **Keine** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-121">In this example, the data consistency is set to **Session**, and the indexing policy is set to **None**.</span></span>

| <span data-ttu-id="5b2d1-122">Elementgröße</span><span class="sxs-lookup"><span data-stu-id="5b2d1-122">Item size</span></span> | <span data-ttu-id="5b2d1-123">Lesevorgänge/Sekunde</span><span class="sxs-lookup"><span data-stu-id="5b2d1-123">Reads/second</span></span> | <span data-ttu-id="5b2d1-124">Schreibvorgänge/Sekunde</span><span class="sxs-lookup"><span data-stu-id="5b2d1-124">Writes/second</span></span> | <span data-ttu-id="5b2d1-125">Anforderungseinheiten</span><span class="sxs-lookup"><span data-stu-id="5b2d1-125">Request units</span></span>
| --- | --- | --- | --- |
| <span data-ttu-id="5b2d1-126">1 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-126">1 KB</span></span> | <span data-ttu-id="5b2d1-127">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-127">500</span></span> | <span data-ttu-id="5b2d1-128">100</span><span class="sxs-lookup"><span data-stu-id="5b2d1-128">100</span></span> | <span data-ttu-id="5b2d1-129">(500 * 1) + (100 * 5) = 1.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-129">(500 * 1) + (100 * 5) = 1,000 RU/s</span></span>
| <span data-ttu-id="5b2d1-130">1 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-130">1 KB</span></span> | <span data-ttu-id="5b2d1-131">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-131">500</span></span> | <span data-ttu-id="5b2d1-132">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-132">500</span></span> | <span data-ttu-id="5b2d1-133">(500 * 1) + (500 * 5) = 3.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-133">(500 * 1) + (500 * 5) = 3,000 RU/s</span></span>
| <span data-ttu-id="5b2d1-134">4 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-134">4 KB</span></span> | <span data-ttu-id="5b2d1-135">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-135">500</span></span> | <span data-ttu-id="5b2d1-136">100</span><span class="sxs-lookup"><span data-stu-id="5b2d1-136">100</span></span> | <span data-ttu-id="5b2d1-137">(500 * 1,3) + (100 * 7) = 1.350 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-137">(500 * 1.3) + (100 * 7) = 1,350 RU/s</span></span>
| <span data-ttu-id="5b2d1-138">4 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-138">4 KB</span></span> | <span data-ttu-id="5b2d1-139">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-139">500</span></span> | <span data-ttu-id="5b2d1-140">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-140">500</span></span> | <span data-ttu-id="5b2d1-141">(500 * 1,3) + (500 * 7) = 4.150 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-141">(500 * 1.3) + (500 * 7) = 4,150 RU/s</span></span>
| <span data-ttu-id="5b2d1-142">64 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-142">64 KB</span></span> | <span data-ttu-id="5b2d1-143">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-143">500</span></span> | <span data-ttu-id="5b2d1-144">100</span><span class="sxs-lookup"><span data-stu-id="5b2d1-144">100</span></span> | <span data-ttu-id="5b2d1-145">(500 * 10) + (100 * 48) = 9.800 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-145">(500 * 10) + (100 * 48) = 9,800 RU/s</span></span>
| <span data-ttu-id="5b2d1-146">64 KB</span><span class="sxs-lookup"><span data-stu-id="5b2d1-146">64 KB</span></span> | <span data-ttu-id="5b2d1-147">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-147">500</span></span> | <span data-ttu-id="5b2d1-148">500</span><span class="sxs-lookup"><span data-stu-id="5b2d1-148">500</span></span> | <span data-ttu-id="5b2d1-149">(500 * 10) + (500 * 48) = 29.000 RU/s</span><span class="sxs-lookup"><span data-stu-id="5b2d1-149">(500 * 10) + (500 * 48) = 29,000 RU/s</span></span>
 
<span data-ttu-id="5b2d1-150">Wie Sie sehen können, desto größer wird das Element, und die weitere Lese- und Schreibvorgänge erforderlich sind, desto mehr Einheiten, die Sie reservieren möchten anfordern.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-150">As you can see, the larger the item is, and the more reads and writes are required, the more request units you need to reserve.</span></span> <span data-ttu-id="5b2d1-151">Wenn Sie zum Schätzen der durchsatzanforderungen einer Anwendung, die Azure Cosmos DB müssen [Capacity Planner](https://www.documentdb.com/capacityplanner) ist ein online-Tool, mit dem Sie ein JSON-Beispieldokument hochladen, legen Sie die Anzahl von Vorgängen pro Sekunde abgeschlossen werden sollen, und Klicken Sie dann bietet eine geschätzte Gesamtsumme, zu reservieren.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-151">If you need to estimate the throughput needs of an application, the Azure Cosmos DB [Capacity Planner](https://www.documentdb.com/capacityplanner) is an online tool that enables you to upload a sample JSON document, set the number of operations you need to complete per second, and then provides an estimated total to reserve.</span></span>

## <a name="exceeding-throughput-limits"></a><span data-ttu-id="5b2d1-152">Größer als durchsatzlimits</span><span class="sxs-lookup"><span data-stu-id="5b2d1-152">Exceeding throughput limits</span></span>

<span data-ttu-id="5b2d1-153">Wenn Sie nicht genügend anforderungseinheiten reservieren und Sie versuchen, zu lesen oder Schreiben von mehr Daten als der bereitgestellte Durchsatz ermöglicht, wird Ihre Anforderung begrenzt werden.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-153">If you don’t reserve enough request units, and you attempt to read or write more data than your provisioned throughput allows, your request will be rate-limited.</span></span> <span data-ttu-id="5b2d1-154">Wenn eine Anforderung begrenzt ist, muss die Anforderung erneut nach einem angegebenen Intervall wiederholt werden.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-154">When a request is rate-limited, the request has to be retried again after a specified interval.</span></span> <span data-ttu-id="5b2d1-155">Wenn Sie das .NET SDK verwenden, wird die Anforderung automatisch wiederholt werden, nach einer Wartezeit auf die Zeitspanne, die in der Retry-after-Header angegeben.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-155">If you use the .NET SDK, the request will be retried automatically after waiting the amount of time specified in the retry-after header.</span></span>

## <a name="creating-an-account-built-to-scale"></a><span data-ttu-id="5b2d1-156">Erstellen eines Kontos zur Skala erstellt</span><span class="sxs-lookup"><span data-stu-id="5b2d1-156">Creating an account built to scale</span></span>

<span data-ttu-id="5b2d1-157">Sie können die Anzahl der anforderungseinheiten für eine Datenbank bereitgestellt wird, jederzeit ändern.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-157">You can change the number of request units provisioned to a database at any time.</span></span> <span data-ttu-id="5b2d1-158">Daher können während des Zeitraums hoher Volume Sie zentral hochskalieren, berücksichtigen diese High-Anforderungen, und verringern Sie bereitgestellten Durchsatz während der nicht-Spitzenzeiten Kosten senken.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-158">So during heavy volume period, you can scale up to accommodate those high-demands, and then reduce provisioned throughput during off peak times to reduce costs.</span></span>

<span data-ttu-id="5b2d1-159">Wenn Sie ein Konto erstellen, können Sie ein Minimum von 400 RU/s "oder" maximal 250.000 Anforderungseinheiten pro Sekunde in das Portal bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-159">When you create an account, you can provision a minimum of 400 RU/s, or a maximum of 250,000 RU/s in the portal.</span></span> <span data-ttu-id="5b2d1-160">Wenn Sie noch mehr Durchsatz benötigen, füllen Sie Sie ein Ticket im Azure-Portal.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-160">If you need even more throughput, fill out a ticket in the Azure portal.</span></span> <span data-ttu-id="5b2d1-161">Festlegen des anfänglichen Durchsatzes auf 1000 RU/s empfiehlt sich für fast alle Konten, wie es der minimale Wert beträgt in dem Ihre Datenbank automatisch werden Sie mehr als 10 GB Speicher benötigen.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-161">Setting the initial throughput to 1000 RU/s is recommended for almost all accounts, as it is the minimum value in which your database will auto scale should you need more than 10 GB of storage.</span></span> <span data-ttu-id="5b2d1-162">Wenn Sie dem anfänglichen Durchsatz weniger als 1000 RU/s auf einen beliebigen Wert festlegen, wird Ihre Datenbank werden keine Skalierung auf mehr als 10 GB, es sei denn, Sie die Datenbank erneut, und geben Sie einen Partitionsschlüssel.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-162">If you set the initial throughput to any value less than 1000 RU/s, your database will not be able to scale to larger than 10 GB unless you reprovision the database and provide a partition key.</span></span> <span data-ttu-id="5b2d1-163">Partitionsschlüssel ermöglichen die schnelle Suche von Daten in Azure Cosmos DB, und aktivieren sie automatische Skalierung Ihrer Datenbank bei Bedarf.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-163">Partition keys enable quick look-up of data in Azure Cosmos DB and enable it to auto-scale your database when needed.</span></span> <span data-ttu-id="5b2d1-164">Partitionsschlüssel werden in die nächste Einheit behandelt.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-164">Partition keys are discussed in the next unit.</span></span>

## <a name="summary"></a><span data-ttu-id="5b2d1-165">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="5b2d1-165">Summary</span></span>

<span data-ttu-id="5b2d1-166">Sie kennen, wissen, wie zum schätzen und Bereich Durchsatz für Azure Cosmos DB mithilfe von Anforderungseinheiten.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-166">You know understand how to estimate and scope throughput for an Azure Cosmos DB using Request Units.</span></span> <span data-ttu-id="5b2d1-167">Anforderungseinheiten können jederzeit geändert werden und über die Einstellungen 1000 RU/Sek., wenn Sie ein Konto erstellen hilft stellen Sie sicher, dass Ihre Datenbank später skalieren kann.</span><span class="sxs-lookup"><span data-stu-id="5b2d1-167">Request units can be modified at any time, and by setting them to 1000 RU/s when you create an account helps ensure your database is ready to scale later.</span></span>