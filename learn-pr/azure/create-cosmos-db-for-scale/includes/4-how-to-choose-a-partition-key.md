<span data-ttu-id="1918c-101">Der Onlinehändler, für den Sie arbeiten, möchte demnächst expandieren.</span><span class="sxs-lookup"><span data-stu-id="1918c-101">The online retailer that you work for plans to expand to a new geographical area soon.</span></span> <span data-ttu-id="1918c-102">Diese Umstellung wird Ihre Kundenbasis und das Transaktionsvolumen vergrößern.</span><span class="sxs-lookup"><span data-stu-id="1918c-102">This move will increase your customer base and transaction volume.</span></span> <span data-ttu-id="1918c-103">Sie müssen sicherstellen, dass Ihre Datenbank für die Erweiterung nach Bedarf vorbereitet ist.</span><span class="sxs-lookup"><span data-stu-id="1918c-103">You must ensure that your database is equipped to handle expansion whenever required.</span></span>

<span data-ttu-id="1918c-104">Mit einer Partitionsstrategie stellen Sie sicher, dass Ihre Datenbank bei Bedarf mühelos wachsen und weiterhin effizient Abfragen und Transaktionen durchführen kann.</span><span class="sxs-lookup"><span data-stu-id="1918c-104">Having a partition strategy ensures that when your database needs to grow, it can do so easily and continue to perform efficient queries and transactions.</span></span>

## <a name="what-is-a-partition-strategy"></a><span data-ttu-id="1918c-105">Was ist eine Partitionsstrategie?</span><span class="sxs-lookup"><span data-stu-id="1918c-105">What is a partition strategy?</span></span>

<span data-ttu-id="1918c-106">Wenn Sie fortfahren, einem einzelnen Server oder einer einzelne Partition neue Daten hinzuzufügen, wird dort schließlich kein Speicherplatz mehr zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="1918c-106">If you continue to add new data to a single server or a single partition, it will eventually run out of space.</span></span> <span data-ttu-id="1918c-107">Zur Vorbereitung darauf benötigen Sie eine Partitionierungsstrategie, um statt zentral **horizontal hochzuskalieren**.</span><span class="sxs-lookup"><span data-stu-id="1918c-107">To prepare for this, you need a partitioning strategy to **scale out** instead of up.</span></span> <span data-ttu-id="1918c-108">Horizontales Hochskalieren ermöglicht Ihnen, Ihrer Datenbank weitere Partitionen hinzuzufügen, wenn Ihre Anwendung sie benötigt.</span><span class="sxs-lookup"><span data-stu-id="1918c-108">Scaling out is also called horizontal scaling, and it enables you to add more partitions to your database as your application needs them.</span></span>

<span data-ttu-id="1918c-109">Die Partition und die Strategie zum horizontalen Hochskalieren in Azure Cosmos DB werden vom Partitionsschlüssel gesteuert, einem Wert, den Sie beim Erstellen einer Sammlung festlegen.</span><span class="sxs-lookup"><span data-stu-id="1918c-109">The partition and scale-out strategy in Azure Cosmos DB is driven by the partition key, which is a value set when you create a collection.</span></span> <span data-ttu-id="1918c-110">Sobald der Partitionsschlüssel festgelegt ist, kann er nicht ohne Neuerstellen der Sammlung geändert werden; darum ist die Auswahl des richtigen Partitionsschlüssels eine wichtige Entscheidung, die Sie frühzeitig im Entwicklungsprozess treffen müssen.</span><span class="sxs-lookup"><span data-stu-id="1918c-110">Once the partition key is set, it cannot be changed without recreating the collection, so selecting the right partition key is an important decision to make early in your development process.</span></span>  

<span data-ttu-id="1918c-111">In dieser Einheit lernen Sie, wie Sie einen Partitionsschlüssel auswählen, der für Ihr Szenario geeignet ist, und nutzen den Vorteil der automatischen Skalierung, die Azure Cosmos DB für Sie erledigen kann.</span><span class="sxs-lookup"><span data-stu-id="1918c-111">In this unit, you will learn how to choose a partition key that's right for your scenario and will take advantage of the autoscaling that Azure Cosmos DB can do for you.</span></span>

## <a name="partition-key-basics"></a><span data-ttu-id="1918c-112">Grundlagen zum Partitionsschlüssel</span><span class="sxs-lookup"><span data-stu-id="1918c-112">Partition key basics</span></span>

<span data-ttu-id="1918c-113">Ein Partitionsschlüssel stellt einen Wert in der Datenbank dar, der häufig abgefragt wird.</span><span class="sxs-lookup"><span data-stu-id="1918c-113">A partition key represents a value in your database that's frequently queried.</span></span> <span data-ttu-id="1918c-114">In diesem Onlinehändlerszenario sind die Werte `UserID` und `ProductID` eine gute Wahl für den Partitionsschlüssel, da dieser eindeutig ist und wahrscheinlich zum Suchen von Datensätzen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="1918c-114">In our online retail scenario, using the `UserID` or `ProductID` value as the partition key is a good choice because it will be unique and likely used to lookup records.</span></span> <span data-ttu-id="1918c-115">`UserID` ist eine gute Wahl, da Ihre Anwendung beispielsweise häufig Personalisierungseinstellungen, den Einkaufswagen, den Bestellverlauf und Profilinformationen des Benutzers aufrufen muss.</span><span class="sxs-lookup"><span data-stu-id="1918c-115">`UserID` is a good choice, as your application frequently needs to retrieve the personalization settings, shopping cart, order history, and profile information for the user, just to name a few.</span></span> <span data-ttu-id="1918c-116">`ProductID` ist ebenfalls eine gute Wahl, da Ihre Anwendung Lagerbestände, Versandkosten, Farboptionen, Lagerhausstandorte usw. abfragen muss.</span><span class="sxs-lookup"><span data-stu-id="1918c-116">`ProductID` is also a good choice, as your application needs to query inventory levels, shipping costs, color options, warehouse locations, and more.</span></span>

<span data-ttu-id="1918c-117">Mit einem Partitionsschlüssel sollte versucht werden, Vorgänge in der Datenbank zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="1918c-117">A partition key should aim to distribute operations across the database.</span></span> <span data-ttu-id="1918c-118">Durch die Verteilung von Anforderungen können Sie „heiße“ Partitionen vermeiden.</span><span class="sxs-lookup"><span data-stu-id="1918c-118">You want to distribute requests to avoid hot partitions.</span></span> <span data-ttu-id="1918c-119">Eine „heiße“ Partition ist eine einzelne Partition, die viel mehr Anforderungen als die anderen empfängt, sodass ein Durchsatzengpass auftreten kann.</span><span class="sxs-lookup"><span data-stu-id="1918c-119">A hot partition is a single partition that receives many more requests than the others, which can create a throughput bottleneck.</span></span> <span data-ttu-id="1918c-120">Für Ihre E-Commerce-Anwendung wäre die aktuelle Uhrzeit z.B. als Partitionsschlüssel eine schlechte Wahl, da alle eingehenden Daten an einen einzelnen Partitionsschlüssel gesendet würden.</span><span class="sxs-lookup"><span data-stu-id="1918c-120">For example, for your e-commerce application, the current time would be a poor choice of partition key, because all the incoming data would go to a single partition key.</span></span> <span data-ttu-id="1918c-121">`UserID` oder `ProductID` wäre besser, da alle Benutzer auf Ihrer Website ihre Warenkorb- oder Profilinformationen in etwa mit der gleichen Häufigkeit hinzufügen und aktualisieren würden, wodurch die Lese- und Schreibvorgänge auf alle Benutzerpartitionen verteilt würden.</span><span class="sxs-lookup"><span data-stu-id="1918c-121">`UserID` or `ProductID` would be better, as all the users on your site would likely be adding and updating their shopping cart or profile information at about the same frequency, which distributes the reads and writes across all the user partitions.</span></span> <span data-ttu-id="1918c-122">Ebenso würden Updates von Produktdaten wahrscheinlich auch relativ gleichmäßig verteilt, sodass `ProductID` als Partitionsschlüssel eine gute Wahl ist.</span><span class="sxs-lookup"><span data-stu-id="1918c-122">Likewise, updates to product data would also likely be evenly distributed, making `ProductID` a good partition key choice.</span></span>

<span data-ttu-id="1918c-123">Jeder Partitionsschlüssel hat einen maximalen Speicherplatz von 10 GB, was der Größe einer physischen Partition in Azure Cosmos DB entspricht.</span><span class="sxs-lookup"><span data-stu-id="1918c-123">Each partition key has a maximum storage space of 10 GB, which is the size of one physical partition in Azure Cosmos DB.</span></span> <span data-ttu-id="1918c-124">Wenn also Ihr einzelner `UserID`- oder `ProductID`-Datensatz größer als 10 GB sein wird, erwägen Sie stattdessen die Verwendung eines zusammengesetzten Schlüssels, damit die Größe aller Datensätze verringert wird.</span><span class="sxs-lookup"><span data-stu-id="1918c-124">So, if your single `UserID` or `ProductID` record is going to be larger than 10 GB, think about using a composite key instead so that each record is smaller.</span></span> <span data-ttu-id="1918c-125">Ein Beispiel für einen zusammengesetzten Schlüssel wäre `UserID-date`, der **Kundenname-08072018** ähneln würde.</span><span class="sxs-lookup"><span data-stu-id="1918c-125">An example of a composite key would be `UserID-date`, which would look like **CustomerName-08072018**.</span></span> <span data-ttu-id="1918c-126">Mit diesem Ansatz des zusammengesetzten Schlüssels könnten Sie für jeden Tag, an dem ein Benutzer die Website besucht, eine neue Partition erstellen.</span><span class="sxs-lookup"><span data-stu-id="1918c-126">This composite key approach would enable you to create a new partition for each day a user visited the site.</span></span>

## <a name="best-practices"></a><span data-ttu-id="1918c-127">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="1918c-127">Best practices</span></span>

<span data-ttu-id="1918c-128">Wenn Sie versuchen, den richtigen Partitionsschlüssel zu bestimmen und die Lösung nicht offensichtlich ist, helfen Ihnen die folgenden Tipps.</span><span class="sxs-lookup"><span data-stu-id="1918c-128">When you're trying to determine the right partition key and the solution isn't obvious, here are a few tips to keep in mind.</span></span>

- <span data-ttu-id="1918c-129">Haben Sie keine Angst davor, zu viele Partitionsschlüssel zu besitzen.</span><span class="sxs-lookup"><span data-stu-id="1918c-129">Don’t be afraid of having too many partition keys.</span></span> <span data-ttu-id="1918c-130">Je mehr Partitionsschlüssel Sie haben, desto mehr Skalierungsmöglichkeiten haben Sie.</span><span class="sxs-lookup"><span data-stu-id="1918c-130">The more partition keys you have, the more scalability you have.</span></span>
- <span data-ttu-id="1918c-131">Um den besten Partitionsschlüssel für eine Arbeitsauslastung mit vielen Lesevorgängen zu bestimmen, überprüfen Sie die wichtigsten drei bis fünf Abfragen, die Sie zu verwenden planen.</span><span class="sxs-lookup"><span data-stu-id="1918c-131">To determine the best partition key for a read-heavy workload, review the top three to five queries you plan on using.</span></span> <span data-ttu-id="1918c-132">Der am häufigsten in der WHERE-Klausel enthaltene Wert ist ein guter Kandidat für den Partitionsschlüssel.</span><span class="sxs-lookup"><span data-stu-id="1918c-132">The value most frequently included in the WHERE clause is a good candidate for the partition key.</span></span>
- <span data-ttu-id="1918c-133">Für Workloads mit vielen Schreibvorgängen müssen Sie die Transaktionsanforderungen Ihrer Workload verstehen, da der Partitionsschlüssel der Bereich der Transaktionen mit mehreren Dokumenten ist.</span><span class="sxs-lookup"><span data-stu-id="1918c-133">For write-heavy workloads, you'll need to understand the transactional needs of your workload, because the partition key is the scope of multi-document transactions.</span></span>
