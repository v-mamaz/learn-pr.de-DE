## <a name="motivation"></a><span data-ttu-id="2abfd-101">Motivation</span><span class="sxs-lookup"><span data-stu-id="2abfd-101">Motivation</span></span>

<span data-ttu-id="2abfd-102">Der online-Händler, denen Sie sich für Pläne, in einen neuen geografischen Bereich und erweitern in der nahen Zukunft arbeiten.</span><span class="sxs-lookup"><span data-stu-id="2abfd-102">The online retailer that you work for plans to expand to a new geographical area in the near future.</span></span> <span data-ttu-id="2abfd-103">Diese Umstellung wird Ihr Kunde Basis- und Transaktion Volume erhöhen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-103">This move will increase your customer base and transaction volume.</span></span> <span data-ttu-id="2abfd-104">Sie müssen sicherstellen, dass Ihre Datenbank ausgestattet ist, um Erweiterung nach Bedarf zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="2abfd-104">You must ensure that your database is equipped to handle expansion whenever required.</span></span>

<span data-ttu-id="2abfd-105">Eine Partitionsstrategie für die stellt sicher, dass Ihre Datenbank vergrößert werden muss, kann zu diesem einfach Zweck und weiterhin effiziente Abfragen und Transaktionen durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-105">Having a partition strategy ensures that when your database needs to grow, it can do so easily and continue to perform efficient queries and transactions.</span></span>

## <a name="what-is-a-partition-strategy"></a><span data-ttu-id="2abfd-106">Was ist eine Partitionsstrategie?</span><span class="sxs-lookup"><span data-stu-id="2abfd-106">What is a partition strategy?</span></span>

<span data-ttu-id="2abfd-107">Wenn Sie einen einzelnen Server oder eine einzelne Partition neue Daten hinzufügen weiterhin, wird es schließlich kein Speicherplatz mehr ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="2abfd-107">If you continue to add new data to a single server, or a single partition, it will eventually run out of space.</span></span> <span data-ttu-id="2abfd-108">Um zur Vorbereitung eine Partitionierungsstrategie für benötigten **horizontal hochskalieren** anstelle von einrichten.</span><span class="sxs-lookup"><span data-stu-id="2abfd-108">To prepare for this, you need a partitioning strategy to **scale out** instead of up.</span></span> <span data-ttu-id="2abfd-109">Horizontales Skalieren wird auch die horizontale Skalierung bezeichnet, und es kann mehrere Partitionen mit Ihrer Datenbank, wenn Sie Ihre Anwendung benötigt hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-109">Scaling out is also called horizontal scaling, and it enables you to add more partitions to your database as your application needs them.</span></span>

<span data-ttu-id="2abfd-110">Die Partition und den Scale out-Strategie für die in Azure Cosmos DB wird gesteuert, anhand des partitionsschlüssels, der ist ein Wert festgelegt, wenn Sie eine Sammlung erstellen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-110">The partition and scale out strategy in Azure Cosmos DB is driven by the partition key, which is a value set when you create a collection.</span></span> <span data-ttu-id="2abfd-111">Sobald der Partitionsschlüssel festgelegt ist, kann es ohne die Auflistung neu zu erstellen, also Auswahl des richtigen partitionsschlüssels eine wichtige Entscheidung, stellen Sie frühzeitig im Entwicklungsprozess geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2abfd-111">Once the partition key is set, it cannot be changed without recreating the collection, so selecting the right partition key is an important decision to make early in your development process.</span></span>  

<span data-ttu-id="2abfd-112">In dieser Einheit stellen Sie erfahren, wie Sie einen Schlüssel für die Partition auswählen, der für Ihr Szenario geeignet ist, und nutzt die automatische Skalierung, die Azure Cosmos DB für Sie ausführen können.</span><span class="sxs-lookup"><span data-stu-id="2abfd-112">In this unit, you will learn how to choose a parition key that's right for your scenario, and will take advantage of the autoscaling that Azure Cosmos DB can do for you.</span></span>

## <a name="partition-key-basics"></a><span data-ttu-id="2abfd-113">Partition Key-Grundlagen</span><span class="sxs-lookup"><span data-stu-id="2abfd-113">Partition key basics</span></span>

<span data-ttu-id="2abfd-114">Ein Partitionsschlüssel darstellen, einen Wert in der Datenbank, die häufig abgefragt wird.</span><span class="sxs-lookup"><span data-stu-id="2abfd-114">A partition key represent a value in your database that's frequently queried.</span></span> <span data-ttu-id="2abfd-115">Daher ist in einem Szenario mit online-Einzelhandel, verwenden den Wert "UserID" oder "ProductID" als Partitionsschlüssel eine gute Wahl.</span><span class="sxs-lookup"><span data-stu-id="2abfd-115">So in an online retail scenario, using the UserID or ProductID value as the partition key is a good choice.</span></span> <span data-ttu-id="2abfd-116">Benutzer-ID ist eine gute Wahl, wie Ihre Anwendung muss häufig zum Abrufen der Einstellungen für ansichtspersonalisierung, Einkaufswagen, Bestellverlauf und Profilinformationen für den Benutzer aus, um nur einige zu nennen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-116">UserID is a good choice as your application frequently needs to retrieve the personalization settings, shopping cart, order history, and profile information for the user, just to name a few.</span></span> <span data-ttu-id="2abfd-117">ProductID ist auch eine gute Wahl, wie Ihre Anwendung benötigt werden, zum Abfragen der Lagerbestände, Versandkosten, Farboptionen, Warehouse Speicherorte und vieles mehr.</span><span class="sxs-lookup"><span data-stu-id="2abfd-117">ProductID is also a good choice as your application needs to query inventory levels, shipping costs, color options, warehouse locations and more.</span></span>

<span data-ttu-id="2abfd-118">Partitionsschlüssel sollten versuchen, um Vorgänge auf die Datenbank zu verteilen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-118">A partition key should aim to distribute operations across the database.</span></span> <span data-ttu-id="2abfd-119">Möchten Sie die Verteilung von Anforderungen in dem Bestreben, die hot-Partitionen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="2abfd-119">You want to distribute requests in an effort to avoid hot partitions.</span></span> <span data-ttu-id="2abfd-120">Eine hot Partition ist eine einzelne Partition, die viel mehr Anforderungen als die anderen empfängt und einen Durchsatz-Engpass erstellen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-120">A hot partition is a single partition that receives many more requests than the others and can create a throughput bottleneck.</span></span> <span data-ttu-id="2abfd-121">Für Ihre e-Commerce-Anwendung wäre die aktuelle Uhrzeit z. B. eine schlechte Wahl des partitionsschlüssels, da alle eingehenden Daten an einen einzelnen Partitionsschlüssel aufgenommen werden würden.</span><span class="sxs-lookup"><span data-stu-id="2abfd-121">For example, for your e-commerce application, the current time would be a poor choice of partition key because all the incoming data would go to a single partition key.</span></span> <span data-ttu-id="2abfd-122">"UserID" oder "ProductID" wäre besser als alle Benutzer auf Ihre Website würde wahrscheinlich hinzufügen und Aktualisieren von ihren Warenkorb oder Profilinformationen zu der gleichen Häufigkeit an, die verteilt die Lesevorgänge und Schreibvorgänge für alle Benutzerpartitionen auf.</span><span class="sxs-lookup"><span data-stu-id="2abfd-122">UserID or ProductID would be better as all the users on your site would likely be adding and updating their shopping cart or profile information at about the same frequency, which distributes the reads and writes across all the user partitions.</span></span> <span data-ttu-id="2abfd-123">Ebenso würde Updates auf Produktdaten wahrscheinlich auch relativ gleichmäßig verteilt, "ProductID" eine gute Partition-Key-Auswahl treffen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-123">Likewise, updates to product data would also likely be fairly evenly distributed, making ProductID a good partition key choice.</span></span>

<span data-ttu-id="2abfd-124">Jeder Partitionsschlüssel hat es sich um einen maximalen Speicherplatz von 10 GB, die die Größe einer physischen Partition in Azure Cosmos DB ist.</span><span class="sxs-lookup"><span data-stu-id="2abfd-124">Each partition key has a maximum storage space of 10 GB, which is the size of one physical partition in Azure Cosmos DB.</span></span> <span data-ttu-id="2abfd-125">Also, wenn Ihre einzelne Datensatz für "UserID" oder "ProductID" größer als 10 GB sein soll, überlegen Sie stattdessen die Verwendung eines zusammengesetzten Schlüssels, damit jeder Datensatz kleiner ist.</span><span class="sxs-lookup"><span data-stu-id="2abfd-125">So if your single UserID or ProductID record is going to be larger than 10 GB, think about using a composite key instead so that each record is smaller.</span></span> <span data-ttu-id="2abfd-126">Ein Beispiel für einen zusammengesetzten Schlüssel wäre "UserID"-Datum, die wie CustomerName-08072018 aussehen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-126">An example of a composite key would be UserID-date, which would look like CustomerName-08072018.</span></span> <span data-ttu-id="2abfd-127">Dieser Ansatz für zusammengesetzte Schlüssel können Sie eine neue Partition für jeden Tag erstellen Sie ein Benutzer die Site besucht haben.</span><span class="sxs-lookup"><span data-stu-id="2abfd-127">This composite key approach would enable you to create a new partition for each day a user visited the site.</span></span>

## <a name="best-practices"></a><span data-ttu-id="2abfd-128">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="2abfd-128">Best practices</span></span>

<span data-ttu-id="2abfd-129">Wenn Sie versuchen, den richtigen Partitionsschlüssel zu bestimmen und die Lösung nicht offensichtlich ist, sind hier einige Tipps zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-129">When you're trying to determine the right partition key and the solution isn't obvious, here are a few tips to keep in mind.</span></span>

* <span data-ttu-id="2abfd-130">Keine Angst dass zu viele partitionsschlüsseln, die weitere Partitionsschlüssel haben die höhere Skalierbarkeit, was man.</span><span class="sxs-lookup"><span data-stu-id="2abfd-130">Don’t be afraid of having too many partition keys, the more partition keys you have, the more scalability you have.</span></span>

* <span data-ttu-id="2abfd-131">Um den besten Partitionsschlüssel für eine arbeitsauslastung mit vielen Lesevorgängen zu bestimmen, überprüfen Sie die oberen drei bis fünf Abfragen, die Sie planen.</span><span class="sxs-lookup"><span data-stu-id="2abfd-131">To determine the best partition key for a read-heavy workload, review the top three to five queries you plan on using.</span></span> <span data-ttu-id="2abfd-132">Der Wert, der am häufigsten in der WHERE-Klausel enthalten ist ein guter Kandidat für den Partitionsschlüssel.</span><span class="sxs-lookup"><span data-stu-id="2abfd-132">The value most frequently included in the WHERE clause is a good candidate for the partition key.</span></span>

* <span data-ttu-id="2abfd-133">Für Workloads mit vielen Schreibvorgängen müssen Sie die transaktionalen Anforderungen Ihrer Workload verstehen, da es sich bei der Partitionsschlüssel des Bereichs der Transaktionen mit mehreren Dokumenten ist.</span><span class="sxs-lookup"><span data-stu-id="2abfd-133">For write-heavy workloads, you'll need to understand the transactional needs of your workload because the partition key is the scope of multi-document transactions.</span></span>
