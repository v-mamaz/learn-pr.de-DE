<span data-ttu-id="7b3b5-101">Azure Key Vault verwendet **Azure Active Directory** zum Authentifizieren von Benutzern und Anwendungen, die versuchen, auf einen Tresor zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-101">Azure Key Vault uses **Azure Active Directory** to authenticate users and applications that try to access a vault.</span></span> <span data-ttu-id="7b3b5-102">Um unserer Webanwendung Zugriff auf den Tresor zu gewähren, müssen wir unsere App zunächst bei Azure Active Directory registrieren.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-102">To grant our web application access to the vault, we first need to register our app with Azure Active Directory.</span></span> <span data-ttu-id="7b3b5-103">Bei der Registrierung wird eine Identität für die App erstellt.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-103">Registering creates an identity for the app.</span></span> <span data-ttu-id="7b3b5-104">Sobald eine Identität vorliegt, können ihr Tresorberechtigungen zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-104">Once the app has an identity, we can assign vault permissions to it.</span></span>

<span data-ttu-id="7b3b5-105">Anwendungen und Benutzer authentifizieren sich bei Key Vault mit einem Azure Active Directory-Authentifizierungstoken.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-105">Apps and users authenticate to Key Vault using an Azure Active Directory authentication token.</span></span> <span data-ttu-id="7b3b5-106">Um ein Token von Azure Active Directory zu beziehen, ist ein Geheimnis oder Zertifikat erforderlich, da jeder mit einem Token die Anwendungsidentität verwenden kann, um auf alle Geheimnisse im Tresor zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-106">Getting a token from Azure Active Directory requires a secret or certificate, because anyone with a token could use the application identity to access all of the secrets in the vault.</span></span>

<span data-ttu-id="7b3b5-107">Unsere Anwendungsgeheimnisse sind im Tresor sicher, aber wir benötigen trotzdem noch ein Geheimnis oder Zertifikat außerhalb des Tresors, um darauf zugreifen zu können!</span><span class="sxs-lookup"><span data-stu-id="7b3b5-107">Our application secrets are secure in the vault, but we still need to keep a secret or certificate outside of the vault in order to access them!</span></span> <span data-ttu-id="7b3b5-108">Dieses Problem wird *Bootstrapping* genannt, wofür Azure allerdings eine Lösung hat.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-108">This problem is called the *bootstrapping problem*, and Azure has a solution for it.</span></span>

## <a name="managed-service-identity"></a><span data-ttu-id="7b3b5-109">Verwaltete Dienstidentität</span><span class="sxs-lookup"><span data-stu-id="7b3b5-109">Managed Service Identity</span></span>

<span data-ttu-id="7b3b5-110">*Verwaltete Dienstidentität* (Managed Service Identity, MSI) ist ein Feature von Azure App Service, mit dem Ihre App auf Key Vault und andere Azure-Dienste zugreifen kann, ohne selbst ein Geheimnis außerhalb des Tresors verwalten zu müssen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-110">*Managed Service Identity* (MSI) is a feature of Azure App Service that your app can use to access Key Vault and other Azure services without having to manage even a single secret outside of the vault.</span></span> <span data-ttu-id="7b3b5-111">MSI ist eine einfache und sichere Möglichkeit zur Nutzung von Key Vault über Ihre Web-App.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-111">Using MSI is a simple and secure way to take advantage of Key Vault from your web app.</span></span>

<span data-ttu-id="7b3b5-112">Wenn Sie MSI aktivieren, aktiviert Azure speziell für Ihre Anwendung einen eigenständigen REST-Dienst, der Token vergibt.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-112">When you enable MSI, Azure activates a separate token-granting REST service specifically for use by your app.</span></span> <span data-ttu-id="7b3b5-113">Ihre App fordert Token nicht direkt von Azure Active Directory, sondern von diesem Dienst an.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-113">Your app will request tokens from this service instead of directly from Azure Active Directory.</span></span> <span data-ttu-id="7b3b5-114">Für den Zugriff auf den Dienst muss Ihre App ein Geheimnis verwenden. Dieses wird beim Start Ihrer App von App Service eingefügt und den Umgebungsvariablen zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-114">Your app needs to use a secret to access this service, but that secret is injected into your app's environment variables by App Service when it starts up.</span></span> <span data-ttu-id="7b3b5-115">Sie müssen diesen Geheimniswert nirgendwo verwalten oder speichern. Außerhalb Ihrer App sind das Geheimnis und der MSI-Tokendienst-Endpunkt nicht zugänglich.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-115">You don't need to manage or store this secret value anywhere, and nothing outside of your app can access this secret or the MSI token service endpoint.</span></span>

<span data-ttu-id="7b3b5-116">MSI registriert Ihre Anwendung auch für Sie in Azure Active Directory und löscht die Registrierung, sobald Sie MSI deaktivieren oder die Anwendung löschen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-116">MSI also registers your app in Azure Active Directory for you, and will delete the registration if you disable MSI or delete the app.</span></span>

<span data-ttu-id="7b3b5-117">MSI ist in allen Editionen von Azure Active Directory verfügbar, einschließlich der Free Edition, die in einem Azure-Abonnement enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-117">MSI is available in all editions of Azure Active Directory, including the Free edition included with an Azure subscription.</span></span> <span data-ttu-id="7b3b5-118">Seine Verwendung in App Service ist kostenlos, erfordert keine Konfiguration und kann jederzeit in einer App aktiviert oder deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-118">Using it in App Service has no extra cost and requires no configuration, and it can be enabled or disabled on an app at any time.</span></span>

> [!NOTE]
> <span data-ttu-id="7b3b5-119">MSI wird für Linux- oder Container-Web-Apps derzeit nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-119">MSI is not currently supported for Linux or Container web apps.</span></span>

<span data-ttu-id="7b3b5-120">Für die Aktivierung von MSI muss nur ein einziger Azure CLI-Befehl ohne Konfiguration ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-120">Enabling MSI requires only a single Azure CLI command with no configuration.</span></span> <span data-ttu-id="7b3b5-121">Diesen Schritt führen Sie später aus, wenn Sie eine App Service-App einrichten und in Azure bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-121">We'll do it later on when we set up an App Service app and deploy to Azure.</span></span> <span data-ttu-id="7b3b5-122">Vorher nutzen Sie jedoch Ihr Wissen über MSI, um den Code für Ihre App zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="7b3b5-122">Before that, though, we're going to apply our knowledge of MSI to write the code for our app.</span></span>