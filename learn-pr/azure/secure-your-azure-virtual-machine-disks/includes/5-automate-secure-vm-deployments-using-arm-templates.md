<span data-ttu-id="bae64-101">Angenommen, Ihr Unternehmen stellt im Rahmen ihrer Cloudmigration mehrere Server bereit.</span><span class="sxs-lookup"><span data-stu-id="bae64-101">Suppose your company is deploying several servers as part of their cloud transition.</span></span> <span data-ttu-id="bae64-102">VM-Datenträger müssen bei der Bereitstellung verschlüsselt werden, damit sie zu keinem Zeitpunkt angreifbar sind.</span><span class="sxs-lookup"><span data-stu-id="bae64-102">VM disks must be encrypted during the deployment, so there's no time when the disks are vulnerable.</span></span> <span data-ttu-id="bae64-103">Sie möchten diesen Prozess automatisieren und müssen die Azure Resource Manager-Vorlagen ändern, damit die Verschlüsselung automatisch aktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="bae64-103">You want to automate this process, and have to modify the Azure Resource Manager templates to automatically enable encryption.</span></span>

<span data-ttu-id="bae64-104">Im Folgenden verwenden Sie eine Azure Resource Manager-Vorlage, um die Verschlüsselung für neue virtuelle Windows-Computer automatisch zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="bae64-104">Here, we'll look at how to use an Azure Resource Manager template to automatically enable encryption for new Windows VMs.</span></span>

## <a name="what-are-azure-resource-manager-templates"></a><span data-ttu-id="bae64-105">Was sind Azure Resource Manager-Vorlagen?</span><span class="sxs-lookup"><span data-stu-id="bae64-105">What are Azure Resource Manager templates?</span></span>

<span data-ttu-id="bae64-106">Bei diesen Vorlagen handelt es sich um JSON-Dateien zum Definieren einer Ressource, die in Azure bereitgestellt werden soll (beispielsweise ein virtueller Computer).</span><span class="sxs-lookup"><span data-stu-id="bae64-106">These templates are JSON files used to define a resource to deploy to Azure, such as a virtual machine.</span></span> <span data-ttu-id="bae64-107">Sie können von Grund auf neu erstellt werden. Bei einigen Ressourcen (unter anderem bei virtuellen Computern) besteht allerdings auch die Möglichkeit, sie über das Azure-Portal zu generieren.</span><span class="sxs-lookup"><span data-stu-id="bae64-107">You can write them from scratch, and for some Azure resources, including VMs, you can use the Azure portal to generate them.</span></span> <span data-ttu-id="bae64-108">Sie geben die erforderlichen Informationen für die manuelle Bereitstellung eines virtuellen Computers an, stellen den virtuellen Computer aber nicht in Azure bereit, sondern speichern die Vorlage.</span><span class="sxs-lookup"><span data-stu-id="bae64-108">You'll need to complete the required information for a manual VM deployment, but instead of deploying the VM to Azure, you save the template.</span></span>

<span data-ttu-id="bae64-109">Beispielvorlagen finden Sie auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="bae64-109">There are example templates available in GitHub.</span></span>

## <a name="using-github-templates"></a><span data-ttu-id="bae64-110">Verwenden von GitHub-Vorlagen</span><span class="sxs-lookup"><span data-stu-id="bae64-110">Using GitHub templates</span></span>

<span data-ttu-id="bae64-111">Auf GitHub steht die Vorlage **Enable encryption on a running Windows VM ARM** (Aktivieren der Verschlüsselung für einen ausgeführten virtuellen Windows-Computer mithilfe von ARM) zum Aktivieren der Verschlüsselung zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="bae64-111">GitHub has a template for enabling encryption called the **Enable encryption on a running Windows VM ARM**.</span></span> <span data-ttu-id="bae64-112">Sie befindet sich im Repository [Azure Quickstart Templates](https://github.com/Azure/azure-quickstart-templates) (Azure-Schnellstartvorlagen).</span><span class="sxs-lookup"><span data-stu-id="bae64-112">You can find it in the [Azure Quickstart Templates](https://github.com/Azure/azure-quickstart-templates) repository.</span></span> <span data-ttu-id="bae64-113">Auf der Infoseite der Vorlage befindet sich die Schaltfläche **Deploy to Azure** (In Azure bereitstellen), mit der Sie die Vorlage im Azure-Portal öffnen können.</span><span class="sxs-lookup"><span data-stu-id="bae64-113">The readme page for the template provides a **Deploy to Azure** button that then opens the template in the Azure portal.</span></span>

<span data-ttu-id="bae64-114">Die Vorlage ermöglicht die Bereitstellung eines virtuellen Windows Server-Computers mit bereits aktivierter Verschlüsselung.</span><span class="sxs-lookup"><span data-stu-id="bae64-114">The template enables you to deploy a Windows Server VM, with encryption pre-enabled.</span></span> <span data-ttu-id="bae64-115">Vergewissern Sie sich vor der Verwendung der Vorlage, dass alle Voraussetzungen für die Verschlüsselung erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="bae64-115">Before using the template, you must make sure that all of the encryption prerequisites are in place.</span></span> <span data-ttu-id="bae64-116">Darüber hinaus benötigen Sie die Konfigurationsinformationen, die durch das Skript zur Überprüfung der Voraussetzungen bereitgestellt werden (etwa die Azure Active Directory-Client-ID und das Azure Active Directory-Clientgeheimnis).</span><span class="sxs-lookup"><span data-stu-id="bae64-116">You'll also need the configuration information that is provided by the prerequisites script, such as Azure Active Directory Client ID and Azure Active Directory Client Secret.</span></span>

<span data-ttu-id="bae64-117">Sie erstellen einen neuen virtuellen Computer, indem Sie die erforderlichen Informationen in die Vorlage eingeben.</span><span class="sxs-lookup"><span data-stu-id="bae64-117">You create a new VM by entering the required information on the template.</span></span> <span data-ttu-id="bae64-118">Anschließend initiieren Sie die Bereitstellung, indem Sie auf **Kaufen** klicken. (Dabei fallen in der Regel die normalen Azure-Computegebühren an.)</span><span class="sxs-lookup"><span data-stu-id="bae64-118">You then initiate deployment by clicking **Purchase** (the cost is typically the normal Azure compute charge).</span></span>

## <a name="deploy-an-encrypted-vm-by-using-a-template"></a><span data-ttu-id="bae64-119">Bereitstellen eines verschlüsselten virtuellen Computers mit einer Vorlage</span><span class="sxs-lookup"><span data-stu-id="bae64-119">Deploy an encrypted VM by using a template</span></span>

<span data-ttu-id="bae64-120">Die Bereitstellung eines verschlüsselten virtuellen Computers mit einer Vorlage umfasst folgende Hauptschritte:</span><span class="sxs-lookup"><span data-stu-id="bae64-120">The main steps involved in deploying an encrypted VM using a template are:</span></span>

1. <span data-ttu-id="bae64-121">Greifen Sie auf die Vorlage **Enable encryption on a running Windows VM ARM** (Aktivieren der Verschlüsselung für einen ausgeführten virtuellen Windows-Computer (ARM)) von GitHub zu, und führen Sie sie aus.</span><span class="sxs-lookup"><span data-stu-id="bae64-121">Access and run the **Enable encryption on a running Windows VM ARM** template from GitHub.</span></span>

1. <span data-ttu-id="bae64-122">Fügen Sie auf der Skriptkonfigurationsseite die erforderlichen Informationen hinzu.</span><span class="sxs-lookup"><span data-stu-id="bae64-122">Add the required details in the script configuration page.</span></span>

1. <span data-ttu-id="bae64-123">Stellen Sie mithilfe des Skripts einen neuen virtuellen Computer bereit, indem Sie auf **Kaufen** klicken.</span><span class="sxs-lookup"><span data-stu-id="bae64-123">Deploy a new VM using the script by clicking **Purchase**.</span></span>

1. <span data-ttu-id="bae64-124">Überprüfen Sie den Status der Datenträgerverschlüsselung über das Azure-Portal.</span><span class="sxs-lookup"><span data-stu-id="bae64-124">Use the Azure portal to verify disk encryption status.</span></span>
