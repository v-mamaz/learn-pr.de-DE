<span data-ttu-id="4cea2-101">Es ist wichtig, Überlegungen zur Speicherleistung in Ihrer Architektur zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-101">It's important to include storage performance considerations in your architecture.</span></span> <span data-ttu-id="4cea2-102">Genau wie die Netzwerklatenz kann eine schlechte Leistung auf Speicherebene die Endbenutzererfahrung beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-102">Just like network latency, poor performance at the storage layer can impact your end-users' experience.</span></span> <span data-ttu-id="4cea2-103">Wie können Sie Ihren Datenspeicher optimieren?</span><span class="sxs-lookup"><span data-stu-id="4cea2-103">How would you optimize your data storage?</span></span> <span data-ttu-id="4cea2-104">Welche Aspekte müssen Sie berücksichtigen, um sicherzustellen, dass Sie in der Architektur keine Speicherengpässe verursachen?</span><span class="sxs-lookup"><span data-stu-id="4cea2-104">What things do you need to consider to ensure that you're not introducing storage bottlenecks into your architecture?</span></span> <span data-ttu-id="4cea2-105">Hier sehen wir uns an, wie Sie die Speicherleistung in Ihrer Architektur optimieren können.</span><span class="sxs-lookup"><span data-stu-id="4cea2-105">Here, we'll take a look at how to optimize your storage performance in your architecture.</span></span>

## <a name="optimize-virtual-machine-storage-performance"></a><span data-ttu-id="4cea2-106">Optimieren der Speicherleistung für virtuelle Computer</span><span class="sxs-lookup"><span data-stu-id="4cea2-106">Optimize virtual machine storage performance</span></span>

<span data-ttu-id="4cea2-107">Zuerst untersuchen wir das Optimieren von Speicher für virtuelle Computer.</span><span class="sxs-lookup"><span data-stu-id="4cea2-107">Let's first look at optimizing storage for virtual machines.</span></span> <span data-ttu-id="4cea2-108">Datenträgerspeicher spielt eine wichtige Rolle in Bezug auf die Leistung Ihrer virtuellen Computer, und die Wahl des richtigen Datenträgertyps für Ihre Anwendung ist eine wichtige Entscheidung.</span><span class="sxs-lookup"><span data-stu-id="4cea2-108">Disk storage plays a critical role in the performance of your virtual machines, and selecting the right disk type for your application is an important decision.</span></span>

<span data-ttu-id="4cea2-109">Unterschiedliche Anwendungen haben unterschiedliche Speicheranforderungen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-109">Different applications are going to have different storage requirements.</span></span> <span data-ttu-id="4cea2-110">Ihre Anwendung reagiert möglicherweise empfindlich auf die Latenz von Lese- und Schreibvorgängen auf dem Datenträger, oder sie erfordert die Fähigkeit, eine große Anzahl von Eingabe-/Ausgabevorgänge pro Sekunde (IOPS) oder einen größeren Datenträger-Gesamtdurchsatz verarbeiten zu können.</span><span class="sxs-lookup"><span data-stu-id="4cea2-110">Your application may be sensitive to latency of disk reads and writes or it may require the ability to handle a large number of input/output operations per second (IOPS) or greater overall disk throughput.</span></span>

<span data-ttu-id="4cea2-111">Welchen Typ von Datenträger sollten Sie beim Erstellen einer IaaS-Workload verwenden?</span><span class="sxs-lookup"><span data-stu-id="4cea2-111">When building an IaaS workload, which type of disk should you use?</span></span> <span data-ttu-id="4cea2-112">Es gibt vier Optionen:</span><span class="sxs-lookup"><span data-stu-id="4cea2-112">There are four options:</span></span>

- <span data-ttu-id="4cea2-113">**Lokaler SSD-Speicher:** Jeder virtuelle Computer verfügt über einen temporären Datenträger, der auf lokalem SSD-Speicher basiert.</span><span class="sxs-lookup"><span data-stu-id="4cea2-113">**Local SSD storage** - Each VM has a temporary disk that is backed by local SSD storage.</span></span> <span data-ttu-id="4cea2-114">Die Größe dieses Datenträgers hängt von der Größe des virtuellen Computers ab.</span><span class="sxs-lookup"><span data-stu-id="4cea2-114">The size of this disk varies depending on the size of the virtual machine.</span></span> <span data-ttu-id="4cea2-115">Da dies ein lokaler SSD-Datenträger ist, ist die Leistung zwar hoch, bei einer Wartung oder erneuten Bereitstellung des virtuellen Computers gehen jedoch möglicherweise Daten verloren.</span><span class="sxs-lookup"><span data-stu-id="4cea2-115">Since this disk is local SSD, the performance is high, but data may be lost during a maintenance event or a redeployment of the VM.</span></span> <span data-ttu-id="4cea2-116">Dieser Datenträger ist nur für die temporäre Speicherung von Daten geeignet, die Sie nicht dauerhaft benötigen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-116">This disk is only suitable for temporary storage of data that you do not need permanently.</span></span> <span data-ttu-id="4cea2-117">Dieser Datenträger eignet sich hervorragend für Auslagerungsdateien und beispielsweise für „tempdb“ in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4cea2-117">This disk is great for the page or swap file, and for things like tempdb in SQL Server.</span></span> <span data-ttu-id="4cea2-118">Für diesen Speicher fallen keine Gebühren an.</span><span class="sxs-lookup"><span data-stu-id="4cea2-118">There is no charge for this storage.</span></span> <span data-ttu-id="4cea2-119">Er ist in den Kosten für den virtuellen Computer enthalten.</span><span class="sxs-lookup"><span data-stu-id="4cea2-119">It's included in the cost of the VM.</span></span>

- <span data-ttu-id="4cea2-120">**HDD-Standardspeicher:** Dies ist ein Spindel-Datenträgerspeicher, und er ist möglicherweise gut geeignet, wenn inkonsistente Wartezeit oder ein geringerer Durchsatz keinen Einfluss auf Ihre Anwendung haben.</span><span class="sxs-lookup"><span data-stu-id="4cea2-120">**Standard storage HDD** - This is spindle disk storage and may fit well where your application is not bound by inconsistent latency or lower levels of throughput.</span></span> <span data-ttu-id="4cea2-121">Eine Dev/Test-Workload, für die keine garantierte Leistung benötigt wird, ist ein hervorragender Anwendungsfall für diesen Datenträgertyp.</span><span class="sxs-lookup"><span data-stu-id="4cea2-121">A dev/test workload where guaranteed performance isn't needed is a great use case for this disk type.</span></span>

- <span data-ttu-id="4cea2-122">**SSD-Standardspeicher:** Dies ist ein SSD-gestützter Speicher mit der geringen Wartezeit von SSD, aber geringerem Durchsatz.</span><span class="sxs-lookup"><span data-stu-id="4cea2-122">**Standard storage SSD** - This is SSD backed storage and has the low latency of SSD but lower levels of throughput.</span></span> <span data-ttu-id="4cea2-123">Ein nicht für die Produktion verwendeter Webserver wäre ein guter Anwendungsfall für diesen Datenträgertyp.</span><span class="sxs-lookup"><span data-stu-id="4cea2-123">A non-production web server would be a good use case for this disk type.</span></span>

- <span data-ttu-id="4cea2-124">**Storage Premium-SSD:** Dieser SSD-gestützte Speicher eignet sich gut für Workloads in der Produktion, die höchste Zuverlässigkeit, konsistent niedrige Wartezeit oder hohen Durchsatz und hohe IOPS-Werte erfordern.</span><span class="sxs-lookup"><span data-stu-id="4cea2-124">**Premium storage SSD** - This SSD backed storage is well-suited for those workloads that are going into production, require the greatest reliability and demand consistent low latency, or need high levels of throughput and IOPS.</span></span> <span data-ttu-id="4cea2-125">Da diese Datenträger höhere Leistung und Zuverlässigkeit bieten, werden sie für alle Produktionsworkloads empfohlen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-125">Since these disks have greater performance and reliability capabilities, they are recommended for all production workloads.</span></span>

<span data-ttu-id="4cea2-126">Storage Premium kann nur virtuellen Computern bestimmter Größe angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4cea2-126">Premium storage can attach only to specific virtual machine (VM) sizes.</span></span> <span data-ttu-id="4cea2-127">Größen für Storage Premium haben ein „s“ im Namen – etwa „D2**s**_v3“ oder „Standard_F2**s**_v2“.</span><span class="sxs-lookup"><span data-stu-id="4cea2-127">Premium storage capable sizes are designated with an "s" in the name, for example D2**s**_v3 or Standard_F2**s**_v2.</span></span> <span data-ttu-id="4cea2-128">Jeder Art von virtuellem Computer (mit oder ohne „s“ im Namen) können HDD- oder SSD-Laufwerke als Standardspeicher angefügt werden.</span><span class="sxs-lookup"><span data-stu-id="4cea2-128">Any virtual machine type (with or without an "s" in the name) can attach standard storage HDD or SSD drives.</span></span>

<span data-ttu-id="4cea2-129">Auf alle Datenträger können Stripingtechnologien (wie „Direkte Speicherplätze“ unter Windows oder „mdadm“ unter Linux) angewendet werden, um den Durchsatz und die IOPS-Werte zu erhöhen, indem die Datenträgeraktivität auf mehrere Datenträger verteilt wird.</span><span class="sxs-lookup"><span data-stu-id="4cea2-129">Disks can be striped using a striping technology (such as Storage Spaces Direct on Windows or mdadm on Linux) to increase the throughput and IOPS by spreading disk activity across multiple disks.</span></span> <span data-ttu-id="4cea2-130">Über Datenträgerstriping können Sie die Leistung für Datenträger enorm steigern. Es wird häufig in Hochleistungs-Datenbanksystemen und anderen Systemen mit hohen Speicheranforderungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cea2-130">Using disk striping allows you to really push the limits of performance for disks, and is often seen in high-performance database systems and other systems with intensive storage requirements.</span></span>

<span data-ttu-id="4cea2-131">Wenn Sie auf die Workloads virtueller Computer angewiesen sind, müssen Sie die Leistungsanforderungen Ihrer Anwendung bewerten, um den zugrunde liegenden Speicher zu bestimmen, den Sie für Ihre virtuellen Computer bereitstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-131">When relying on virtual machine workloads, you'll need to evaluate the performance requirements of your application to determine the underlying storage you'll provision for your virtual machines.</span></span>

## <a name="optimize-storage-performance-for-your-application"></a><span data-ttu-id="4cea2-132">Optimieren der Speicherleistung für Ihre Anwendung</span><span class="sxs-lookup"><span data-stu-id="4cea2-132">Optimize storage performance for your application</span></span>

<span data-ttu-id="4cea2-133">Sie können unterschiedliche Speichertechnologien zum Verbessern der Leistung der RAW-Datenträger verwenden, Sie können aber auch die Leistung beim Zugriff auf Daten auf Anwendungsebene beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-133">While you can use differing storage technologies to improve the raw disk performance, you can also address the performance of access to data at the application layer.</span></span> <span data-ttu-id="4cea2-134">Sehen wir uns einige dafür geeignete Möglichkeiten an.</span><span class="sxs-lookup"><span data-stu-id="4cea2-134">Let's take a look at a few ways you can do this.</span></span>

### <a name="caching"></a><span data-ttu-id="4cea2-135">Caching</span><span class="sxs-lookup"><span data-stu-id="4cea2-135">Caching</span></span>

<span data-ttu-id="4cea2-136">Eine gängige Methode zum Verbessern der Anwendungsleistung ist, eine Cachingebene zwischen Ihrer Anwendung und Ihrem Datenspeicher zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="4cea2-136">A common approach to improve application performance is to integrate a caching layer between your application and your data store.</span></span> <span data-ttu-id="4cea2-137">Ein Cache speichert Daten in der Regel im Arbeitsspeicher und ermöglicht schnelles Abrufen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-137">A cache typically stores data in memory and allows for fast retrieval.</span></span> <span data-ttu-id="4cea2-138">Bei diesen Daten kann es sich um häufig verwendete Daten, um Daten aus einer Datenbank oder um temporäre Daten wie etwa den Benutzerstatus handeln.</span><span class="sxs-lookup"><span data-stu-id="4cea2-138">This data can be frequently accessed data, data you specify from a database, or temporary data such as user state.</span></span> <span data-ttu-id="4cea2-139">Sie steuern, welche Art von Daten gespeichert wird, wie oft die Daten aktualisiert werden und wann sie ablaufen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-139">You'll have control over the type of data stored, how often it refreshes, and when it expires.</span></span> <span data-ttu-id="4cea2-140">Wenn Sie diesen Cache in der gleichen Region implementieren wie die Anwendung und die Datenbank, verringert sich die Gesamtwartezeit zwischen den beiden.</span><span class="sxs-lookup"><span data-stu-id="4cea2-140">By co-locating this cache in the same region as your application and database, you'll reduce the overall latency between the two.</span></span> <span data-ttu-id="4cea2-141">Das Abrufen von Daten aus dem Cache ist fast immer schneller als das Abrufen der gleichen Daten aus einer Datenbank. Mit einer Cachingebene können Sie also die Gesamtleistung der Anwendung erheblich verbessern.</span><span class="sxs-lookup"><span data-stu-id="4cea2-141">Pulling data out of the cache will almost always be faster than retrieving the same data from a database, so by using a caching layer you can substantially improve the overall performance of your application.</span></span> <span data-ttu-id="4cea2-142">In der folgenden Abbildung wird veranschaulicht, wie eine Anwendung Daten aus einer Datenbank abruft, sie in einem Cache speichert und den zwischengespeicherten Wert nach Bedarf verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cea2-142">The following illustration shows how an application retrieves data from a database, stores it in a cache, and uses the cached value as needed.</span></span>

![Abbildung, in der veranschaulicht wird, dass das Abrufen von Daten aus dem Cache schneller als das Abrufen aus einer Datenbank ist.](../media/4-cache.png)

<span data-ttu-id="4cea2-144">Azure Redis Cache ist ein Cachedienst in Azure, mit dem im Arbeitsspeicher befindliche Daten gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="4cea2-144">Azure Redis Cache is a caching service on Azure that stores data in memory.</span></span> <span data-ttu-id="4cea2-145">Er basiert auf Open-Source-Redis Cache und ist ein vollständig verwaltetes Dienstangebot von Microsoft.</span><span class="sxs-lookup"><span data-stu-id="4cea2-145">It's based upon the open-source Redis cache and is a fully managed service offering by Microsoft.</span></span> <span data-ttu-id="4cea2-146">Sie wählen die Leistungsstufe aus, die Sie benötigen, und konfigurieren Ihre Anwendung für die Verwendung des Diensts.</span><span class="sxs-lookup"><span data-stu-id="4cea2-146">You select the performance tier that you require and configure your application to use the service.</span></span>

### <a name="polyglot-persistence"></a><span data-ttu-id="4cea2-147">Mehrsprachige Persistenz</span><span class="sxs-lookup"><span data-stu-id="4cea2-147">Polyglot persistence</span></span>

<span data-ttu-id="4cea2-148">Mehrsprachige Persistenz ist die Verwendung unterschiedlicher Datenspeichertechnologien, um Ihre Speicheranforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-148">Polyglot persistence is the usage of different data storage technologies to handle your storage requirements.</span></span>

<span data-ttu-id="4cea2-149">Betrachten wir ein Beispiel aus dem E-Commerce-Bereich.</span><span class="sxs-lookup"><span data-stu-id="4cea2-149">Consider an e-commerce example.</span></span> <span data-ttu-id="4cea2-150">Sie können Anwendungsressourcen in einem Blobspeicher, Produktbewertungen und Empfehlungen in einem NoSQL-Speicher und Benutzerprofil- bzw. Kontodaten in einer SQL-­Datenbank speichern.</span><span class="sxs-lookup"><span data-stu-id="4cea2-150">You may store application assets in a blob store, product reviews and recommendations in a NoSQL store, and user profile or account data in a SQL database.</span></span> <span data-ttu-id="4cea2-151">In der folgenden Abbildung wird veranschaulicht, wie eine Anwendung mehrere Datenspeichertechniken verwenden kann, um unterschiedliche Arten von Daten zu speichern.</span><span class="sxs-lookup"><span data-stu-id="4cea2-151">The following illustration shows how an application might use multiple data storage techniques to store different types of data.</span></span>

![Abbildung, in der die Verwendung verschiedener Datenspeichermethoden in der gleichen Anwendung veranschaulicht wird, um eine höhere Leistung und geringere Kosten zu erzielen.](../media/4-polyglotpersistence.png)

<span data-ttu-id="4cea2-153">Dies ist wichtig, da verschiedene Datenspeicher für bestimmte Anwendungsfälle vorgesehen oder aufgrund der Kosten besser geeignet sind.</span><span class="sxs-lookup"><span data-stu-id="4cea2-153">This is important, as different data stores are designed for certain use cases or may be more accessible because of cost.</span></span> <span data-ttu-id="4cea2-154">Der Zugriff auf in einer SQL-Datenbank gespeicherte Blobs kann beispielsweise teurer und langsamer sein als der direkte Zugriff über einen Blobspeicher.</span><span class="sxs-lookup"><span data-stu-id="4cea2-154">As an example, storing blobs in a SQL database may be costly and slower to access than directly from a blob store.</span></span>

<span data-ttu-id="4cea2-155">Die Aufrechterhaltung der Datenkonsistenz über verteilte Datenspeicher hinweg kann eine erhebliche Herausforderung darstellen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-155">Maintaining data consistency across distributed data stores can be a significant challenge.</span></span> <span data-ttu-id="4cea2-156">Das Problem ist, dass Strategien, z.B. in Bezug auf das Serialisieren und Sperren, nur gut funktionieren, wenn für alle Anwendungsinstanzen derselbe Datenspeicher verwendet wird und die Anwendung so konzipiert ist, dass die Sperrungen jeweils nur für sehr kurze Zeit erfolgen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-156">The issue is that strategies such as serialization and locking only work well if all application instances share the same data store, and the application is designed to ensure that the locks are very short-lived.</span></span> <span data-ttu-id="4cea2-157">Wenn Daten über unterschiedliche Datenspeicher hinweg partitioniert oder repliziert werden, kann das Sperren und Serialisieren des Datenzugriffs zur Wahrung der Konsistenz zu kostenintensivem Mehraufwand führen, aus dem sich Auswirkungen auf Durchsatz, Antwortzeit und Skalierbarkeit eines Systems ergeben.</span><span class="sxs-lookup"><span data-stu-id="4cea2-157">However, if data is partitioned or replicated across different data stores, locking and serializing data access to maintain consistency can become an expensive overhead that impacts the throughput, response time, and scalability of a system.</span></span> <span data-ttu-id="4cea2-158">Aus diesem Grund werden die geänderten Daten in den meisten modernen verteilten Anwendungen nicht gesperrt, und für die Konsistenz wird ein entspannterer Ansatz gewählt. Dies wird als „letztliche Konsistenz“ bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="4cea2-158">Therefore, most modern distributed applications do not lock the data that they modify, and they take a rather more relaxed approach to consistency, known as eventual consistency.</span></span>

<span data-ttu-id="4cea2-159">Letztliche Konsistenz bedeutet, dass Replikatdatenspeicher letztendlich konvergiert werden, wenn keine weiteren Schreibvorgänge auftreten.</span><span class="sxs-lookup"><span data-stu-id="4cea2-159">Eventual consistency means that replica data stores will eventually converge if there are no further writes.</span></span> <span data-ttu-id="4cea2-160">Wenn ein Schreibvorgang in einem der Datenspeicher vorgenommen wird, können Lesevorgänge aus einem anderen Datenspeicher zu geringfügig veralteten Daten führen.</span><span class="sxs-lookup"><span data-stu-id="4cea2-160">If a write is made to one of the data stores, reads from another may provide slightly out-of-date data.</span></span> <span data-ttu-id="4cea2-161">Letztliche Konsistenz ermöglicht eine höhere Skalierung, da die Wartezeit für Lese- und Schreibvorgänge gering ist. Es muss nicht überprüft werden, ob Informationen in allen Speichern konsistent sind.</span><span class="sxs-lookup"><span data-stu-id="4cea2-161">Eventual consistency enables higher scale because there is a low latency for reads and writes, rather than waiting to check if information is consistent across all stores.</span></span>

## <a name="lamna-healthcare-example"></a><span data-ttu-id="4cea2-162">Lamna Healthcare-Beispiel</span><span class="sxs-lookup"><span data-stu-id="4cea2-162">Lamna Healthcare example</span></span>

<span data-ttu-id="4cea2-163">Das Patientenbuchungssystem von Lamna Healthcare wird in zwei Azure-Regionen gehostet: „Europa, Westen“ und „Australien, Osten“.</span><span class="sxs-lookup"><span data-stu-id="4cea2-163">Lamna Healthcare's patient booking system is hosted across two Azure regions, West Europe and Australia East.</span></span> <span data-ttu-id="4cea2-164">Sie verwenden virtuelle Computer als Front-End-Knoten, um ihre Website bereitzustellen, und haben Azure SQL-Datenbank in „Europa, Westen“ als primäres und in „Australien, Osten“ als lesbares sekundäres Replikat bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="4cea2-164">They're using virtual machines as the front-end nodes to deploy their website, and have Azure SQL DB deployed in West Europe as primary and Australia East as a readable secondary.</span></span> <span data-ttu-id="4cea2-165">Für ihre Front-End-Knoten ist kein hoher Datenträgerdurchsatz erforderlich, jedoch eine konsistente Wartezeit und Zuverlässigkeit für die Produktion. Dafür wird SSD Premium-gestützter Speicher verwendet.</span><span class="sxs-lookup"><span data-stu-id="4cea2-165">Their front-end nodes don't require high levels of disk throughput, but do require consistent latency performance and production reliability and have used Premium SSD backed storage.</span></span>

<span data-ttu-id="4cea2-166">Sie hosten eine lokale Azure Redis Cache-Instanz in jeder Azure-Region, um die allgemeinen Benutzeranforderungen und die Verfügbarkeit der Ärzte zu speichern.</span><span class="sxs-lookup"><span data-stu-id="4cea2-166">They are hosting an Azure Redis Cache locally in each Azure region to store the common user requests and availability of doctors.</span></span> <span data-ttu-id="4cea2-167">Caching wurde implementiert, um die Leistung der am häufigsten auftretenden Datenleseaktivitäten, die in der Anwendung ermittelt wurden, zu optimieren.</span><span class="sxs-lookup"><span data-stu-id="4cea2-167">Caching has been implemented to optimize the performance of the most common data read activities observed on the application.</span></span>

<span data-ttu-id="4cea2-168">In diesem Artikel wurden einige Beispiele dazu behandelt, wie Sie die Speicherleistung auf Ihrer Infrastrukturebene durch die Wahl der richtigen Datenträgerarchitektur und auf Anwendungsebene durch die Verwendung von Caching und die Wahl der richtigen Datenplattform für Ihre Daten verbessern können.</span><span class="sxs-lookup"><span data-stu-id="4cea2-168">We've covered a few examples of how you can improve storage performance in your infrastructure layer by choosing the right disk architecture and at the application level through the use of caching and selecting the right data platform for your data.</span></span> <span data-ttu-id="4cea2-169">Durch eine Lösung mit geeigneter Architektur wird sichergestellt, dass die Leistung beim Zugriff auf Daten möglichst hoch ist.</span><span class="sxs-lookup"><span data-stu-id="4cea2-169">A properly architected solution will ensure that access to data performs as well as possible.</span></span>