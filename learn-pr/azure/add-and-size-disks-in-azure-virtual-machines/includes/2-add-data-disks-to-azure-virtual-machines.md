<span data-ttu-id="a25f8-101">Virtuelle Computer in Azure verwenden wie alle anderen Computer auch einen Datenträger, auf dem das Betriebssystem, Anwendungen und Daten gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="a25f8-101">Just like any other computer, virtual machines in Azure use disks as a place to store an operating system, applications, and data.</span></span> <span data-ttu-id="a25f8-102">Diese Datenträger werden als virtuelle Festplatten (VHDs) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="a25f8-102">These disks are called virtual hard disks (VHDs).</span></span>

<span data-ttu-id="a25f8-103">Angenommen, Sie haben in Azure einen virtuellen Computer (VM) erstellt, mit dem die Datenbank mit den Fallverläufen gehostet wird, die für Ihre Anwaltskanzlei wichtig sind.</span><span class="sxs-lookup"><span data-stu-id="a25f8-103">Suppose you have created a virtual machine (VM) in Azure, which will host the database of case histories that your law firm relies on.</span></span> <span data-ttu-id="a25f8-104">Eine gut entworfene Datenträgerkonfiguration ist für eine hohe Leistung und Stabilität in Bezug auf SQL Server von grundlegender Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="a25f8-104">A well-designed disk configuration is fundamental to good performance and resilience for SQL Server.</span></span>

<span data-ttu-id="a25f8-105">In dieser Einheit wird beschrieben, wie Sie die richtigen Konfigurationswerte für Ihre Datenträger auswählen und diese Datenträger an eine VM anfügen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-105">In this unit, you'll learn how to choose the right configuration values for your disks and how to attach those disks to a VM.</span></span>

## <a name="how-disks-are-used-by-vms"></a><span data-ttu-id="a25f8-106">Verwendung von Datenträgern durch virtuelle Computer</span><span class="sxs-lookup"><span data-stu-id="a25f8-106">How disks are used by VMs</span></span>

<span data-ttu-id="a25f8-107">Für VMs werden Datenträger zu drei unterschiedlichen Zwecken genutzt:</span><span class="sxs-lookup"><span data-stu-id="a25f8-107">VMs use disks for three different purposes:</span></span>

- <span data-ttu-id="a25f8-108">**Speicher für Betriebssystem**:</span><span class="sxs-lookup"><span data-stu-id="a25f8-108">**Operating system storage**.</span></span> <span data-ttu-id="a25f8-109">Jede VM enthält einen Datenträger, auf dem das Betriebssystem gespeichert ist.</span><span class="sxs-lookup"><span data-stu-id="a25f8-109">Every VM includes one disk that stores the operating system.</span></span> <span data-ttu-id="a25f8-110">Dieses Laufwerk ist als SATA-Laufwerk registriert und wird in Windows als Laufwerk „C:“ bezeichnet und für Unix-Betriebssysteme unter „/“ bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a25f8-110">This drive is registered as a SATA drive and labeled as the C: drive in Windows and mounted at "/" in Unix-like operating systems.</span></span> <span data-ttu-id="a25f8-111">Es hat eine maximale Kapazität von 2.048 GB, und sein Inhalt stammt aus dem VM-Image, das Sie für die Erstellung der VM verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="a25f8-111">It has a maximum capacity of 2048 gigabytes (GB), and its content is taken from the VM image you used to create the VM.</span></span>
- <span data-ttu-id="a25f8-112">**Temporärer Speicher**:</span><span class="sxs-lookup"><span data-stu-id="a25f8-112">**Temporary storage**.</span></span> <span data-ttu-id="a25f8-113">Jede VM enthält auch eine temporäre VHD, die für Auslagerungsdateien genutzt wird.</span><span class="sxs-lookup"><span data-stu-id="a25f8-113">Every VM also includes a temporary VHD that is used for page and swap files.</span></span> <span data-ttu-id="a25f8-114">Es kann sein, dass die Daten auf diesem Laufwerk bei der Wartung oder erneuten Bereitstellung verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-114">Data on this drive may be lost during a maintenance event or redeployment.</span></span> <span data-ttu-id="a25f8-115">Das Laufwerk hat auf einer Windows-VM standardmäßig die Bezeichnung „D:“.</span><span class="sxs-lookup"><span data-stu-id="a25f8-115">The drive is labeled as D: on a Windows VM by default.</span></span> <span data-ttu-id="a25f8-116">Verwenden Sie dieses Laufwerk nicht zum Speichern von wichtigen Daten, die nicht verloren gehen dürfen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-116">Do not use this drive to store important data that you do not want to lose.</span></span>
- <span data-ttu-id="a25f8-117">**Datenspeicher**:</span><span class="sxs-lookup"><span data-stu-id="a25f8-117">**Data storage**.</span></span> <span data-ttu-id="a25f8-118">Ein Datenträger ist ein beliebiger anderer Datenträger, der an eine VM angefügt ist.</span><span class="sxs-lookup"><span data-stu-id="a25f8-118">A data disk is any other disk attached to a VM.</span></span> <span data-ttu-id="a25f8-119">Sie verwenden Datenträger zum Speichern von Dateien, Datenbanken und beliebigen anderen Daten, die Sie über Neustarts hinweg beibehalten müssen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-119">You use data disks to store files, databases, and any other data that you need to persist across reboots.</span></span> <span data-ttu-id="a25f8-120">Einige VM-Images enthalten standardmäßig bereits Datenträger für Daten.</span><span class="sxs-lookup"><span data-stu-id="a25f8-120">Some VM images include data disks by default.</span></span> <span data-ttu-id="a25f8-121">Sie können bis zur maximalen Anzahl, die durch die Größe der VM vorgegeben ist, auch eigene Datenträger hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-121">You can also add your own data disks up to the maximum number specified by the size of the VM.</span></span> <span data-ttu-id="a25f8-122">Jeder Datenträger wird als SCSI-Laufwerk registriert und verfügt über eine maximale Kapazität von 4.095 GB.</span><span class="sxs-lookup"><span data-stu-id="a25f8-122">Each data disk is registered as a SCSI drive and has a max capacity of 4095 GB.</span></span> <span data-ttu-id="a25f8-123">Sie können Laufwerkbuchstaben oder Bereitstellungspunkte für Ihre Datenlaufwerke wählen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-123">You can choose drive letters or mount points for your data drives.</span></span>

## <a name="storing-vhd-files"></a><span data-ttu-id="a25f8-124">Speichern von VHD-Dateien</span><span class="sxs-lookup"><span data-stu-id="a25f8-124">Storing VHD files</span></span>

<span data-ttu-id="a25f8-125">In Azure werden VHDs unter einem Azure-Speicherkonto als **Seitenblobs** gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a25f8-125">In Azure, VHDs are stored in an Azure storage account as **page blobs**.</span></span>

<span data-ttu-id="a25f8-126">Die folgende Tabelle enthält die verschiedenen Arten von Speicherkonten sowie die Objekte, die jeweils mit den Konten verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="a25f8-126">This table shows the various kinds of storage accounts and which objects can be used with each.</span></span>

|<span data-ttu-id="a25f8-127">**Speicherkontotyp**</span><span class="sxs-lookup"><span data-stu-id="a25f8-127">**Type of storage account**</span></span>|<span data-ttu-id="a25f8-128">**Standard (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="a25f8-128">**General-purpose standard**</span></span>|<span data-ttu-id="a25f8-129">**Premium (allgemein)**</span><span class="sxs-lookup"><span data-stu-id="a25f8-129">**General-purpose premium**</span></span>|<span data-ttu-id="a25f8-130">**Blobspeicher, Zugriffsebenen „Heiß“ und „Kalt“**</span><span class="sxs-lookup"><span data-stu-id="a25f8-130">**Blob storage, hot and cool access tiers**</span></span>|
|-----|-----|-----|-----|
|<span data-ttu-id="a25f8-131">**Unterstützte Dienste**</span><span class="sxs-lookup"><span data-stu-id="a25f8-131">**Services supported**</span></span>| <span data-ttu-id="a25f8-132">Azure Blob Storage, Azure Files, Azure Queue Storage</span><span class="sxs-lookup"><span data-stu-id="a25f8-132">Azure Blob storage, Azure Files, Azure Queue storage</span></span> | <span data-ttu-id="a25f8-133">Blobspeicher</span><span class="sxs-lookup"><span data-stu-id="a25f8-133">Blob storage</span></span> | <span data-ttu-id="a25f8-134">Blobspeicher</span><span class="sxs-lookup"><span data-stu-id="a25f8-134">Blob storage</span></span>|
|<span data-ttu-id="a25f8-135">**Unterstützte Blobtypen**</span><span class="sxs-lookup"><span data-stu-id="a25f8-135">**Types of blobs supported**</span></span>|<span data-ttu-id="a25f8-136">Blockblobs, Seitenblobs und Anfügeblobs</span><span class="sxs-lookup"><span data-stu-id="a25f8-136">Block blobs, page blobs, and append blobs</span></span> | <span data-ttu-id="a25f8-137">Seitenblobs</span><span class="sxs-lookup"><span data-stu-id="a25f8-137">Page blobs</span></span> | <span data-ttu-id="a25f8-138">Blockblobs und Anfügeblobs</span><span class="sxs-lookup"><span data-stu-id="a25f8-138">Block blobs and append blobs</span></span>|

<span data-ttu-id="a25f8-139">Da VHDs als Seitenblobs gespeichert werden und nur Standardspeicher Seitenblobs unterstützt, benötigen Sie zum Speichern von VHDs ein Standardspeicherkonto.</span><span class="sxs-lookup"><span data-stu-id="a25f8-139">Because VHDs are stored as page blobs, and only standard storage supports page blobs, you need a standard storage account to store VHDs.</span></span>

## <a name="attach-data-disks-to-vms"></a><span data-ttu-id="a25f8-140">Anfügen von Datenträgern an VMs</span><span class="sxs-lookup"><span data-stu-id="a25f8-140">Attach data disks to VMs</span></span>

<span data-ttu-id="a25f8-141">Sie können einem virtuellen Computer jederzeit Datenträger hinzufügen, indem Sie diese an die VM anfügen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-141">You can add data disks to a virtual machine at any time by attaching them to the VM.</span></span> <span data-ttu-id="a25f8-142">Beim Anfügen eines Datenträgers wird die VHD-Datei der VM zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="a25f8-142">Attaching a disk associates the VHD file with the VM.</span></span> 

<span data-ttu-id="a25f8-143">Die virtuelle Festplatte kann nicht aus dem Speicher gelöscht werden, solange sie angefügt ist.</span><span class="sxs-lookup"><span data-stu-id="a25f8-143">The VHD can't be deleted from storage while it's attached.</span></span>

### <a name="attach-an-existing-data-disk-to-an-azure-vm"></a><span data-ttu-id="a25f8-144">Anfügen eines vorhandenen Datenträgers an eine Azure-VM</span><span class="sxs-lookup"><span data-stu-id="a25f8-144">Attach an existing data disk to an Azure VM</span></span>

<span data-ttu-id="a25f8-145">Unter Umständen verfügen Sie bereits über eine VHD zum Speichern der Daten, die Sie auf Ihrer Azure-VM verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="a25f8-145">You may already have a VHD that stores the data you want to use in your Azure VM.</span></span> <span data-ttu-id="a25f8-146">Im Szenario mit der Anwaltskanzlei kann es beispielsweise sein, dass Sie Ihre physischen Datenträger bereits lokal in VHDs konvertiert haben.</span><span class="sxs-lookup"><span data-stu-id="a25f8-146">In our law firm scenario, for example,  perhaps you've already converted your physical disks to VHDs locally.</span></span> <span data-ttu-id="a25f8-147">In diesem Fall können Sie das PowerShell-Cmdlet `Add-AzureRmVhd` verwenden, um den Upload in das Speicherkonto durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-147">In this case, you can use the PowerShell `Add-AzureRmVhd` cmdlet to upload it to the storage account.</span></span> <span data-ttu-id="a25f8-148">Dieses Cmdlet ist für das Übertragen von VHD-Dateien optimiert und kann bewirken, dass der Upload schneller als mit anderen Methoden durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="a25f8-148">This cmdlet is optimized for transferring VHD files and may complete the upload faster than other methods.</span></span> <span data-ttu-id="a25f8-149">Die Übertragung wird mit mehreren Threads durchgeführt, um eine optimale Leistung zu erzielen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-149">The transfer is completed by using multiple threads for best performance.</span></span> <span data-ttu-id="a25f8-150">Nachdem die VHD hochgeladen wurde, können Sie sie als Datenträger an eine vorhandene VM anfügen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-150">Once the VHD has been uploaded, attach it to an existing VM as a data disk.</span></span> <span data-ttu-id="a25f8-151">Dieser Ansatz ist eine hervorragende Möglichkeit, um Daten jedes Typs auf Azure-VMs bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-151">This approach an excellent way to deploy data of all types to Azure VMs.</span></span> <span data-ttu-id="a25f8-152">Die Daten sind automatisch auf der VM vorhanden, und es ist nicht erforderlich, den neuen Datenträger zu partitionieren oder zu formatieren.</span><span class="sxs-lookup"><span data-stu-id="a25f8-152">The data is automatically present in the VM, and there's no need to partition or format the new disk.</span></span>

### <a name="attach-a-new-data-disk-to-an-azure-vm"></a><span data-ttu-id="a25f8-153">Anfügen eines neuen Datenträgers an eine Azure-VM</span><span class="sxs-lookup"><span data-stu-id="a25f8-153">Attach a new data disk to an Azure VM</span></span>

<span data-ttu-id="a25f8-154">Sie können das Azure-Portal nutzen, um einer VM einen neuen, leeren Datenträger hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a25f8-154">You can use the Azure portal to add a new, empty data disk to a VM.</span></span> 

<span data-ttu-id="a25f8-155">Im von Ihnen angegebenen Speicherkonto wird eine **VHD**-Datei als Seitenblob erstellt, und die VHD-Datei wird als Datenträger für Daten an die VM angefügt.</span><span class="sxs-lookup"><span data-stu-id="a25f8-155">It will create a **.vhd** file as a page blob in the storage account that you specify, and it attaches that .vhd file as a data disk to the VM.</span></span> 

<span data-ttu-id="a25f8-156">Bevor Sie die neue VHD zum Speichern von Daten nutzen können, müssen Sie den neuen Datenträger initialisieren, partitionieren und formatieren.</span><span class="sxs-lookup"><span data-stu-id="a25f8-156">Before you can use the new VHD to store data, you have to initialize, partition, and format the new disk.</span></span> <span data-ttu-id="a25f8-157">Die Ausführung dieser Schritte wird in der nächsten Übung beschrieben.</span><span class="sxs-lookup"><span data-stu-id="a25f8-157">We'll practice these steps in the next exercise.</span></span>

<span data-ttu-id="a25f8-158">Auf lokalen physischen Servern speichern Sie Daten auf physischen Festplatten.</span><span class="sxs-lookup"><span data-stu-id="a25f8-158">In physical on-premises servers, you store data on physical hard disks.</span></span> <span data-ttu-id="a25f8-159">Sie speichern die Daten eines virtuellen Azure-Computers (VM) auf virtuellen Festplatten (VHDs).</span><span class="sxs-lookup"><span data-stu-id="a25f8-159">You store data in an Azure virtual machine (VM) on virtual hard disks (VHDs).</span></span> <span data-ttu-id="a25f8-160">Diese VHDs werden als Seitenblobs in Azure-Speicherkonten gespeichert.</span><span class="sxs-lookup"><span data-stu-id="a25f8-160">These VHDs are stored as page blobs in Azure storage accounts.</span></span> <span data-ttu-id="a25f8-161">Wenn Sie beispielsweise die Datenbank mit den Fallverläufen für Ihre Anwaltskanzlei zu Azure migrieren, müssen Sie VHDs erstellen, auf denen die Datenbankdateien gespeichert werden können.</span><span class="sxs-lookup"><span data-stu-id="a25f8-161">For example, when you migrate your law firm's database of case histories to Azure, you must create VHDs where the database files will be saved.</span></span>
