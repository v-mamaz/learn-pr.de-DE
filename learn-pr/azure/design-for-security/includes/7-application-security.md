<span data-ttu-id="ef7b7-101">Im Vergleich zu üblichen lokalen Bereitstellungen bietet das Hosten von Anwendungen auf einer Cloudplattform mehrere Vorteile.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-101">Hosting applications on a cloud platform provides a number of advantages when compared to traditional on-premises deployments.</span></span> <span data-ttu-id="ef7b7-102">Im Rahmen des Cloudmodells „Shared Responsibility“ (gemeinsame Verantwortung) unterliegen Sicherheitsaspekte auf der Ebene des physischen Netzwerks sowie auf der Gebäude- und Hostebene der Verantwortung des Cloudanbieters.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-102">The cloud's shared-responsibility model moves security at the physical network, building, and host levels under the control of the cloud provider.</span></span> <span data-ttu-id="ef7b7-103">Für einen Angreifer würde sich die Kompromittierung der Plattform auf dieser Ebene kaum lohnen, da dessen Aufwand erheblichen Investitionen und umfassenden Erkenntnissen des Anbieters gegenübersteht, der seine Infrastruktur auf diese Weise sichert und überwacht.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-103">An attacker trying to compromise the platform at this level would see diminishing returns versus the considerable investment and insight providers make in securing and monitoring their infrastructure.</span></span>

<span data-ttu-id="ef7b7-104">Angreifer sind daher vielmehr an der Ausnutzung von Sicherheitsrisiken interessiert, die durch Kunden der Cloudplattform auf der Anwendungsebene eingeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-104">It's therefore far more effective for attackers to pursue vulnerabilities introduced at the application level by cloud-platform customers.</span></span> <span data-ttu-id="ef7b7-105">Durch den Einsatz einer PaaS-Strategie (Platform-as-a-Service) zum Hosten von Anwendungen müssen Kunden darüber hinaus ihre Ressourcen nicht mehr zum Verwalten der Betriebssystemsicherheit aufwenden. Stattdessen können diese zur Härtung von Anwendungscode und Überwachung von Identitäten im Zusammenhang mit dem Zugriff auf Anwendungen eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-105">Furthermore, by adopting Platform as a Service (PaaS) to host their applications, customers are able to free resources from managing operating system security and deploy them to harden application code and monitor the identity perimeter around the application.</span></span> <span data-ttu-id="ef7b7-106">In dieser Einheit erfahren Sie, wie die Anwendungssicherheit über das Anwendungsdesign verbessert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-106">In this unit we will discuss some of the ways application security can be improved through design.</span></span>

## <a name="scenario"></a><span data-ttu-id="ef7b7-107">Szenario</span><span class="sxs-lookup"><span data-stu-id="ef7b7-107">Scenario</span></span>

<span data-ttu-id="ef7b7-108">Kunden des Unternehmens Lamna Healthcare müssen über ein Webportal auf ihre Patientenakten zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-108">Lamna Healthcare customers require access to their personal medical records through an online web portal.</span></span> <span data-ttu-id="ef7b7-109">Die Einhaltung des US-amerikanischen HIPAA-Gesetzes (Health Insurance Portability and Accountability Act) ist verpflichtend und setzt das Unternehmen einem erheblichen Risiko für Strafzahlungen aus, falls durch eine Sicherheitsverletzung personenbezogene Daten gestohlen werden. Die Absicherung der Anwendung sowie der personenbezogenen Daten der Patienten ist daher von größter Wichtigkeit.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-109">Compliance with the Health Insurance Portability and Accountability Act (HIPAA) is mandatory and puts the company at significant risk of financial penalties if a breach of personal data occurs; therefore, securing the application and personal data it interacts with is paramount.</span></span>

<span data-ttu-id="ef7b7-110">Für Kundenanwendungen sind primär die folgenden Bereiche relevant:</span><span class="sxs-lookup"><span data-stu-id="ef7b7-110">The primary areas that concern customer applications are:</span></span>

- <span data-ttu-id="ef7b7-111">sicherer Anwendungsentwurf</span><span class="sxs-lookup"><span data-stu-id="ef7b7-111">Secure application design</span></span>
- <span data-ttu-id="ef7b7-112">Datensicherheit</span><span class="sxs-lookup"><span data-stu-id="ef7b7-112">Data security</span></span>
- <span data-ttu-id="ef7b7-113">Identitäts- und Zugriffsverwaltung</span><span class="sxs-lookup"><span data-stu-id="ef7b7-113">Identity and access management</span></span>
- <span data-ttu-id="ef7b7-114">Sicherheit des Endpunkts</span><span class="sxs-lookup"><span data-stu-id="ef7b7-114">Endpoint security</span></span>

## <a name="security-development-lifecycle"></a><span data-ttu-id="ef7b7-115">Security Development Lifecycle</span><span class="sxs-lookup"><span data-stu-id="ef7b7-115">Security Development Lifecycle</span></span>

<span data-ttu-id="ef7b7-116">Der [Security Development Lifecycle](https://www.microsoft.com/sdl) (SDL) von Microsoft kann während der Entwurfsphase der Anwendung verwendet werden, um sicherzustellen, dass Sicherheitsrisiken während des gesamten Lebenszyklus der Softwareentwicklung berücksichtigt werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-116">Microsoft's [Security Development Lifecycle](https://www.microsoft.com/sdl) (SDL) process can be used during the application design stage to ensure security concerns are incorporated in the software development lifecycle.</span></span> <span data-ttu-id="ef7b7-117">Sicherheits- und Konformitätsprobleme können in der Entwurfsphase einer Anwendung deutlicher leichter als in anderen Phasen behoben werden. So lassen sich häufig auftretende Fehler vermeiden, die zu Sicherheitslücken im Endprodukt führen können.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-117">Security and compliance issues are far easier to address when designing an application and can mitigate many common errors that can lead to security flaws in the final product.</span></span> <span data-ttu-id="ef7b7-118">Wenn Probleme in der frühen Entwicklungsphase behoben werden, führt dies außerdem zu geringeren Kosten.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-118">Fixing issues early in the software development journey is also far less costly.</span></span> <span data-ttu-id="ef7b7-119">Für Softwareprojekt werden üblicherweise die folgenden SDL-Schritte umgesetzt:</span><span class="sxs-lookup"><span data-stu-id="ef7b7-119">The typical sequence of SDL steps a software project can use are as follows:</span></span>

1. <span data-ttu-id="ef7b7-120">Schulungen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-120">Training</span></span>

    - <span data-ttu-id="ef7b7-121">Schulungen zum Thema grundlegender Sicherheit</span><span class="sxs-lookup"><span data-stu-id="ef7b7-121">Core security training</span></span>

1. <span data-ttu-id="ef7b7-122">Anforderungen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-122">Requirements</span></span>

    - <span data-ttu-id="ef7b7-123">Definieren von Anforderungen und Quality Gates (Meilensteine, bei denen mithilfe definierter Qualitätskriterien über den weiteren Projektverlauf entschieden wird)</span><span class="sxs-lookup"><span data-stu-id="ef7b7-123">Define requirements and quality gates</span></span>
    - <span data-ttu-id="ef7b7-124">Analysieren von Risiken für Sicherheit und Datenschutz</span><span class="sxs-lookup"><span data-stu-id="ef7b7-124">Analyze security and privacy risks</span></span>
 
1. <span data-ttu-id="ef7b7-125">Entwurf</span><span class="sxs-lookup"><span data-stu-id="ef7b7-125">Design</span></span>

    - <span data-ttu-id="ef7b7-126">Analysieren der Angriffsfläche</span><span class="sxs-lookup"><span data-stu-id="ef7b7-126">Attack surface analysis</span></span>
    - <span data-ttu-id="ef7b7-127">Bedrohungsmodellierung</span><span class="sxs-lookup"><span data-stu-id="ef7b7-127">Threat modeling</span></span>
 
1. <span data-ttu-id="ef7b7-128">Implementierung</span><span class="sxs-lookup"><span data-stu-id="ef7b7-128">Implementation</span></span>

    - <span data-ttu-id="ef7b7-129">Festlegen von Tools zur Messung der Codequalität</span><span class="sxs-lookup"><span data-stu-id="ef7b7-129">Specify tools to ensure code quality can be measured</span></span>
    - <span data-ttu-id="ef7b7-130">Festlegen von APIs und Funktionen, die nicht verwendet dürfen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-130">Enforce banned APIs and functions</span></span>
    - <span data-ttu-id="ef7b7-131">Ausführen statischer Codeanalysen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-131">Perform static code analysis</span></span>
    - <span data-ttu-id="ef7b7-132">Überprüfen von Repositorys auf gespeicherte Geheimnisse</span><span class="sxs-lookup"><span data-stu-id="ef7b7-132">Scan repositories for stored secrets</span></span>
 
1. <span data-ttu-id="ef7b7-133">Überprüfung</span><span class="sxs-lookup"><span data-stu-id="ef7b7-133">Verification</span></span>

    - <span data-ttu-id="ef7b7-134">Dynamische Tests und Fuzzing</span><span class="sxs-lookup"><span data-stu-id="ef7b7-134">Dynamic/Fuzz testing</span></span>
    - <span data-ttu-id="ef7b7-135">Überprüfen der Bedrohungsmodelle/Angriffsflächen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-135">Verify threat models/attack surface</span></span>
 
1. <span data-ttu-id="ef7b7-136">Release</span><span class="sxs-lookup"><span data-stu-id="ef7b7-136">Release</span></span>

    - <span data-ttu-id="ef7b7-137">Entwerfen eines Sicherheitsplans für Bedrohungen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-137">Form security response plan</span></span>
    - <span data-ttu-id="ef7b7-138">Ausführen einer abschließenden Sicherheitsüberprüfung</span><span class="sxs-lookup"><span data-stu-id="ef7b7-138">Perform a final security review</span></span>
    - <span data-ttu-id="ef7b7-139">Releasearchiv</span><span class="sxs-lookup"><span data-stu-id="ef7b7-139">Release archive</span></span>
 
1. <span data-ttu-id="ef7b7-140">Reaktion auf Bedrohungen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-140">Response</span></span> 

    - <span data-ttu-id="ef7b7-141">Ausführen eines Reaktionsplans bei Bedrohungen</span><span class="sxs-lookup"><span data-stu-id="ef7b7-141">Execute threat response execution</span></span>

![Security Development Lifecycle](../media/sdl.png)

<span data-ttu-id="ef7b7-143">SDL ist nicht einfach nur ein Prozess oder Toolset, sondern in gleichem Maße ein Aspekt einer Unternehmenskultur.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-143">The SDL is as much a cultural aspect as it is a process or set of tools.</span></span> <span data-ttu-id="ef7b7-144">Wenn es gelingt, eine Organisationskultur zu schaffen, in der das Thema Sicherheit bei der Anwendungsentwicklung ein Hauptschwerpunkt und zugleich eine Anforderung ist, kann dies deutlich zum Ausbau sicherheitsbezogener Kompetenzen in Organisationen führen.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-144">Building a culture where security is a primary focus and requirement of any application development can make great strides in evolving an organization's capabilities around security.</span></span>

<!-- Bear in mind that the migration of un-modified applications (especially COTS procured software systems) will not be able to perform many of the steps listed above.
 -->

## <a name="operational-security-assessment"></a><span data-ttu-id="ef7b7-145">Bewertung der Betriebssicherheit</span><span class="sxs-lookup"><span data-stu-id="ef7b7-145">Operational security assessment</span></span>

<span data-ttu-id="ef7b7-146">Nach der Bereitstellung einer Anwendung muss deren Sicherheitsstatus kontinuierlich überwacht werden. Außerdem muss festgelegt werden, wie mit möglichen Problemen umgegangen wird. Dieses Wissen muss anschließend in den Softwareentwicklungszyklus einfließen.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-146">Once an application has been deployed, it's essential to continually evaluate its security posture, determine how to mitigate any issues that are discovered, and feed the knowledge back into the software development cycle.</span></span> <span data-ttu-id="ef7b7-147">Wie genau diese Vorgänge umgesetzt werden, entscheidet über den Reifegrad der Softwareentwicklung, der operativen Teams und der Datenschutzanforderungen.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-147">The depth to which this is performed is a factor of the maturity level of the software development and operational teams as well as the data privacy requirements.</span></span>

<span data-ttu-id="ef7b7-148">Mit Scansoftware für Sicherheitsrisiken stehen Dienste bereit, mit denen Sie diesen Prozess automatisieren und mögliche Sicherheitsprobleme in regelmäßigen Abständen bewerten können, ohne dabei Teams mit kostspieligen manuellen Vorgängen wie Penetrationtests zu belasten.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-148">Security vulnerability scanning software services are available to help automate this process and assess security concerns on a regular cadence, without burdening teams with costly manual processes, such as penetration testing.</span></span>

<span data-ttu-id="ef7b7-149">Azure Security Center ist ein kostenloser Dienst, der mittlerweile standardmäßig für alle Azure-Abonnements aktiviert ist. Er ist fest in andere Azure-Dienste auf Anwendungsebene wie Azure Application Gateway und Azure Web Application Firewall integriert.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-149">Azure Security Center is a free service, now enabled by default for all Azure subscriptions, that is tightly integrated with other Azure application level services, such as Azure Application Gateway and Azure Web Application Firewall.</span></span> <span data-ttu-id="ef7b7-150">Azure Security Center analysiert Protokolle dieser Dienste und meldet daraufhin Sicherheitsrisiken in Echtzeit. Außerdem werden Gegenmaßnahmen zur Verringerung der Risiken vorgeschlagen. Darüber hinaus kann der Dienst auch so konfiguriert werden, dass bei Angriffen automatisch Playbooks ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-150">By analyzing logs from these services, ASC can report on known vulnerabilities in real time, recommend responses to mitigate them, and even be configured to automatically execute playbooks in response to attacks.</span></span>

<!-- SDL culture
Key Vault / MSI
CSE = App  -> DB & App Storage
Mention approach of code scanning & SDL
Scanning for passwords - Git
 -->

## <a name="identity-as-the-perimeter"></a><span data-ttu-id="ef7b7-151">Identität als Zugriffskriterium</span><span class="sxs-lookup"><span data-stu-id="ef7b7-151">Identity as the perimeter</span></span>

<span data-ttu-id="ef7b7-152">Die Identitätsüberprüfung wird beim Schutz von Anwendungen zunehmend zur ersten Verteidigungslinie.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-152">Identity validation is becoming the first line in defense for applications.</span></span> <span data-ttu-id="ef7b7-153">Wenn der Zugriff auf eine Webanwendung durch die Authentifizierung und Autorisierung von Sitzungen eingeschränkt wird, kann dies die Angriffsfläche deutlich reduzieren.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-153">Restricting access to a web application by authenticating and authorizing sessions can drastically reduce the attack surface area.</span></span> <span data-ttu-id="ef7b7-154">Azure AD und Azure AD B2C stellen eine wirksame Methode bereit, die Identitäts- und Zugriffsverwaltung an einen vollständig verwalteten Dienst auszulagern.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-154">Azure AD and Azure AD B2C offer an effective way to offload the responsibility of identity and access to a fully managed service.</span></span> <span data-ttu-id="ef7b7-155">Durch Richtlinien für bedingten Zugriff, Privileged Identity Management und Identity Protection können Kunden in Azure AD noch effektiver unbefugte Zugriffe verhindern und Änderungen überwachen.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-155">Azure AD conditional access policies, privileged identity management, and Identity Protection controls further enhance a customer's ability to prevent unauthorized access and audit changes.</span></span>

## <a name="data-protection"></a><span data-ttu-id="ef7b7-156">Schutz von Daten</span><span class="sxs-lookup"><span data-stu-id="ef7b7-156">Data protection</span></span>

<span data-ttu-id="ef7b7-157">Bei den meisten, wenn nicht sogar allen Angriffen auf Webanwendungen, sind Kundendaten das Ziel.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-157">Customer data is the target for most, if not all attacks against web applications.</span></span> <span data-ttu-id="ef7b7-158">Die sichere Speicherung und Übertragung von Daten zwischen einer Anwendung und der Datenspeicherebene ist von allergrößter Bedeutung.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-158">The secure storage and transport of data between an application and its data storage layer is paramount.</span></span>

<span data-ttu-id="ef7b7-159">Lamna Healthcare speichert überaus sensible Daten im Zusammenhang mit Patientenakten und greift auf diese Daten zu.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-159">Lamna Healthcare stores and accesses particularly sensitive patient medical record data.</span></span> <span data-ttu-id="ef7b7-160">Im HIPAA-Gesetz, das 1996 vom US-Kongress erlassen wurde, werden im Zusammenspiel mit einigen weiteren Regulierungen nationale Standards für elektronische Transaktionen von Patientendaten definiert. Diese Standards gelten für Gesundheitsdienstleister und Arbeitgeber.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-160">HIPAA, enacted by the United States Congress in 1996, among other controls, defines the national standards for electronic healthcare transactions by healthcare providers and employers.</span></span> <span data-ttu-id="ef7b7-161">Lamna muss sicherstellen, dass Patienten und berechtigte Dritte, wie z.B. die Ärzte der Patienten, sicher auf die Krankendaten zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-161">Lamna must ensure patients and authorized parties, such as their physicians, have secure access to medical data.</span></span>

<span data-ttu-id="ef7b7-162">Um diese Anforderungen zu erfüllen, hat Lamna Healthcare seine Anwendungen so angepasst, dass alle ruhenden und übertragenen Patientendaten verschlüsselt werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-162">To comply with these requirements, Lamna Healthcare has modified their applications to encrypt all patient data at rest and in transit.</span></span> <span data-ttu-id="ef7b7-163">Mit Transport Layer Security (TLS) werden beispielsweise Daten zwischen der Webanwendung und den Back-End-SQL-Datenbanken verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-163">For example, Transport Layer Security (TLS) is used to encrypt data exchanged between the web application and back-end SQL databases.</span></span> <span data-ttu-id="ef7b7-164">Ruhende Daten werden auch in SQL Server mit Transparent Data Encryption (TDE) verschlüsselt. Dadurch wird sichergestellt, dass selbst bei einer Kompromittierung der Umgebung die Daten ohne die korrekten Entschlüsselungsschlüssel nicht lesbar sind.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-164">Data is also encrypted at rest in SQL Server using Transparent Data Encryption (TDE), ensuring that even if the environment is compromised, data is effectively useless to anyone without the correct decryption keys.</span></span>

<span data-ttu-id="ef7b7-165">Zum Verschlüsseln von gespeicherten Daten im Blobspeicher kann die clientseitige Verschlüsselung verwendet werden, um Daten im Speicher zu verschlüsseln, bevor diese in den Speicherdienst geschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-165">To encrypt data stored in blob storage, client-side encryption can be used to encrypt the data in memory before it's written to the storage service.</span></span> <span data-ttu-id="ef7b7-166">Bibliotheken, die diese Verschlüsselung unterstützen, sind für .NET, Java und Python verfügbar. Mit diesen können Technologien zur Datenverschlüsselung direkt in Anwendungen integriert werden, wodurch die Datenintegrität erhöht wird.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-166">Libraries supporting this encryption are available for .NET, Java, and Python, and enable the integration of data encryption directly into applications to enhance data integrity.</span></span>

### <a name="secure-key-and-secret-storage"></a><span data-ttu-id="ef7b7-167">Sichere Schlüssel und Geheimnisspeicher</span><span class="sxs-lookup"><span data-stu-id="ef7b7-167">Secure key and secret storage</span></span>

<span data-ttu-id="ef7b7-168">Anwendungsgeheimnisse (beispielsweise Verbindungszeichenfolgen und Kennwörter) und Verschlüsselungsschlüssel, die für den Zugriff auf Daten benötigt werden, dürfen unter keinen Umständen in der Anwendung hinterlegt sein.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-168">Separating application secrets (connection strings, passwords, etc.) and encryption keys from the application used to access data is vital.</span></span> <span data-ttu-id="ef7b7-169">Derartige Daten sollten nie im Anwendungscode von Konfigurationsdateien gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-169">Encryption keys and application secrets should never be stored in the application code of configuration files.</span></span> <span data-ttu-id="ef7b7-170">Stattdessen sollte ein sicherer Speicher wie Azure Key Vault verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-170">Instead, a secure store such as Azure Key Vault should be used.</span></span> <span data-ttu-id="ef7b7-171">Dadurch kann der Zugriff auf vertrauliche Daten mithilfe verwalteter Dienstidentitäten auf Anwendungsidentitäten beschränkt werden. Außerdem kann durch eine regelmäßige Schlüsselrotation verhindert werden, dass Verschlüsselungsschlüssel im Fall einer unbeabsichtigten Veröffentlichung von Dritten verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-171">Access to this sensitive data can then be limited to application identities through Managed Service Identities, and keys can be rotated on a regular basis to limit exposure in the case of encryption key leakage.</span></span> <span data-ttu-id="ef7b7-172">Kunden können sich darüber hinaus dafür entscheiden, ihre eigenen Verschlüsselungsschlüssel zu nutzen, die von lokalen Hardwaresicherheitsmodulen (HSM) generiert werden. Des Weiteren können Kunden anordnen, dass Azure Key Vault-Instanzen in eigenständigen HSMs für nur einen Mandanten implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="ef7b7-172">Customers can also choose to use their own encryption keys generated by on-premises Hardware Security Modules (HSM) and even mandate that Azure Key Vault instances are implemented in single-tenant, discrete HSMs.</span></span>

<!-- ### Secure and immutable file storage

All Azure storage accounts are encrypted by default using Microsoft managed keys. Azure customers also have the ability to use their own encryption keys (BYOK) to encrypt blob, file and queue data so that even the hosting provider has no access to unencrypted data. Data immutability is often required for auditing purposes or when legal disputes call for data to be effectively frozen for a determined amount of time. Azure has recently introduced an [immutable data storage](https://docs.microsoft.com/azure/storage/blobs/storage-blob-immutable-storage) option known as Write-Once, Read many (WORM) for this scenario. -->
