<span data-ttu-id="e2809-101">Bei Lamna Healthcare ist vor Kurzem bei einer Kunden betreffenden Webanwendung ein erheblicher Ausfall aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="e2809-101">Lamna Healthcare recently experienced a significant outage to a customer-facing web application.</span></span> <span data-ttu-id="e2809-102">Einem Techniker wurde Vollzugriff auf eine Ressourcengruppe gewährt, die die Produktionswebanwendung enthält.</span><span class="sxs-lookup"><span data-stu-id="e2809-102">An engineer was granted full access to a resource group containing the production web application.</span></span> <span data-ttu-id="e2809-103">Dieser hat versehentlich die Ressourcengruppe mit allen untergeordneten Ressourcen sowie die Datenbank gelöscht, in der aktive Kundendaten gehostet werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-103">This person accidentally deleted the resource group and all child resources, including the database hosting live customer data.</span></span> 

<span data-ttu-id="e2809-104">Zum Glück waren Anwendungsquellcode und Ressourcen in der Quellcodeverwaltung verfügbar und die Datenbank wurde regelmäßig nach einem Zeitplan automatisch gesichert.</span><span class="sxs-lookup"><span data-stu-id="e2809-104">Fortunately, the application source code and resources were available in source control and regular database backups were running automatically on a schedule.</span></span> <span data-ttu-id="e2809-105">Daher konnte der Dienst relativ einfach wiederhergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-105">Therefore the service was reinstated relatively easily.</span></span> <span data-ttu-id="e2809-106">Hier untersuchen wir nun, wie dieser Ausfall mithilfe der Funktionen in Azure zum Schutz des Zugriffs auf die Infrastruktur hätte vermieden werden können.</span><span class="sxs-lookup"><span data-stu-id="e2809-106">Here, we will explore how this outage could have been avoided by utilizing capabilities on Azure to protect the access to infrastructure.</span></span>

## <a name="criticality-of-infrastructure"></a><span data-ttu-id="e2809-107">Bedeutung der Infrastruktur</span><span class="sxs-lookup"><span data-stu-id="e2809-107">Criticality of infrastructure</span></span>

<span data-ttu-id="e2809-108">Die Cloudinfrastruktur ist inzwischen ein wichtiger Bestandteil vieler Unternehmen.</span><span class="sxs-lookup"><span data-stu-id="e2809-108">Cloud infrastructure is becoming a critical piece of many businesses.</span></span> <span data-ttu-id="e2809-109">Dabei muss darauf geachtet werden, dass Benutzer und Prozesse nur die Rechte erhalten, die sie benötigen, um ihre Arbeit zu erledigen.</span><span class="sxs-lookup"><span data-stu-id="e2809-109">It is critical to ensure people and processes have only the rights they need to get their job done.</span></span> <span data-ttu-id="e2809-110">Die Zuweisung falscher Zugriffsrechte kann Datenverluste und Datenlecks zur Folge haben und Ursache dafür sein, dass Dienste nicht mehr verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="e2809-110">Assigning incorrect access can result in data loss, data leakage, or cause services to become unavailable.</span></span> 

<span data-ttu-id="e2809-111">Systemadministratoren können für eine große Anzahl von Benutzern, Systemen und Berechtigungssätzen verantwortlich sein.</span><span class="sxs-lookup"><span data-stu-id="e2809-111">System administrators can be responsible for a large number of users, systems, and permission sets.</span></span> <span data-ttu-id="e2809-112">Daher kann die ordnungsgemäße Zuweisung von Zugriffsberechtigungen schnell unüberschaubar werden und eine Universallösung zur Folge haben.</span><span class="sxs-lookup"><span data-stu-id="e2809-112">So correctly granting access can quickly become unmanageable and can lead to a 'one size fits all' approach.</span></span> <span data-ttu-id="e2809-113">Damit wird die Verwaltung zwar unkomplizierter, es ist jedoch wesentlich einfacher, versehentlich einen freizügigeren Zugriff als erforderlich zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="e2809-113">This approach can reduce the complexity of administration, but makes it far easier to inadvertently grant more permissive access than required.</span></span>

## <a name="role-based-access-control"></a><span data-ttu-id="e2809-114">Rollenbasierte Zugriffssteuerung</span><span class="sxs-lookup"><span data-stu-id="e2809-114">Role-based access control</span></span>

<span data-ttu-id="e2809-115">Hier bietet die rollenbasierte Zugriffssteuerung (Role-Based Access Control, RBAC) ein etwas anderes Konzept.</span><span class="sxs-lookup"><span data-stu-id="e2809-115">Role-based access control (RBAC) offers a slightly different approach.</span></span> <span data-ttu-id="e2809-116">Rollen werden als Sammlungen von Zugriffsberechtigungen definiert.</span><span class="sxs-lookup"><span data-stu-id="e2809-116">Roles are defined as collections of access permissions.</span></span> <span data-ttu-id="e2809-117">Sicherheitsprinzipale werden Rollen direkt oder über eine Gruppenmitgliedschaft zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="e2809-117">Security principals are mapped to roles directly or through group membership.</span></span> <span data-ttu-id="e2809-118">Die Trennung von Sicherheitsprinzipalen, Zugriffsberechtigungen und Ressourcen ermöglicht eine einfachere Verwaltung und differenziertere Steuerung.</span><span class="sxs-lookup"><span data-stu-id="e2809-118">Separating security principals, access permissions, and resources provides simplified access management and more fine-grained control.</span></span>

<span data-ttu-id="e2809-119">In Azure werden Benutzer, Gruppen und Rollen in Azure Active Directory (Azure AD) gespeichert.</span><span class="sxs-lookup"><span data-stu-id="e2809-119">On Azure, users, groups, and roles are all stored in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="e2809-120">Bei der Azure Resource Manager-API wird die rollenbasierte Zugriffssteuerung verwendet, um die Verwaltung des Zugriffs auf alle Ressourcen innerhalb von Azure zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="e2809-120">The Azure Resource Manager API uses role-based access control to secure all resource access management within Azure.</span></span>

![ACL-basierter Zugriff](../media-draft/ACL_Based_Access.png)

<!-- ![Role-based access control](../media-draft/Role_Based_Access.png)
 -->

### <a name="roles-and-management-groups"></a><span data-ttu-id="e2809-122">Rollen und Verwaltungsgruppen</span><span class="sxs-lookup"><span data-stu-id="e2809-122">Roles and management groups</span></span>

<span data-ttu-id="e2809-123">Rollen sind bestimmte Berechtigungen, z.B. „Schreibgeschützt“ oder „Mitwirkender“, die Benutzern für den Zugriff auf eine Azure-Dienstinstanz zugewiesen werden können.</span><span class="sxs-lookup"><span data-stu-id="e2809-123">Roles are sets of permissions, like "Read-only" or "Contributor", that users can be granted to access an Azure service instance.</span></span> <span data-ttu-id="e2809-124">Rollen können auf der jeweiligen Dienstinstanzebene zugewiesen werden, werden jedoch auch in der Azure Resource Manager-Hierarchie nach unten weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="e2809-124">Roles can be granted at the individual service instance level, but they also flow down the Azure Resource Manager hierarchy.</span></span> <span data-ttu-id="e2809-125">Rollen, die in einem höheren Bereich zugewiesen werden, wie etwa ein ganzes Abonnement, werden an untergeordnete Bereiche, wie etwa Dienstinstanzen, vererbt.</span><span class="sxs-lookup"><span data-stu-id="e2809-125">Roles assigned at a higher scope, like an entire subscription, are inherited by child scopes, like service instances.</span></span> 

<span data-ttu-id="e2809-126">Bei Verwaltungsgruppen handelt es sich um eine zusätzliche hierarchische Ebene, die vor Kurzem beim RBAC-Modell eingeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="e2809-126">Management groups are an additional hierarchical level recently introduced into the RBAC model.</span></span> <span data-ttu-id="e2809-127">Verwaltungsgruppen bieten die zusätzliche Möglichkeit, Abonnements zu gruppieren und Richtlinien auf einer noch höheren Ebene anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="e2809-127">Management groups add the ability to group subscriptions together and apply policy at an even higher level.</span></span>

<span data-ttu-id="e2809-128">Dank der Möglichkeit der Weitergabe von Rollen in einer beliebig definierten Abonnementhierarchie können Administratoren authentifizierten Benutzern auch vorübergehenden Zugriff auf eine ganze Umgebung gewähren.</span><span class="sxs-lookup"><span data-stu-id="e2809-128">The ability to flow roles through an arbitrarily defined subscription hierarchy also allows administrators to grant temporary access to an entire environment for authenticated users.</span></span> <span data-ttu-id="e2809-129">Dies ist beispielsweise möglich, wenn ein Prüfer temporären schreibgeschützten Zugriff auf alle Abonnements benötigt.</span><span class="sxs-lookup"><span data-stu-id="e2809-129">For example, an auditor may require temporary read-only access to all subscriptions.</span></span>

![Verwaltungsgruppen](../media-draft/management_groups.png)

### <a name="privileged-identity-management"></a><span data-ttu-id="e2809-131">Privileged Identity Management</span><span class="sxs-lookup"><span data-stu-id="e2809-131">Privileged Identity Management</span></span>

<span data-ttu-id="e2809-132">Bei einem umfassenden Konzept zum Schutz der Infrastruktur sollte neben der Verwaltung des Zugriffs auf Azure-Ressourcen mittels RBAC mit Änderung und Weiterentwicklung der Organisation die Einbindung einer laufenden Überwachung von Rollenmitgliedern in Betracht gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-132">In addition to managing Azure resource access with RBAC, a comprehensive approach to infrastructure protection should consider including the ongoing auditing of role members as their organization changes and evolves.</span></span> <span data-ttu-id="e2809-133">Azure AD Privileged Identity Management (PIM) ist ein zusätzliches kostenpflichtiges Angebot, das einen Überblick über Rollenzuweisungen, die Aktivierung von Self-Service- und Just-In-Time-Rollen sowie die Überprüfung des Zugriffs auf Azure AD- und Azure-Ressourcen bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="e2809-133">Azure AD Privileged Identity Management (PIM) is an additional paid-for offering that provides oversight of role assignments, self-service, and just-in-time role activation and Azure AD & Azure resource access reviews.</span></span>

![Privileged Identity Management](../media-draft/PIM_Dashboard.PNG)

## <a name="providing-identities-to-services"></a><span data-ttu-id="e2809-135">Bereitstellen von Identitäten für Dienste</span><span class="sxs-lookup"><span data-stu-id="e2809-135">Providing identities to services</span></span>

<span data-ttu-id="e2809-136">Für Dienste ist es oft nützlich, eine Identität zu besitzen.</span><span class="sxs-lookup"><span data-stu-id="e2809-136">It's often valuable for services to have identities.</span></span> <span data-ttu-id="e2809-137">Anmeldeinformationen sind entgegen allen bewährten Methoden häufig in Konfigurationsdateien enthalten.</span><span class="sxs-lookup"><span data-stu-id="e2809-137">Often times, and against best practices, credential information is embedded in configuration files.</span></span> <span data-ttu-id="e2809-138">Wenn für diese Konfigurationsdateien keine Sicherheitsrichtlinien gelten, kann jeder Benutzer mit Zugriff auf die Systeme oder Repositorys auf diese Anmeldeinformationen zugreifen und stellt somit ein potenzielles Risiko dar.</span><span class="sxs-lookup"><span data-stu-id="e2809-138">With no security around these configuration files, anyone with access to the systems or repositories can access these credentials and risk exposure.</span></span>

<span data-ttu-id="e2809-139">Bei Azure AD wurde dieses Problem auf zwei Arten gelöst: mit Dienstprinzipalen und verwalteten Dienstidentitäten.</span><span class="sxs-lookup"><span data-stu-id="e2809-139">Azure AD addresses this problem through two methods: service principals and managed service identities.</span></span>

### <a name="service-principals"></a><span data-ttu-id="e2809-140">Dienstprinzipale</span><span class="sxs-lookup"><span data-stu-id="e2809-140">Service principals</span></span>

<span data-ttu-id="e2809-141">Damit das Konzept von Dienstprinzipalen verstanden werden kann, müssen zunächst die beiden Begriffe **Identität** und **Prinzipal** erläutert werden, da diese in der Welt der Identitätsverwaltung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-141">To understand service principals, it's useful to first understand the words **identity** and **principal** as they are used in Identity management world.</span></span>

<span data-ttu-id="e2809-142">Eine **Identität** ist lediglich etwas, das authentifiziert werden kann.</span><span class="sxs-lookup"><span data-stu-id="e2809-142">An **identity** is just a thing that can be authenticated.</span></span> <span data-ttu-id="e2809-143">Hierzu gehören natürlich Benutzer mit Benutzername und Kennwort, aber auch Anwendungen und andere Server, die möglicherweise mit geheimen Schlüsseln oder Zertifikaten authentifiziert werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-143">Obviously this includes users with username and password, but it can also include applications or other servers, which might authenticate with secret keys or certificates.</span></span> <span data-ttu-id="e2809-144">Hierzu eine zusätzliche Definition: Bei einem **Konto** handelt es sich um Daten, die einer Identität zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="e2809-144">As a bonus definition, an **account** is data associated with an identity.</span></span>

<span data-ttu-id="e2809-145">Ein **Prinzipal** ist eine Identität mit bestimmten Rollen oder Ansprüchen.</span><span class="sxs-lookup"><span data-stu-id="e2809-145">A **principal** is an identity acting with certain roles or claims.</span></span> <span data-ttu-id="e2809-146">Häufig ist es nicht sinnvoll, sich Identität und Prinzipal getrennt vorzustellen, sondern zu überlegen, „sudo“ über eine Bash-Eingabeaufforderung oder „Als Administrator ausführen“ unter Windows zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="e2809-146">Often it is not useful to consider identity and principal separately, but think of using 'sudo' on a bash prompt or on Windows using "run as Administrator".</span></span> <span data-ttu-id="e2809-147">In beiden Fällen bleiben Sie mit derselben Identität wie bisher angemeldet, nehmen jedoch eine andere Rolle an, unter der Sie Befehle ausführen.</span><span class="sxs-lookup"><span data-stu-id="e2809-147">In both those cases, you are still logged in as the same identity as before, but you've changed the role under which you are executing.</span></span>

<span data-ttu-id="e2809-148">Ein **Dienstprinzipal** trägt somit seinen Namen zurecht.</span><span class="sxs-lookup"><span data-stu-id="e2809-148">So a **Service Principal** is literally named.</span></span> <span data-ttu-id="e2809-149">Er stellt eine Identität dar, die von einem Dienst oder einer Anwendung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e2809-149">It is an identity that is used by a service or application.</span></span> <span data-ttu-id="e2809-150">Wie anderen Identitäten können auch ihm verschiedene Rollen zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-150">Like other identities, it can be assigned roles.</span></span> 

<span data-ttu-id="e2809-151">Bei Lamna Healthcare können beispielsweise die eigenen Bereitstellungsskripts zugewiesen werden, sodass sie authentifiziert als Dienstprinzipal ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-151">For example, Lamna Healthcare can assign its deployment scripts to run authenticated as a service principal.</span></span> <span data-ttu-id="e2809-152">Wenn dies die einzige Identität mit der Berechtigung zum Durchführen von destruktiven Aktionen ist, hat Lamna vermutlich einen langen Weg zurückgelegt, um sicherzustellen, dass Ressourcen nicht noch einmal versehentlich gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-152">If that is the only identity that has permission to perform destructive actions, Lamna will have gone a long way toward making sure they don't have a repeat of the accidental resource deletion.</span></span>

### <a name="managed-service-identities"></a><span data-ttu-id="e2809-153">Verwaltete Dienstidentitäten</span><span class="sxs-lookup"><span data-stu-id="e2809-153">Managed Service Identities</span></span>

<span data-ttu-id="e2809-154">Die Erstellung von Dienstprinzipalen kann sehr aufwendig sein, und es gibt jede Menge Berührungspunkte, die die Verwaltung erschweren.</span><span class="sxs-lookup"><span data-stu-id="e2809-154">The creation of service principals can be a tedious process, and there are a lot of touch points that can make maintaining them difficult.</span></span> <span data-ttu-id="e2809-155">Verwaltete Dienstidentitäten (Manage Service Identities, MSI) sind viel einfacher und erledigen die meiste Arbeit für Sie.</span><span class="sxs-lookup"><span data-stu-id="e2809-155">Manage Service Identities (MSI) are much easier and will do most of the work for you.</span></span> 

<span data-ttu-id="e2809-156">Eine MSI kann sofort für jeden Azure-Dienst erstellt werden, der diese Funktionalität unterstützt. Diese Möglichkeit wird von immer mehr Diensten bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="e2809-156">An MSI can be instantly created for any Azure service that supports it (the list is constantly growing).</span></span> <span data-ttu-id="e2809-157">Wenn Sie eine MSI für einen Dienst erstellen, erstellen Sie ein Konto für den Azure Active Directory-Mandanten.</span><span class="sxs-lookup"><span data-stu-id="e2809-157">When you create an MSI for a service, you are creating an account on the Azure Active Directory tenant.</span></span> <span data-ttu-id="e2809-158">Die Azure-Infrastruktur übernimmt automatisch die Authentifizierung des Diensts und die Verwaltung des Kontos.</span><span class="sxs-lookup"><span data-stu-id="e2809-158">Azure infrastructure will automatically take care of authenticating the service and managing the account.</span></span> <span data-ttu-id="e2809-159">Danach können Sie dieses Konto wie jedes andere AD-Konto verwenden und beispielsweise dafür sorgen, dass der authentifizierte Dienst sicher auf andere Azure-Ressourcen zugreift.</span><span class="sxs-lookup"><span data-stu-id="e2809-159">You can then use that account like any other AD account including securely letting the authenticated service access other Azure resources.</span></span>

<span data-ttu-id="e2809-160">Lamna Healthcare geht mit seiner Identitätsverwaltung einen Schritt weiter und verwendet MSIs für alle unterstützten Dienste, die Aufgaben der Infrastrukturverwaltung und -bereitstellung durchführen können müssen.</span><span class="sxs-lookup"><span data-stu-id="e2809-160">Lamna Healthcare takes their identity management a step further and uses MSIs for all supported services that need the ability to perform infrastructure management and deployments.</span></span>

## <a name="infrastructure-protection-at-lamna-healthcare"></a><span data-ttu-id="e2809-161">Infrastrukturschutz bei Lamna Healthcare</span><span class="sxs-lookup"><span data-stu-id="e2809-161">Infrastructure protection at Lamna Healthcare</span></span>

<span data-ttu-id="e2809-162">Wir haben gesehen,wie bei Lamna Healthcare die Probleme ab dem Vorfall angegangen wurden, bei dem versehentlich Infrastruktur gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="e2809-162">We've seen how Lamna Healthcare has addressed issues from their incident where infrastructure was inadvertently deleted.</span></span> <span data-ttu-id="e2809-163">Es wird eine rollenbasierte Zugriffssteuerung verwendet, um die Sicherheit der Infrastruktur besser gewährleisten zu können, und es werden verwaltete Dienstidentitäten verwendet, damit keine Anmeldeinformationen in den Code gelangen und die für die Dienste erforderlichen Identitäten einfacher zu verwalten sind.</span><span class="sxs-lookup"><span data-stu-id="e2809-163">They've used role-based access control to better manage the security of their infrastructure, and are using managed service identities to keep their credentials out of code and ease administration of the identities needed for their services.</span></span>

## <a name="summary"></a><span data-ttu-id="e2809-164">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="e2809-164">Summary</span></span>

<span data-ttu-id="e2809-165">Um die Verfügbarkeit und Integrität der Infrastruktur sicherzustellen, muss die Infrastruktur entsprechend geschützt werden.</span><span class="sxs-lookup"><span data-stu-id="e2809-165">To ensure the availability and integrity of infrastructure, it's important to properly secure your infrastructure.</span></span> <span data-ttu-id="e2809-166">Durch die richtige Verwendung von Features wie RBAC und verwaltete Dienstidentitäten können Sie Ihre Azure-Umgebung vor nicht autorisiertem und unabsichtlichem Zugriff schützen und die Identitätssicherheitsfunktionen in Ihrer Architektur verbessern.</span><span class="sxs-lookup"><span data-stu-id="e2809-166">Properly using features such as RBAC and managed service identities will help protect your Azure environment from unauthorized or unintended access, and will enhance the identity security capabilities in your architecture.</span></span>