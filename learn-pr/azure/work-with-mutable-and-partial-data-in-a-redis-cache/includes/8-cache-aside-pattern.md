<span data-ttu-id="2d5d5-101">Beim Erstellen einer Anwendung spielt die Servicequalität für Benutzer eine entscheidende Rolle. Hierzu gehören auch schnelle Datenabrufe.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-101">When building an application, you want to provide a great user experience, and a part of that is quick data retrieval.</span></span> <span data-ttu-id="2d5d5-102">Üblicherweise ist das Abrufen von Daten langsam. Bei häufigen Lesezugriffen kann dies die Servicequalität negativ beeinflussen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-102">Retrieving data from a database is typically a slow process and if this data is read often, this could provide a poor user experience.</span></span> <span data-ttu-id="2d5d5-103">Das cachefremde Muster (Cache-Aside Pattern) wird angewendet, um einen Cache zusammen mit einer Datenbank so zu implementieren, dass Daten, auf die besonders häufig zugegriffen wird, möglichst schnell zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-103">The cache-aside pattern describes how you can implement a cache in conjunction with a database to return the most commonly accessed data as quickly as possible.</span></span>

<span data-ttu-id="2d5d5-104">Hier erfahren Sie, wie Sie mithilfe dieses Musters wichtige Daten schnell abfragen können.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-104">Here, you'll learn how the cache-aside pattern can be used to ensure your important data is quickly accessible.</span></span>

## <a name="what-is-the-cache-aside-pattern"></a><span data-ttu-id="2d5d5-105">Was wird unter dem cachefremden Muster verstanden?</span><span class="sxs-lookup"><span data-stu-id="2d5d5-105">What is the cache-aside pattern?</span></span>

<span data-ttu-id="2d5d5-106">Das cachefremde Muster gibt vor, dass beim Abrufen von Daten aus einer Datenquelle (beispielsweise aus einer relationalen Datenbank) zunächst die Daten im Cache überprüft werden sollten.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-106">The cache-aside pattern dictates that when you need to retrieve data from a data source, like a relational database, you should first check for the data in your cache.</span></span> <span data-ttu-id="2d5d5-107">Wenn die Daten sich im Cache befinden, sollten sie genutzt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-107">If the data is in your cache, use it.</span></span> <span data-ttu-id="2d5d5-108">Andernfalls sollte die Datenbank abgefragt werden. Wenn anschließend die Daten an den Benutzer gesendet werden, sollten sie dem Cache hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-108">If the data is not in your cache, then query the database, and when you're returning the data back to the user add it to your cache.</span></span> <span data-ttu-id="2d5d5-109">Dadurch können Sie auf die Daten im Cache zugreifen, wenn diese beim nächsten Mal benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-109">This will then allow you to access the data from your cache the next time it's needed.</span></span>

## <a name="when-to-implement-cache-aside-pattern"></a><span data-ttu-id="2d5d5-110">In welchen Fällen sollte das cachefremde Muster implementiert werden?</span><span class="sxs-lookup"><span data-stu-id="2d5d5-110">When to implement cache-aside pattern?</span></span>

<span data-ttu-id="2d5d5-111">Datenbankabfragen sind in der Regel langsam. Dies liegt daran, dass komplexe Abfragen durchgeführt werden und ein Abfrageausführungsplan vorbereit wird. Anschließend müssen die Abfrage ausgeführt und das Ergebnis vorbereit werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-111">Reading data from a database is usually a slow process because it involves compilation of a complex query, preparation of a query execution plan, execution of the query, and then preparation of the result.</span></span> <span data-ttu-id="2d5d5-112">In einigen Fällen werden bei diesem Vorgang möglicherweise auch Daten vom Datenträger gelesen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-112">In some cases, this process may read data from the disk as well.</span></span> <span data-ttu-id="2d5d5-113">Zwar lassen sich auf Datenbankebene Optimierungen vornehmen, bei denen beispielsweise Abfragen vorkompiliert und einige Daten in den Speicher geladen werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-113">There are optimizations that can be done on the database level like having pre-compiling the queries, and loading some of the data in memory.</span></span> <span data-ttu-id="2d5d5-114">Die Ausführung der Abfrage und die Vorbereitung der Ergebnisse finden jedoch immer erst beim Abruf von Daten aus der Datenbank statt.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-114">However, execution of the query and preparation of the result will always happen when retrieving data from a database.</span></span>

<span data-ttu-id="2d5d5-115">Dieses Problem lässt sich mithilfe des cachefremden Musters lösen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-115">We can solve this problem using cache-aside pattern.</span></span> <span data-ttu-id="2d5d5-116">Dieses sieht auch weiterhin eine Anwendung und eine Datenbank vor. Zusätzlich ist jedoch auch ein Cache vorhanden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-116">In the cache-aside pattern, we still have the application and the database, but now we also have a cache.</span></span> <span data-ttu-id="2d5d5-117">Dieser speichert Daten im Speicher, damit ein Zugriff auf das Dateisystem vermieden wird.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-117">A cache stores its data in memory, so it doesn't have to interact with the file system.</span></span> <span data-ttu-id="2d5d5-118">Caches speichern Daten in sehr einfachen Datenstrukturen wie z.B. Schlüssel-Wert-Paaren. Dadurch wird verhindert, dass komplexen Abfragen ausgeführt werden, um Daten zu sammeln oder Indizes beim Schreiben von Daten zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-118">Caches also store data in very simple data structures, like key value pairs, so they don't have to execute complex queries to gather data or maintain indexes when writing data.</span></span> <span data-ttu-id="2d5d5-119">Ein Cache ist daher üblicherweise leistungsfähiger als eine Datenbank.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-119">Because of this, a cache is typically more performant than a database.</span></span> <span data-ttu-id="2d5d5-120">Wenn Sie eine Anwendung verwenden, versucht diese zunächst, Daten aus dem Cache zu lesen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-120">When you use an application, it will try to read data from the cache first.</span></span> <span data-ttu-id="2d5d5-121">Wenn sich die angeforderten Daten nicht im Cache befinden, ruft die Anwendung diese wie üblich aus der Datenbank ab.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-121">If the requested data is not in the cache, the application will retrieve it from the database, like it always has done.</span></span> <span data-ttu-id="2d5d5-122">Die Daten werden anschließend allerdings im Cache gespeichert, damit sie für die nachfolgenden Anforderungen bereitstehen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-122">However, then it stores the data in the cache for subsequent requests.</span></span> <span data-ttu-id="2d5d5-123">Wenn ein Benutzer beim nächsten Mal die Daten anfordert, werden diese direkt aus dem Cache zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-123">Next time when any user requests the data, it will return it from the cache directly.</span></span>

![Laden von Daten in den Cache](../media-draft/cache-aside-set-cache.png)

### <a name="how-to-manage-updating-data"></a><span data-ttu-id="2d5d5-125">Verwalten von Daten, die aktualisiert werden</span><span class="sxs-lookup"><span data-stu-id="2d5d5-125">How to manage updating data</span></span>

<span data-ttu-id="2d5d5-126">Bei der Implementierung des cachefremden Musters stoßen Sie auf ein Problem.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-126">When you implement the cache-aside pattern, you introduce a small problem.</span></span> <span data-ttu-id="2d5d5-127">Da Ihre Daten nun in einem Cache und in einem Datenspeicher gespeichert werden, können Probleme auftreten, wenn Sie versuchen, eine Aktualisierung vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-127">Since your data is now stored in a cache and a data store, you can run into problems when you try to make an update.</span></span> <span data-ttu-id="2d5d5-128">Wenn Sie beispielsweise Ihre Daten aktualisieren möchten, müssen Sie diesen Vorgang sowohl für den Cache als auch für den Datenspeicher ausführen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-128">For example, to update your data, you would need to update both the cache and the data store.</span></span>

<span data-ttu-id="2d5d5-129">Die Lösung dieses Problems besteht innerhalb des cachefremden Musters darin, die Gültigkeit der Daten im Cache aufzuheben.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-129">The solution to this problem in the cache-aside pattern is to invalidate the data in the cache.</span></span> <span data-ttu-id="2d5d5-130">Bei der Aktualisierung von Daten in Ihrer Anwendung sollten Sie zuerst die Daten im Cache löschen und anschließend Änderungen direkt an der Datenquelle vornehmen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-130">When you update date in your application you should first delete the data in the cache and then make the changes to the data source directly.</span></span> <span data-ttu-id="2d5d5-131">Dadurch sind die Daten bei der nächsten Anforderung nicht mehr im Cache, und der Vorgang wiederholt sich.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-131">By doing this, next time the data is requested, it won't be present in the cache, and the process will repeat.</span></span> 

![Aufheben der Gültigkeit von zwischengespeicherten Daten](../media-draft/cache-aside-invalidate.png)

## <a name="considerations-for-using-the-cache-aside-pattern"></a><span data-ttu-id="2d5d5-133">Überlegungen zur Verwendung des cachefremden Musters</span><span class="sxs-lookup"><span data-stu-id="2d5d5-133">Considerations for using the cache-aside pattern</span></span>

<span data-ttu-id="2d5d5-134">Sie sollten genau überlegen, welche Daten im Cache gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-134">Carefully consider which data we should put in the cache.</span></span> <span data-ttu-id="2d5d5-135">Nicht alle Daten eignen sich hierfür.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-135">Not all data is suitable to be cached.</span></span>

- <span data-ttu-id="2d5d5-136">**Lebensdauer:** Stellen Sie sicher, dass die Ablaufrichtlinie auf die Häufigkeit des Datenzugriffs abgestimmt ist. Nur so kann das cachefremde Muster wirksam eingesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-136">**Lifetime**: For cache-aside to be effective, make sure that the expiration policy matches the access frequency of the data.</span></span> <span data-ttu-id="2d5d5-137">Wenn der festgelegte Ablaufzeitraum zu kurz ist, kann dies dazu führen, dass Anwendungen Daten kontinuierlich aus dem Datenspeicher abrufen und dem Cache hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-137">Making the expiration period too short can cause applications to continually retrieve data from the data store and add it to the cache.</span></span>

- <span data-ttu-id="2d5d5-138">**Entfernen von Daten:** Caches weisen im Vergleich zu üblichen Datenspeichern nur eine eingeschränkte Größe auf. Daten müssen daher ggf. entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-138">**Evicting**: Caches have a limited size compared to typical data stores, and they'll evict data if necessary.</span></span> <span data-ttu-id="2d5d5-139">Achten Sie deswegen darauf, eine geeignete Entfernungsrichtlinie für Ihre Daten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-139">Make sure you choose an appropriate eviction policy for your data.</span></span>

- <span data-ttu-id="2d5d5-140">**Auffüllen des Caches im Vorfeld:** Um das cachefremde Muster effektiv einzusetzen, füllen viele Lösungen den Cache vorab mit Daten auf, die voraussichtlich häufig abgefragt werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-140">**Priming**: To make the cache-aside pattern effect, many solutions will prepopulate the cache with data that they think will be accessed often.</span></span>

- <span data-ttu-id="2d5d5-141">**Konsistenz:** Durch das Implementieren des cachefremden Musters ist die Konsistenz zwischen dem Datenspeicher und dem Cache nicht garantiert.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-141">**Consistency**: Implementing the Cache-Aside pattern doesn't guarantee consistency between the data store and the cache.</span></span> <span data-ttu-id="2d5d5-142">Daten in einem Datenspeicher können ohne Benachrichtigung des Caches geändert werden.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-142">Data in a data store can be changed without notifying the cache.</span></span> <span data-ttu-id="2d5d5-143">Dies kann zu schwerwiegenden Synchronisierungsproblemen führen.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-143">This can lead to serious synchronization issues.</span></span>

<span data-ttu-id="2d5d5-144">Das cachefremde Muster ist nützlich, wenn Sie häufig Daten aus einer Datenquelle abfragen müssen, die auf einen Datenträger zurückgreift.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-144">The cache-aside pattern is useful when you're required to access data frequently from a data source that uses a disk.</span></span> <span data-ttu-id="2d5d5-145">Durch die Umsetzung dieses Musters speichern Sie wichtige Daten in einem Cache, um diese schneller abrufen zu können.</span><span class="sxs-lookup"><span data-stu-id="2d5d5-145">Using the cache-aside pattern, you'll store important data in a cache to help increase the speed of retrieving it.</span></span> 