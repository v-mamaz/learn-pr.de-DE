<span data-ttu-id="ab854-101">Nachdem Sie nun wissen, wie Azure IoT Hub Daten von IoT-Geräten wie etwa dem Raspberry Pi erfasst, können Sie als Nächstes weitere IoT-Geräte bereitstellen, die ebenfalls Daten senden.</span><span class="sxs-lookup"><span data-stu-id="ab854-101">Now that you have an understanding of how Azure IoT Hub collects data from IoT devices such as the Raspberry Pi you can now move forward to provision other IoT devices to send their data as well.</span></span> <span data-ttu-id="ab854-102">Die Einrichtung von IoT-Geräten in einem kleinen Projekt (bis zu fünf Geräte) kann 1: 1 durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ab854-102">Completing setup of IoT devices in a small project (1-5 devices) can be done 1 to 1.</span></span> <span data-ttu-id="ab854-103">Umfangreichere Bereitstellungen bedürfen einer besseren Bereitstellungsmethode.</span><span class="sxs-lookup"><span data-stu-id="ab854-103">Larger deployments would require a better method for provisioning.</span></span>

<span data-ttu-id="ab854-104">Mit Azure IoT Hub Device Provisioning Service können Kunden die automatische Bereitstellung von Geräten (sprich: ohne manuelles Eingreifen) in Azure IoT Hub konfigurieren und von der Skalierbarkeit der Cloud profitieren, anstatt wie früher alles zeitaufwendig nacheinander bereitstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="ab854-104">Azure IoT Hub Device Provisioning Service enables customers to configure zero-touch device provisioning to Azure IoT Hub, and it brings the scalability of the cloud to what was once a lengthy one-at-a-time process.</span></span> <span data-ttu-id="ab854-105">Bei der Gestaltung des Prozesses wurden die Herausforderungen der Lieferkette berücksichtigt. Das Ergebnis ist eine Infrastruktur, mit der sich Millionen von Geräten sicher und skalierbar bereitstellen lassen.</span><span class="sxs-lookup"><span data-stu-id="ab854-105">The process was designed with the challenges of the supply chain in mind, providing the infrastructure needed to provision millions of devices in a secure and scalable manner.</span></span>

<span data-ttu-id="ab854-106">Die automatische Gerätebereitstellung mit dem Device Provisioning-Dienst unterstützt jetzt alle Protokolle, die auch von IoT Hub unterstützt werden. Hierzu zählen unter anderem HTTP, AMQP, MQTT, AMQP über WebSockets und MQTT über WebSockets.</span><span class="sxs-lookup"><span data-stu-id="ab854-106">Automatic device provisioning with the Device Provisioning Service now supports all protocols that IoT Hub supports including HTTP, AMQP, MQTT, AMQP over websockets, and MQTT over websockets.</span></span> <span data-ttu-id="ab854-107">Diese Version entspricht auch der erweiterten SDK-Sprachunterstützung (sowohl geräte- als auch clientseitig).</span><span class="sxs-lookup"><span data-stu-id="ab854-107">This release also corresponds to expanded SDK language support for both the device and client side.</span></span>

## <a name="link-the-device-provisioning-service-to-an-iot-hub"></a><span data-ttu-id="ab854-108">Verknüpfen des Device Provisioning-Diensts mit einer IoT Hub-Instanz</span><span class="sxs-lookup"><span data-stu-id="ab854-108">Link the Device Provisioning Service to an IoT hub</span></span>

<span data-ttu-id="ab854-109">Der nächste Schritt besteht darin, den Device Provisioning-Dienst und IoT Hub zu verknüpfen, damit der IoT Hub Device Provisioning-Dienst bei diesem Hub Geräte registrieren kann.</span><span class="sxs-lookup"><span data-stu-id="ab854-109">The next step is to link the Device Provisioning Service and IoT hub so that the IoT Hub Device Provisioning Service can register devices to that hub.</span></span> <span data-ttu-id="ab854-110">Der Dienst kann nur Geräte mit IoT Hubs bereitstellen, die mit dem Device Provisioning-Dienst verknüpft wurden.</span><span class="sxs-lookup"><span data-stu-id="ab854-110">The service can only provision devices to IoT hubs that have been linked to the Device Provisioning Service.</span></span> <span data-ttu-id="ab854-111">Führen Sie folgende Schritte durch:</span><span class="sxs-lookup"><span data-stu-id="ab854-111">Follow these steps.</span></span>

1.  <span data-ttu-id="ab854-112">Klicken Sie im Azure-Portal auf der Seite **Alle Ressourcen** auf die Device Provisioning Service-Instanz, die Sie zuvor erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="ab854-112">In the **All resources** page on the Azure portal, click the Device Provisioning Service instance you created previously.</span></span>

2.  <span data-ttu-id="ab854-113">Klicken Sie auf der Seite „Device Provisioning Service“ auf **Verknüpfte IoT Hubs**.</span><span class="sxs-lookup"><span data-stu-id="ab854-113">In the Device Provisioning Service page, click **Linked IoT hubs**.</span></span>

3.  <span data-ttu-id="ab854-114">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="ab854-114">Click **Add**.</span></span>

4.  <span data-ttu-id="ab854-115">Geben Sie auf der Seite **Verknüpfung zu IoT Hub hinzufügen** die folgenden Informationen ein, und klicken Sie auf **Speichern**:</span><span class="sxs-lookup"><span data-stu-id="ab854-115">In the **Add link to IoT hub** page, provide the following information, and click **Save**:</span></span>

    - <span data-ttu-id="ab854-116">**Abonnement:** Stellen Sie sicher, dass das Abonnement mit der IoT Hub-Instanz ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="ab854-116">**Subscription:** Make sure the subscription that contains the IoT hub is selected.</span></span> <span data-ttu-id="ab854-117">Sie können eine Verknüpfung mit einer IoT Hub-Instanz erstellen, die in einem anderen Abonnement enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="ab854-117">You can link to IoT hub that resides in a different subscription.</span></span>

    - <span data-ttu-id="ab854-118">**IoT Hub:** Wählen Sie den Namen der IoT Hub-Instanz aus, die Sie mit dieser Device Provisioning Service-Instanz verknüpfen möchten.</span><span class="sxs-lookup"><span data-stu-id="ab854-118">**IoT hub:** Choose the name of the IoT hub that you want to link with this Device Provisioning Service instance.</span></span>

    - <span data-ttu-id="ab854-119">**Zugriffsrichtlinie:** Wählen Sie **iothubowner** als Anmeldeinformationen zum Erstellen der Verknüpfung mit der IoT Hub-Instanz aus.</span><span class="sxs-lookup"><span data-stu-id="ab854-119">**Access Policy:** Select **iothubowner** as the credentials to use for establishing the link to the IoT hub.</span></span>

![Verknüpfen des Hubnamens mit dem DPS im Portal](../media/ee6e78754a1d39d86de71fb6872723f3.png)

## <a name="set-the-allocation-policy-on-the-device-provisioning-service"></a><span data-ttu-id="ab854-121">Festlegen der Zuordnungsrichtlinie im Device Provisioning-Dienst</span><span class="sxs-lookup"><span data-stu-id="ab854-121">Set the allocation policy on the Device Provisioning Service</span></span>

<span data-ttu-id="ab854-122">Die Zuordnungsrichtlinie ist eine Einstellung des IoT Hub Device Provisioning-Diensts, die festlegt, wie Geräte einer IoT Hub-Instanz zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="ab854-122">The allocation policy is a IoT Hub Device Provisioning Service setting that determines how devices are assigned to an IoT hub.</span></span> <span data-ttu-id="ab854-123">Es gibt drei unterstützte Zuordnungsrichtlinien:</span><span class="sxs-lookup"><span data-stu-id="ab854-123">There are three supported allocation policies:</span></span>

1. <span data-ttu-id="ab854-124">**Niedrigste Latenz**: Geräte werden basierend auf dem Hub mit der geringsten Latenz auf dem Gerät für eine IoT Hub-Instanz bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="ab854-124">**Lowest latency**: Devices are provisioned to an IoT hub based on the hub with the lowest latency to the device.</span></span>

2. <span data-ttu-id="ab854-125">**Gleichmäßig gewichtete Verteilung** (Standard): Bei verknüpften IoT Hubs ist die Wahrscheinlichkeit gleich hoch, dass Geräte für sie bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="ab854-125">**Evenly weighted distribution** (default): Linked IoT hubs are equally likely to have devices provisioned to them.</span></span> <span data-ttu-id="ab854-126">Dies ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="ab854-126">This setting is the default.</span></span> <span data-ttu-id="ab854-127">Wenn Sie nur für eine IoT Hub-Instanz Geräte bereitstellen, können Sie diese Einstellung beibehalten.</span><span class="sxs-lookup"><span data-stu-id="ab854-127">If you are provisioning devices to only one IoT hub, you can keep this setting.</span></span>

3. <span data-ttu-id="ab854-128">**Statische Konfiguration über die Registrierungsliste**: Die Angabe der gewünschten IoT Hub-Instanz in der Registrierungsliste hat gegenüber der Zuordnungsrichtlinie auf Ebene des Device Provisioning-Diensts Vorrang.</span><span class="sxs-lookup"><span data-stu-id="ab854-128">**Static configuration via the enrollment list**: Specification of the desired IoT hub in the enrollment list takes priority over the Device Provisioning Service-level allocation policy.</span></span>

<span data-ttu-id="ab854-129">Klicken Sie zum Festlegen der Zuordnungsrichtlinie auf der Seite „Device Provisioning-Dienst“ auf **Zuordnungsrichtlinie verwalten**.</span><span class="sxs-lookup"><span data-stu-id="ab854-129">To set the allocation policy, in the Device Provisioning Service page click **Manage allocation policy**.</span></span> <span data-ttu-id="ab854-130">Stellen Sie sicher, dass die Zuordnungsrichtlinie auf **Gleichmäßig gewichtete Verteilung** (Standard) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="ab854-130">Make sure the allocation policy is set to **Evenly weighted distribution** (the default).</span></span> <span data-ttu-id="ab854-131">Wenn Sie Änderungen vornehmen, klicken Sie danach auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="ab854-131">If you make any changes, click **Save** when you are done.</span></span>

![Verwalten von Zuordnungsrichtlinien](../media/0c5fa5193156f17b4f5d64aab65a414d.png)

## <a name="enroll-the-device"></a><span data-ttu-id="ab854-133">Registrieren des Geräts</span><span class="sxs-lookup"><span data-stu-id="ab854-133">Enroll the device</span></span>

<span data-ttu-id="ab854-134">Bei diesem Schritt werden dem Device Provisioning-Dienst die eindeutigen Sicherheitsartefakte des Geräts hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="ab854-134">This step involves adding the device's unique security artifacts to the Device Provisioning Service.</span></span> <span data-ttu-id="ab854-135">Diese Sicherheitsartefakte basieren auf dem [Nachweismechanismus](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism) des Geräts:</span><span class="sxs-lookup"><span data-stu-id="ab854-135">These security artifacts are based on the device's [Attestation mechanism](https://docs.microsoft.com/azure/iot-dps/concepts-device#attestation-mechanism) as follows:</span></span>

<span data-ttu-id="ab854-136">Für TPM-basierte Geräte benötigen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="ab854-136">For TPM-based devices you need:</span></span>

- <span data-ttu-id="ab854-137">Der *Endorsement Key* ist für jeden TPM-Chip bzw. jede Simulation eindeutig. Sie erhalten ihn vom Hersteller des TPM-Chips.</span><span class="sxs-lookup"><span data-stu-id="ab854-137">The *Endorsement Key* that is unique to each TPM chip or simulation, which is obtained from the TPM chip manufacturer.</span></span> <span data-ttu-id="ab854-138">Weitere Informationen finden Sie im Artikel [Grundlegendes zum TPM Endorsement Key](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology).</span><span class="sxs-lookup"><span data-stu-id="ab854-138">Read the [Understand TPM Endorsement Key](https://docs.microsoft.com/windows-server/identity/ad-ds/manage/component-updates/tpm-key-attestation#terminology) for more information.</span></span>

- <span data-ttu-id="ab854-139">Die *Registrierungs-ID*, die zur eindeutigen Identifizierung eines Geräts im Namespace/Bereich verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ab854-139">The *Registration ID* that is used to uniquely identify a device in the namespace/scope.</span></span> <span data-ttu-id="ab854-140">Diese ID ist eventuell mit der Geräte-ID identisch.</span><span class="sxs-lookup"><span data-stu-id="ab854-140">This ID may or may not be the same as the device ID.</span></span> <span data-ttu-id="ab854-141">Die ID ist für jedes Gerät erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ab854-141">The ID is mandatory for every device.</span></span> <span data-ttu-id="ab854-142">Bei TPM-basierten Geräten kann die Registrierungs-ID vom TMP selbst abgeleitet werden, z.B. ein SHA-256-Hash des TPM Endorsement Key.</span><span class="sxs-lookup"><span data-stu-id="ab854-142">For TPM-based devices, the registration ID may be derived from the TPM itself, for example, an SHA-256 hash of the TPM Endorsement Key.</span></span>

![Registrierungsinformationen für das TPM im Portal](../media/11db90b7128e1cf222a4da45de7cbac8.png)

<span data-ttu-id="ab854-144">Für X.509-basierte Geräte benötigen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="ab854-144">For X.509 based devices you need:</span></span>

- <span data-ttu-id="ab854-145">Das [für den X.509-Chip oder die X.509-Simulation ausgestellte Zertifikat](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates) in Form einer *PEM*- oder *CER*-Datei.</span><span class="sxs-lookup"><span data-stu-id="ab854-145">The [certificate issued to the X.509](https://docs.microsoft.com/windows/desktop/SecCertEnroll/about-x-509-public-key-certificates) chip or simulation, in the form of either a *.pem* or a *.cer* file.</span></span> <span data-ttu-id="ab854-146">Für die individuelle Registrierung müssen Sie für Ihr X.509-System das *Signaturzertifikat* auf Gerätebasis verwenden, für Registrierungsgruppen dagegen das *Stammzertifikat*.</span><span class="sxs-lookup"><span data-stu-id="ab854-146">For individual enrollment, you need to use the per-device *signer         certificate* for your X.509 system, while for enrollment groups, you need to use the *root certificate*.</span></span>

   ![Hinzufügen einer individuellen Registrierung für den X.509-Nachweis im Portal](../media/8d56752f453f27e55dd15b7c894ae406.png)

<span data-ttu-id="ab854-148">Das Gerät kann auf zwei Arten beim Device Provisioning-Dienst registriert werden:</span><span class="sxs-lookup"><span data-stu-id="ab854-148">There are two ways to enroll the device to the Device Provisioning Service:</span></span>

- <span data-ttu-id="ab854-149">**Registrierungsgruppen** Diese stellen Gruppen von Geräten dar, die einen bestimmten Nachweismechanismus gemeinsam nutzen.</span><span class="sxs-lookup"><span data-stu-id="ab854-149">**Enrollment Groups** This represents a group of devices that share a specific attestation mechanism.</span></span> <span data-ttu-id="ab854-150">Es wird empfohlen, eine Registrierungsgruppe für eine große Anzahl von Geräten, die eine gewünschte Erstkonfiguration gemeinsam nutzen, oder für Geräte zu verwenden, die alle demselben Mandanten zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="ab854-150">We recommend using an enrollment group for a large number of devices, which share a desired initial configuration, or for devices all going to the same tenant.</span></span> <span data-ttu-id="ab854-151">Weitere Informationen zum Identitätsnachweis für Registrierungsgruppen finden Sie unter [Sicherheit](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates).</span><span class="sxs-lookup"><span data-stu-id="ab854-151">For more information on Identity attestation for enrollment groups, see [Security](https://docs.microsoft.com/azure/iot-dps/concepts-security#controlling-device-access-to-the-provisioning-service-with-x509-certificates).</span></span>

   ![Hinzufügen einer Gruppenregistrierung für den X.509-Nachweis im Portal](../media/4a9d9ea822887c70f1ff1e4b64b138f1.png)

- <span data-ttu-id="ab854-153">**Individuelle Registrierungen** Diese stellen Einträge für ein einzelnes Gerät dar, das beim Device Provisioning-Dienst registriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="ab854-153">**Individual Enrollments** This represents an entry for a single device that may register with the Device Provisioning Service.</span></span> <span data-ttu-id="ab854-154">Individuelle Registrierungen verwenden entweder X.509-Zertifikate oder SAS-Token (in einem physischen oder virtuellen TPM) als Nachweismechanismen.</span><span class="sxs-lookup"><span data-stu-id="ab854-154">Individual enrollments may use either x509 certificates or SAS tokens (in a real or virtual TPM) as attestation mechanisms.</span></span> <span data-ttu-id="ab854-155">Individuelle Registrierungen sollten für Geräte, die besondere Erstkonfigurationen erfordern, und für Geräte verwendet werden, die nur SAS-Token über das TPM oder das virtuelle TPM als Nachweismechanismus verwenden können.</span><span class="sxs-lookup"><span data-stu-id="ab854-155">We recommend using individual enrollments for devices that require unique initial configurations, and devices that can only use SAS tokens via TPM or virtual TPM as the attestation mechanism.</span></span> <span data-ttu-id="ab854-156">Bei individuellen Registrierungen ist möglicherweise die gewünschte IoT Hub-Geräte-ID angegeben.</span><span class="sxs-lookup"><span data-stu-id="ab854-156">Individual enrollments may have the desired IoT hub device ID specified.</span></span>

<span data-ttu-id="ab854-157">Nun registrieren Sie das Gerät mithilfe der erforderlichen Sicherheitsartefakte basierend auf dem Nachweismechanismus des Geräts bei der Device Provisioning-Dienstinstanz:</span><span class="sxs-lookup"><span data-stu-id="ab854-157">Now you enroll the device with your Device Provisioning Service instance, using the required security artifacts based on the device's attestation mechanism:</span></span>

1. <span data-ttu-id="ab854-158">Melden Sie sich beim Azure-Portal an, klicken Sie im Menü auf der linken Seite auf die Schaltfläche **Alle Ressourcen**, und öffnen Sie Ihren Device Provisioning-Dienst.</span><span class="sxs-lookup"><span data-stu-id="ab854-158">Sign in to the Azure portal, click on the **All resources** button on the left-hand menu and open your Device Provisioning service.</span></span>

2. <span data-ttu-id="ab854-159">Wählen Sie auf dem Zusammenfassungsblatt des Device Provisioning-Diensts die Option **Registrierungen verwalten** aus.</span><span class="sxs-lookup"><span data-stu-id="ab854-159">On the Device Provisioning Service summary blade, select **Manage enrollments**.</span></span> <span data-ttu-id="ab854-160">Wählen Sie je nach Ihrer Geräteinstallation entweder die Registerkarte **Individuelle Registrierungen** oder **Registrierungsgruppen**.</span><span class="sxs-lookup"><span data-stu-id="ab854-160">Select either **Individual Enrollments** tab or the **Enrollment Groups** tab as per your device setup.</span></span> <span data-ttu-id="ab854-161">Klicken Sie ganz oben auf die Schaltfläche **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="ab854-161">Click the **Add** button at the top.</span></span> <span data-ttu-id="ab854-162">Wählen Sie **TPM** oder **X.509** als *Mechanismus* zum Identitätsnachweis aus, und geben Sie wie zuvor erläutert die entsprechenden Sicherheitsartefakte ein.</span><span class="sxs-lookup"><span data-stu-id="ab854-162">Select **TPM** or **X.509** as the identity attestation *Mechanism*, and enter the appropriate security artifacts as discussed     previously.</span></span> <span data-ttu-id="ab854-163">Sie können eine neue **IoT Hub-Geräte-ID** eingeben.</span><span class="sxs-lookup"><span data-stu-id="ab854-163">You may enter a new **IoT Hub device ID**.</span></span> <span data-ttu-id="ab854-164">Klicken Sie abschließend auf die Schaltfläche **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="ab854-164">Once complete, click the **Save** button.</span></span>

3. <span data-ttu-id="ab854-165">Wenn das Gerät erfolgreich registriert wurde, sollte es wie folgt im Portal angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="ab854-165">When the device is successfully enrolled, you should see it displayed in the portal as follows:</span></span>

![Erfolgreiche TPM-Registrierung im Portal](../media/cb277b2e5bc21cd02669775d536e89c0.png)

<span data-ttu-id="ab854-167">Nach der Registrierung wartet der Bereitstellungsdienst, bis das Gerät gestartet und eine Verbindung mit dem Dienst hergestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ab854-167">After enrollment, the provisioning service then waits for the device to boot and connect with it at any later point in time.</span></span> <span data-ttu-id="ab854-168">Wenn Ihr Gerät zum ersten Mal gestartet wird, interagiert die Client-SDK-Bibliothek zur Extraktion der Sicherheitsartefakte vom Gerät mit Ihrem Chip und überprüft die Registrierung bei Ihrem Device Provisioning-Dienst.</span><span class="sxs-lookup"><span data-stu-id="ab854-168">When your device boots for the first time, the client SDK library interacts with your chip to extract the security artifacts from the device, and verifies registration with your Device Provisioning service.</span></span>

## <a name="start-the-iot-device"></a><span data-ttu-id="ab854-169">Starten des IoT-Geräts</span><span class="sxs-lookup"><span data-stu-id="ab854-169">Start the IoT device</span></span>

<span data-ttu-id="ab854-170">Bei Ihrem IoT-Gerät kann es sich um ein echtes Gerät oder ein simuliertes Gerät handeln.</span><span class="sxs-lookup"><span data-stu-id="ab854-170">Your IoT device can be a real device, or a simulated device.</span></span> <span data-ttu-id="ab854-171">Da das IoT-Gerät jetzt bei einer Device Provisioning Service-Instanz registriert ist, kann es nun gestartet werden und zur Erkennung mithilfe des Nachweismechanismus den Bereitstellungsdienst aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ab854-171">Since the IoT device has now been enrolled with a Device Provisioning Service instance, the device can now boot up, and call the provisioning service to be recognized using the attestation mechanism.</span></span> <span data-ttu-id="ab854-172">Nach der Erkennung des Geräts durch den Bereitstellungsdienst wird es einer IoT Hub-Instanz hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="ab854-172">Once the provisioning service has recognized the device, it will be assigned to an IoT hub.</span></span>

<span data-ttu-id="ab854-173">Beispiele für simulierte Geräte, die sowohl TPM- als auch X.509-Nachweise nutzen, stehen für C, Java, C\#, Node.js und Python zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="ab854-173">Simulated device examples, using both TPM and X.509 attestation, are included for C, Java, C\#, Node.js, and Python.</span></span> <span data-ttu-id="ab854-174">Für ein simuliertes Gerät, das TPM und das [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c) verwendet, wird beispielsweise der im Abschnitt [Simulieren der ersten Startsequenz für das Gerät](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device) erläuterte Prozess ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="ab854-174">For example, a simulated device using TPM and the [Azure IoT C SDK](https://github.com/Azure/azure-iot-sdk-c) would follow the process covered in the [Simulate first boot sequence for a device](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device#simulate-first-boot-sequence-for-the-device) section.</span></span> <span data-ttu-id="ab854-175">Das gleiche Gerät bezieht sich bei Verwendung des X.509-Zertifikats auf diesen Abschnitt zur [Startsequenz](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device).</span><span class="sxs-lookup"><span data-stu-id="ab854-175">The same device using X.509 certificate attestation would refer to this [boot sequence](https://docs.microsoft.com/azure/iot-dps/quick-create-simulated-device-x509#simulate-first-boot-sequence-for-the-device) section.</span></span>

<span data-ttu-id="ab854-176">Ein Beispiel für ein echtes Gerät finden Sie unter [Verwenden der automatischen Bereitstellung des Azure IoT Hub Device Provisioning Service zum Registrieren des MXChip IoT DevKit bei IoT Hub](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit).</span><span class="sxs-lookup"><span data-stu-id="ab854-176">Refer to the [How-to guide for the MXChip Iot DevKit](https://docs.microsoft.com/azure/iot-dps/how-to-connect-mxchip-iot-devkit) as an example for a real device.</span></span>

<span data-ttu-id="ab854-177">Starten Sie das Gerät, damit die Clientanwendung Ihres Geräts mit der Registrierung bei Ihrer Device Provisioning Service-Instanz beginnen kann.</span><span class="sxs-lookup"><span data-stu-id="ab854-177">Start the device to allow your device's client application to start the registration with your Device Provisioning service.</span></span>

## <a name="verify-the-device-is-registered"></a><span data-ttu-id="ab854-178">Überprüfen, ob das Gerät registriert ist</span><span class="sxs-lookup"><span data-stu-id="ab854-178">Verify the device is registered</span></span>

<span data-ttu-id="ab854-179">Nach dem Starten Ihres Geräts sollten die folgenden Aktionen ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="ab854-179">Once your device boots, the following actions should take place:</span></span>

1. <span data-ttu-id="ab854-180">Das Gerät sendet eine Registrierungsanforderung an Ihren Device Provisioning-Dienst.</span><span class="sxs-lookup"><span data-stu-id="ab854-180">The device sends a registration request to your Device Provisioning service.</span></span>

2. <span data-ttu-id="ab854-181">Bei TPM-Geräten sendet der Device Provisioning-Dienst eine Registrierungsaufforderung zurück, auf die Ihr Gerät antwortet.</span><span class="sxs-lookup"><span data-stu-id="ab854-181">For TPM devices, the Device Provisioning Service sends back a registration challenge to which your device responds.</span></span>

3. <span data-ttu-id="ab854-182">Nach erfolgreicher Registrierung sendet der Device Provisioning-Dienst den IoT Hub-URI, die Geräte-ID und den verschlüsselten Schlüssel an das Gerät zurück.</span><span class="sxs-lookup"><span data-stu-id="ab854-182">On successful registration, the Device Provisioning Service sends the IoT hub URI, device ID, and the encrypted key back to the device.</span></span>

4. <span data-ttu-id="ab854-183">Die IoT Hub-Clientanwendung auf dem Gerät stellt dann eine Verbindung mit Ihrem Hub her.</span><span class="sxs-lookup"><span data-stu-id="ab854-183">The IoT Hub client application on the device then connects to your hub.</span></span>

5. <span data-ttu-id="ab854-184">Nachdem eine Verbindung mit dem Hub hergestellt wurde, sollte das Gerät im IoT Hub-Explorer für **IoT-Geräte** angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="ab854-184">On successful connection to the hub, you should see the device appear in the IoT hub's **IoT Devices** explorer.</span></span>

![Erfolgreiche Herstellung einer Verbindung mit dem Hub im Portal](../media/12ea6da6eef9bf96be6bd80aa1721173.png)

<!--Reference links

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-set-up-cloud>

-   <https://docs.microsoft.com/azure/iot-dps/tutorial-provision-device-to-hub>-->