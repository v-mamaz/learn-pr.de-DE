<span data-ttu-id="cd884-101">In der letzten Übung haben Sie das trainierte Modell mithilfe des Features **Schnelltest** des Custom Vision Service-Portals getestet.</span><span class="sxs-lookup"><span data-stu-id="cd884-101">In the last exercise, we tested our trained model using the **Quick Test** feature of the Custom Vision Service portal.</span></span> <span data-ttu-id="cd884-102">Mit diesem Feature können Sie die Genauigkeit des Modells mit einigen Testbildern schnell überprüfen.</span><span class="sxs-lookup"><span data-stu-id="cd884-102">This is a great way to quickly check the accuracy of the model with some test images.</span></span> <span data-ttu-id="cd884-103">Rufen Sie nun den Vorhersageendpunkt des Modells mehrmals über HTTP auf.</span><span class="sxs-lookup"><span data-stu-id="cd884-103">Let's go a little further and make calls to the prediction endpoint of our model over HTTP.</span></span>

[!include[](../../../includes/azure-sandbox-activate.md)]

1. <span data-ttu-id="cd884-104">Wählen Sie anschließend in Ihrem *Artworks*-Projekt\* im Custom Vision Service-Portal die Registerkarte **Leistung** aus.</span><span class="sxs-lookup"><span data-stu-id="cd884-104">Returning to your *Artworks*\* project in the Custom Vision Service portal, select the  **Performance** tab.</span></span>

    ![Auswählen der Registerkarte „Leistung“](../media/5-performance-tab.png)

1. <span data-ttu-id="cd884-106">Wählen Sie **Make default** (Als Standard festlegen), um sicherzustellen, dass es sich bei der aktuellen Iteration des Modells um die Standarditeration handelt.</span><span class="sxs-lookup"><span data-stu-id="cd884-106">Select **Make default** to make sure the latest iteration of the model is the default iteration.</span></span>

1. <span data-ttu-id="cd884-107">Klicken Sie auf **Prediction URL** (Vorhersage-URL).</span><span class="sxs-lookup"><span data-stu-id="cd884-107">Select **Prediction URL**.</span></span> <span data-ttu-id="cd884-108">Dadurch wird ein Dialogfeld mit den Informationen angezeigt, die für die Aufrufe erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="cd884-108">This displays a dialog of the information we need to make our calls.</span></span> 

    ![Anzeigen von Vorhersage-URL-Informationen](../media/5-portal-prediction-url.png)

    <span data-ttu-id="cd884-110">Wenn das Dialogfeld angezeigt wird, können Sie den Vorhersageendpunkt aufrufen und eine Bild-URL an ihn übergeben.</span><span class="sxs-lookup"><span data-stu-id="cd884-110">As the dialog shows, we can call the prediction endpoint and pass it an image URL.</span></span> <span data-ttu-id="cd884-111">Sie können im Anforderungstext auch ein unformatiertes Bild an den Endpunkt übergeben.</span><span class="sxs-lookup"><span data-stu-id="cd884-111">We can also pass a raw image to the endpoint in the body of the request.</span></span>

    <span data-ttu-id="cd884-112">Notieren Sie sich drei Informationen aus diesem Dialogfeld.</span><span class="sxs-lookup"><span data-stu-id="cd884-112">Take note of three pieces of information from this dialog.</span></span>
     - <span data-ttu-id="cd884-113">**Prediction-Key** (Vorhersageschlüssel): Dieser Schlüssel muss in allen Anforderungen als Header festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="cd884-113">**Prediction-Key**: This key has to be set as a header in all requests.</span></span> <span data-ttu-id="cd884-114">Damit erhalten Sie Zugriff auf den Endpunkt.</span><span class="sxs-lookup"><span data-stu-id="cd884-114">That's what gives us access to the endpoint.</span></span>
    - <span data-ttu-id="cd884-115">**Request URL** (Anforderungs-URL): Im Dialogfeld werden zwei verschiedene URLs angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cd884-115">**Request URL**: The dialog shows two different URLs.</span></span> <span data-ttu-id="cd884-116">Wenn Sie eine Bild-URL veröffentlichen, verwenden Sie die erste URL, die auf `/url` endet.</span><span class="sxs-lookup"><span data-stu-id="cd884-116">If we're posting an image URL, then use the first URL, which ends in `/url`.</span></span> <span data-ttu-id="cd884-117">Wenn Sie eine unformatierte Bilddatei im Anforderungstext bereitstellen möchten, verwenden Sie die zweite URL, die auf `/image` endet.</span><span class="sxs-lookup"><span data-stu-id="cd884-117">If we want to post a raw image in the body of our request, we use the second URL, which ends in `/image`.</span></span>
    - <span data-ttu-id="cd884-118">**Content-Type** (Inhaltstyp): Wenn Sie ein unformatiertes Bild veröffentlichen, legen Sie den Anforderungstext auf die binäre Darstellung des Bilds und den Inhaltstyp auf `application/octet-stream` fest.</span><span class="sxs-lookup"><span data-stu-id="cd884-118">**Content-Type**: If we're posting a raw image, we set the body of the request to the binary representation of the image and the content type to `application/octet-stream`.</span></span> <span data-ttu-id="cd884-119">Wenn Sie eine Bild-URL veröffentlichen, fügen Sie sie als JSON-Code in den Anforderungstext ein, und legen Sie den Inhaltstyp auf `application/json` fest.</span><span class="sxs-lookup"><span data-stu-id="cd884-119">If we're posting an image URL, we put that as JSON in the body and set the content type to `application/json`.</span></span>
    

3. <span data-ttu-id="cd884-120">Kopieren und speichern Sie die erste URL und den `Prediction-Key`-Wert aus dem Dialogfeld **Verwenden der Vorhersage-API**.</span><span class="sxs-lookup"><span data-stu-id="cd884-120">Copy and save the first URL and the `Prediction-Key` value from the **How to use the Prediction API** dialog.</span></span> 

> [!TIP]
> <span data-ttu-id="cd884-121">**cURL** ist ein Befehlszeilentool, mit dem Dateien gesendet und empfangen werden können.</span><span class="sxs-lookup"><span data-stu-id="cd884-121">**cURL** is a command line tool that can be used to send or receive files.</span></span> <span data-ttu-id="cd884-122">Es ist in Linux, MacOS und Windows 10 enthalten und kann für die meisten anderen Betriebssysteme heruntergeladen werden.</span><span class="sxs-lookup"><span data-stu-id="cd884-122">It's included with Linux, macOS, and Windows 10, and can be downloaded for most other operating systems.</span></span> <span data-ttu-id="cd884-123">cURL unterstützt zahlreiche Protokolle wie HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP, POP3 usw. Weitere Informationen finden Sie unter den unten angegebenen Links:</span><span class="sxs-lookup"><span data-stu-id="cd884-123">cURL supports numerous protocols like HTTP, HTTPS, FTP, FTPS, SFTP, LDAP, TELNET, SMTP, POP3, etc. For more information, refer to the links below:</span></span>
>
>- <https://en.wikipedia.org/wiki/CURL>
>- <https://curl.haxx.se/docs/> 
> 
> <span data-ttu-id="cd884-124">cURL in der Sandbox von Azure Cloud Shell bereits installiert.</span><span class="sxs-lookup"><span data-stu-id="cd884-124">cURL is already installed in the Azure Cloud Shell in the sandbox.</span></span> <span data-ttu-id="cd884-125">Im nächsten Abschnitt dieser Übung werden Sie HTTP-Aufrufe an den Endpunkt senden.</span><span class="sxs-lookup"><span data-stu-id="cd884-125">So, we'll cURL in this exercise to make HTTP calls to our endpoint.</span></span>

2. <span data-ttu-id="cd884-126">Führen Sie den folgenden Befehl in Cloud Shell aus.</span><span class="sxs-lookup"><span data-stu-id="cd884-126">Execute the following command in the Cloud Shell.</span></span> <span data-ttu-id="cd884-127">Ersetzen Sie **[Endpunkt-URL]** durch die URL aus dem letzten Schritt.</span><span class="sxs-lookup"><span data-stu-id="cd884-127">Replace **[endpoint-URL]** with the URL you saved from the last step.</span></span> <span data-ttu-id="cd884-128">Ersetzen Sie **[Vorhersageschlüssel]** durch den Wert von `Prediction-Key`, den Sie im letzten Schritt gespeichert haben.</span><span class="sxs-lookup"><span data-stu-id="cd884-128">Replace **[Prediction-Key]** with the value of `Prediction-Key` you saved from the last step.</span></span> 

    ```azurecli
    curl [endpoint-URL] \
    -H "Prediction-Key: [Prediction-Key]" \
    -H "Content-Type: application/json" \
    -d "{'url' : 'https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/VanGoghTest_02.jpg'}" \
    | jq '.'
    ```

    <span data-ttu-id="cd884-129">Wenn der Befehl abgeschlossen ist, wird eine JSON-Antwort ähnlich der im folgenden Screenshot angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cd884-129">When the command completes, you'll see a JSON response similar to the following screenshot.</span></span> <span data-ttu-id="cd884-130">Die API gibt für jedes Tag im Modell eine Wahrscheinlichkeit zurück.</span><span class="sxs-lookup"><span data-stu-id="cd884-130">The API returns a probability for every tag in the model.</span></span> <span data-ttu-id="cd884-131">Mit einer Wahrscheinlichkeit von fast 1 für den Wert `"painting"` **tagName** ist dieses Bild definitiv ein Gemälde.</span><span class="sxs-lookup"><span data-stu-id="cd884-131">As you can see, with a probability close to 1 for the `"painting"` **tagName** value, this image is definitely a painting.</span></span> <span data-ttu-id="cd884-132">Es wurde jedoch von keinem der Künstler gemalt, mit denen Sie das Modell trainiert haben.</span><span class="sxs-lookup"><span data-stu-id="cd884-132">However, it's not a painting by any of the artists with which we trained our model.</span></span> 

    ![Miniaturansicht des Picasso-Testbilds](../media/5-prediction-json.png) 

3. <span data-ttu-id="cd884-134">Probieren Sie weitere Vorhersagen aus, indem Sie die URL im Anforderungstext durch die URLs in der folgenden Tabelle ersetzen.</span><span class="sxs-lookup"><span data-stu-id="cd884-134">Try more predictions by replacing the URL in the request body above, with the URLs in the following table.</span></span> 

    |<span data-ttu-id="cd884-135">Bild</span><span class="sxs-lookup"><span data-stu-id="cd884-135">Image</span></span>  | <span data-ttu-id="cd884-136">URL</span><span class="sxs-lookup"><span data-stu-id="cd884-136">URL</span></span>  |
    |---------|---------|
    |![Miniaturansicht des Picasso-Testbilds](../media/picasso-test-02-thumb.jpg)     | `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PicassoTest_02.jpg`        |
    |![Miniaturansicht des Rembrandt-Testbilds](../media/rembrandt-test-01-thumb.jpg)     |  `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/RembrandtTest_01.jpg`       |
    |![Miniaturansicht des Pollock-Testbilds](../media/pollock-test-01-thumb.jpg)  |   `https://raw.githubusercontent.com/MicrosoftDocs/mslearn-classify-images-with-the-custom-vision-service/master/test-images/PollockTest_01.jpg`     |
   

<span data-ttu-id="cd884-140">Der Vorhersageendpunkt funktioniert wie erwartet.</span><span class="sxs-lookup"><span data-stu-id="cd884-140">Our prediction endpoint is working as expected.</span></span> <span data-ttu-id="cd884-141">Das Aufrufen der API ist so einfach wie das Senden einer HTTP-Anforderung an den Endpunkt mit einem Vorhersageschlüssel und einer Bild-URL.</span><span class="sxs-lookup"><span data-stu-id="cd884-141">Calling the API is as simple as making a HTTP request to the endpoint with a Prediction-Key and an image URL.</span></span>